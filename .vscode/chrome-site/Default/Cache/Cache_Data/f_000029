import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/users/SiteUsersPage.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=46037ee7"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=46037ee7"; const useEffect = __vite__cjsImport3_react["useEffect"]; const useState = __vite__cjsImport3_react["useState"];
import { useNavigate } from "/node_modules/.vite/deps/react-router-dom.js?v=46037ee7";
import { Plus, Search, Edit, Trash2, User as UserIcon, CheckCircle, XCircle } from "/node_modules/.vite/deps/lucide-react.js?v=46037ee7";
const SiteUsersPage = () => {
  _s();
  const navigate = useNavigate();
  const [users, setUsers] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [searchTerm, setSearchTerm] = useState("");
  const [activeTab, setActiveTab] = useState("users");
  useEffect(() => {
    fetchUsers();
  }, []);
  const fetchUsers = async () => {
    setIsLoading(true);
    try {
      const response = await fetch("https://localhost:5001/api/users");
      if (response.ok) {
        const data = await response.json();
        const mappedUsers = data.map((u) => ({
          id: u.id,
          username: u.userName,
          email: u.email,
          fullName: u.displayName || `${u.perfil?.nombres || ""} ${u.perfil?.apellidos || ""}`.trim(),
          isActive: u.isActive,
          roles: u.roles.map((r) => {
            if (r.rolId === "d5f1c8a0-1b2c-4d3e-8f4a-5b6c7d8e9f0a") return "Site Admin";
            if (r.rolId === "e6a2d9b1-2c3d-4e5f-9a0b-6c7d8e9f0b1c") return "Site Collaborator";
            return "Unknown Role";
          }),
          lastLogin: u.lastLoginAtUtc
        }));
        setUsers(mappedUsers);
      }
    } catch (error) {
      console.error("Error fetching users:", error);
    } finally {
      setIsLoading(false);
    }
  };
  const handleDelete = async (id) => {
    if (!confirm("¿Estás seguro de que deseas eliminar este usuario del site?")) return;
    try {
      const response = await fetch(`https://localhost:5001/api/users/${id}`, { method: "DELETE" });
      if (response.ok) {
        fetchUsers();
      } else {
        console.error("Failed to delete user");
        alert("Error al eliminar el usuario");
      }
    } catch (error) {
      console.error("Error deleting user:", error);
      alert("Error al eliminar el usuario");
    }
  };
  const filteredUsers = users.filter(
    (user) => user.fullName.toLowerCase().includes(searchTerm.toLowerCase()) || user.email.toLowerCase().includes(searchTerm.toLowerCase()) || user.username.toLowerCase().includes(searchTerm.toLowerCase())
  );
  return /* @__PURE__ */ jsxDEV("div", { className: "p-6 h-[calc(100vh-4rem)] flex flex-col", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "mb-6", children: [
      /* @__PURE__ */ jsxDEV("h1", { className: "text-2xl font-bold text-gray-900", children: "Usuarios del Site" }, void 0, false, {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 92,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-gray-500", children: "Gestiona los usuarios con acceso a la administración del site" }, void 0, false, {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 93,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
      lineNumber: 91,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "flex gap-6 border-b border-gray-200 mb-6", children: /* @__PURE__ */ jsxDEV(
      "button",
      {
        onClick: () => setActiveTab("users"),
        className: `pb-3 px-1 text-sm font-medium transition-colors relative ${activeTab === "users" ? "text-indigo-600 border-b-2 border-indigo-600" : "text-gray-500 hover:text-gray-700"}`,
        children: "Usuarios"
      },
      void 0,
      false,
      {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 98,
        columnNumber: 9
      },
      this
    ) }, void 0, false, {
      fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
      lineNumber: 97,
      columnNumber: 7
    }, this),
    activeTab === "users" && /* @__PURE__ */ jsxDEV("div", { className: "bg-white rounded-xl shadow-sm border border-gray-100 flex-1 flex flex-col overflow-hidden", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "p-4 border-b border-gray-100 flex gap-4 justify-between items-center", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "relative flex-1 max-w-md", children: [
          /* @__PURE__ */ jsxDEV(Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400", size: 20 }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 114,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV(
            "input",
            {
              type: "text",
              placeholder: "Buscar usuarios...",
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
            },
            void 0,
            false,
            {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 115,
              columnNumber: 15
            },
            this
          )
        ] }, void 0, true, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 113,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: () => navigate("/usuarios/nuevo"),
            className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",
            children: [
              /* @__PURE__ */ jsxDEV(Plus, { size: 20 }, void 0, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 127,
                columnNumber: 15
              }, this),
              "Nuevo Usuario"
            ]
          },
          void 0,
          true,
          {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 123,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 112,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "overflow-y-auto flex-1", children: /* @__PURE__ */ jsxDEV("table", { className: "w-full text-left border-collapse", children: [
        /* @__PURE__ */ jsxDEV("thead", { className: "bg-gray-50 sticky top-0 z-10", children: /* @__PURE__ */ jsxDEV("tr", { children: [
          /* @__PURE__ */ jsxDEV("th", { className: "px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Usuario" }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 136,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Roles" }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 137,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Estado" }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 138,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider", children: "Último Acceso" }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 139,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right", children: "Acciones" }, void 0, false, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 140,
            columnNumber: 19
          }, this)
        ] }, void 0, true, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 135,
          columnNumber: 17
        }, this) }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 134,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV("tbody", { className: "divide-y divide-gray-100", children: isLoading ? /* @__PURE__ */ jsxDEV("tr", { children: /* @__PURE__ */ jsxDEV("td", { colSpan: 5, className: "px-6 py-8 text-center text-gray-500", children: "Cargando usuarios..." }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 146,
          columnNumber: 21
        }, this) }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 145,
          columnNumber: 15
        }, this) : filteredUsers.length === 0 ? /* @__PURE__ */ jsxDEV("tr", { children: /* @__PURE__ */ jsxDEV("td", { colSpan: 5, className: "px-6 py-8 text-center text-gray-500", children: "No se encontraron usuarios" }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 150,
          columnNumber: 21
        }, this) }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 149,
          columnNumber: 15
        }, this) : filteredUsers.map(
          (user) => /* @__PURE__ */ jsxDEV("tr", { className: "hover:bg-gray-50 transition-colors", children: [
            /* @__PURE__ */ jsxDEV("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3", children: [
              /* @__PURE__ */ jsxDEV("div", { className: "p-2 rounded-full bg-indigo-50 text-indigo-600", children: /* @__PURE__ */ jsxDEV(UserIcon, { size: 20 }, void 0, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 158,
                columnNumber: 29
              }, this) }, void 0, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 157,
                columnNumber: 27
              }, this),
              /* @__PURE__ */ jsxDEV("div", { children: [
                /* @__PURE__ */ jsxDEV("div", { className: "font-medium text-gray-900", children: user.fullName }, void 0, false, {
                  fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                  lineNumber: 161,
                  columnNumber: 29
                }, this),
                /* @__PURE__ */ jsxDEV("div", { className: "text-sm text-gray-500", children: user.email }, void 0, false, {
                  fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                  lineNumber: 162,
                  columnNumber: 29
                }, this)
              ] }, void 0, true, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 160,
                columnNumber: 27
              }, this)
            ] }, void 0, true, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 156,
              columnNumber: 25
            }, this) }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 155,
              columnNumber: 23
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "px-6 py-4", children: /* @__PURE__ */ jsxDEV("div", { className: "flex flex-wrap gap-1", children: user.roles.map(
              (role, index) => /* @__PURE__ */ jsxDEV("span", { className: "px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full", children: role }, index, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 169,
                columnNumber: 21
              }, this)
            ) }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 167,
              columnNumber: 25
            }, this) }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 166,
              columnNumber: 23
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "px-6 py-4 whitespace-nowrap", children: /* @__PURE__ */ jsxDEV("div", { className: `flex items-center gap-1.5 text-sm ${user.isActive ? "text-green-600" : "text-red-600"}`, children: [
              user.isActive ? /* @__PURE__ */ jsxDEV(CheckCircle, { size: 16 }, void 0, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 177,
                columnNumber: 44
              }, this) : /* @__PURE__ */ jsxDEV(XCircle, { size: 16 }, void 0, false, {
                fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                lineNumber: 177,
                columnNumber: 72
              }, this),
              user.isActive ? "Activo" : "Inactivo"
            ] }, void 0, true, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 176,
              columnNumber: 25
            }, this) }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 175,
              columnNumber: 23
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500", children: user.lastLogin ? new Date(user.lastLogin).toLocaleDateString() : "Nunca" }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 181,
              columnNumber: 23
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "px-6 py-4 whitespace-nowrap text-right", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-end gap-2", children: [
              /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: () => navigate(`/usuarios/editar/${user.id}`),
                  className: "p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",
                  title: "Editar",
                  children: /* @__PURE__ */ jsxDEV(Edit, { size: 18 }, void 0, false, {
                    fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                    lineNumber: 191,
                    columnNumber: 29
                  }, this)
                },
                void 0,
                false,
                {
                  fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                  lineNumber: 186,
                  columnNumber: 27
                },
                this
              ),
              /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: () => handleDelete(user.id),
                  className: "p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",
                  title: "Eliminar",
                  children: /* @__PURE__ */ jsxDEV(Trash2, { size: 18 }, void 0, false, {
                    fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                    lineNumber: 198,
                    columnNumber: 29
                  }, this)
                },
                void 0,
                false,
                {
                  fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
                  lineNumber: 193,
                  columnNumber: 27
                },
                this
              )
            ] }, void 0, true, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 185,
              columnNumber: 25
            }, this) }, void 0, false, {
              fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
              lineNumber: 184,
              columnNumber: 23
            }, this)
          ] }, user.id, true, {
            fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
            lineNumber: 154,
            columnNumber: 15
          }, this)
        ) }, void 0, false, {
          fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
          lineNumber: 143,
          columnNumber: 15
        }, this)
      ] }, void 0, true, {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 133,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
        lineNumber: 132,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
      lineNumber: 111,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx",
    lineNumber: 90,
    columnNumber: 5
  }, this);
};
_s(SiteUsersPage, "RI+KngEvDytdhB4tMSvuajLu1lQ=", false, function() {
  return [useNavigate];
});
_c = SiteUsersPage;
export default SiteUsersPage;
var _c;
$RefreshReg$(_c, "SiteUsersPage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("D:/Proyects/emplyx/Emplyx.Site/src/pages/users/SiteUsersPage.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6IkFBd0VROzs7Ozs7Ozs7Ozs7Ozs7OztBQXhFUixTQUFTQSxXQUFXQyxnQkFBZ0I7QUFDcEMsU0FBU0MsbUJBQW1CO0FBQzVCLFNBQVNDLE1BQU1DLFFBQVFDLE1BQU1DLFFBQVFDLFFBQVFDLFVBQVVDLGFBQWFDLGVBQWU7QUFHbkYsTUFBTUMsZ0JBQWdCQSxNQUFNO0FBQUFDLEtBQUE7QUFDMUIsUUFBTUMsV0FBV1gsWUFBWTtBQUM3QixRQUFNLENBQUNZLE9BQU9DLFFBQVEsSUFBSWQsU0FBaUIsRUFBRTtBQUM3QyxRQUFNLENBQUNlLFdBQVdDLFlBQVksSUFBSWhCLFNBQVMsS0FBSztBQUNoRCxRQUFNLENBQUNpQixZQUFZQyxhQUFhLElBQUlsQixTQUFTLEVBQUU7QUFDL0MsUUFBTSxDQUFDbUIsV0FBV0MsWUFBWSxJQUFJcEIsU0FBUyxPQUFPO0FBRWxERCxZQUFVLE1BQU07QUFDZHNCLGVBQVc7QUFBQSxFQUNiLEdBQUcsRUFBRTtBQUVMLFFBQU1BLGFBQWEsWUFBWTtBQUM3QkwsaUJBQWEsSUFBSTtBQUNqQixRQUFJO0FBQ0YsWUFBTU0sV0FBVyxNQUFNQyxNQUFNLGtDQUFrQztBQUMvRCxVQUFJRCxTQUFTRSxJQUFJO0FBQ2YsY0FBTUMsT0FBTyxNQUFNSCxTQUFTSSxLQUFLO0FBRWpDLGNBQU1DLGNBQXNCRixLQUFLRyxJQUFJLENBQUNDLE9BQVk7QUFBQSxVQUNoREMsSUFBSUQsRUFBRUM7QUFBQUEsVUFDTkMsVUFBVUYsRUFBRUc7QUFBQUEsVUFDWkMsT0FBT0osRUFBRUk7QUFBQUEsVUFDVEMsVUFBVUwsRUFBRU0sZUFBZSxHQUFHTixFQUFFTyxRQUFRQyxXQUFXLEVBQUUsSUFBSVIsRUFBRU8sUUFBUUUsYUFBYSxFQUFFLEdBQUdDLEtBQUs7QUFBQSxVQUMxRkMsVUFBVVgsRUFBRVc7QUFBQUEsVUFDWkMsT0FBT1osRUFBRVksTUFBTWIsSUFBSSxDQUFDYyxNQUFXO0FBRTdCLGdCQUFJQSxFQUFFQyxVQUFVLHVDQUF3QyxRQUFPO0FBQy9ELGdCQUFJRCxFQUFFQyxVQUFVLHVDQUF3QyxRQUFPO0FBQy9ELG1CQUFPO0FBQUEsVUFDVCxDQUFDO0FBQUEsVUFDREMsV0FBV2YsRUFBRWdCO0FBQUFBLFFBQ2YsRUFBRTtBQUNGL0IsaUJBQVNhLFdBQVc7QUFBQSxNQUN0QjtBQUFBLElBQ0YsU0FBU21CLE9BQU87QUFDZEMsY0FBUUQsTUFBTSx5QkFBeUJBLEtBQUs7QUFBQSxJQUM5QyxVQUFDO0FBQ0M5QixtQkFBYSxLQUFLO0FBQUEsSUFDcEI7QUFBQSxFQUNGO0FBRUEsUUFBTWdDLGVBQWUsT0FBT2xCLE9BQWU7QUFDekMsUUFBSSxDQUFDbUIsUUFBUSw2REFBNkQsRUFBRztBQUU3RSxRQUFJO0FBQ0YsWUFBTTNCLFdBQVcsTUFBTUMsTUFBTSxvQ0FBb0NPLEVBQUUsSUFBSSxFQUFFb0IsUUFBUSxTQUFTLENBQUM7QUFDM0YsVUFBSTVCLFNBQVNFLElBQUk7QUFDZkgsbUJBQVc7QUFBQSxNQUNiLE9BQU87QUFDTDBCLGdCQUFRRCxNQUFNLHVCQUF1QjtBQUNyQ0ssY0FBTSw4QkFBOEI7QUFBQSxNQUN0QztBQUFBLElBQ0YsU0FBU0wsT0FBTztBQUNkQyxjQUFRRCxNQUFNLHdCQUF3QkEsS0FBSztBQUMzQ0ssWUFBTSw4QkFBOEI7QUFBQSxJQUN0QztBQUFBLEVBQ0Y7QUFFQSxRQUFNQyxnQkFBZ0J2QyxNQUFNd0M7QUFBQUEsSUFBTyxDQUFBQyxTQUNqQ0EsS0FBS3BCLFNBQVNxQixZQUFZLEVBQUVDLFNBQVN2QyxXQUFXc0MsWUFBWSxDQUFDLEtBQzdERCxLQUFLckIsTUFBTXNCLFlBQVksRUFBRUMsU0FBU3ZDLFdBQVdzQyxZQUFZLENBQUMsS0FDMURELEtBQUt2QixTQUFTd0IsWUFBWSxFQUFFQyxTQUFTdkMsV0FBV3NDLFlBQVksQ0FBQztBQUFBLEVBQy9EO0FBRUEsU0FDRSx1QkFBQyxTQUFJLFdBQVUsMENBQ2I7QUFBQSwyQkFBQyxTQUFJLFdBQVUsUUFDYjtBQUFBLDZCQUFDLFFBQUcsV0FBVSxvQ0FBbUMsaUNBQWpEO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFBa0U7QUFBQSxNQUNsRSx1QkFBQyxPQUFFLFdBQVUsaUJBQWdCLDZFQUE3QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBQTBGO0FBQUEsU0FGNUY7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUdBO0FBQUEsSUFHQSx1QkFBQyxTQUFJLFdBQVUsNENBQ2I7QUFBQSxNQUFDO0FBQUE7QUFBQSxRQUNDLFNBQVMsTUFBTW5DLGFBQWEsT0FBTztBQUFBLFFBQ25DLFdBQVcsNERBQ1RELGNBQWMsVUFDVixpREFDQSxtQ0FBbUM7QUFBQSxRQUN0QztBQUFBO0FBQUEsTUFOTDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFTQSxLQVZGO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FXQTtBQUFBLElBRUNBLGNBQWMsV0FDYix1QkFBQyxTQUFJLFdBQVUsNkZBQ2I7QUFBQSw2QkFBQyxTQUFJLFdBQVUsd0VBQ2I7QUFBQSwrQkFBQyxTQUFJLFdBQVUsNEJBQ2I7QUFBQSxpQ0FBQyxVQUFPLFdBQVUsMERBQXlELE1BQU0sTUFBakY7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFBb0Y7QUFBQSxVQUNwRjtBQUFBLFlBQUM7QUFBQTtBQUFBLGNBQ0MsTUFBSztBQUFBLGNBQ0wsYUFBWTtBQUFBLGNBQ1osT0FBT0Y7QUFBQUEsY0FDUCxVQUFVLENBQUN3QyxNQUFNdkMsY0FBY3VDLEVBQUVDLE9BQU9DLEtBQUs7QUFBQSxjQUM3QyxXQUFVO0FBQUE7QUFBQSxZQUxaO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUs0SDtBQUFBLGFBUDlIO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFTQTtBQUFBLFFBQ0E7QUFBQSxVQUFDO0FBQUE7QUFBQSxZQUNDLFNBQVMsTUFBTS9DLFNBQVMsaUJBQWlCO0FBQUEsWUFDekMsV0FBVTtBQUFBLFlBRVY7QUFBQSxxQ0FBQyxRQUFLLE1BQU0sTUFBWjtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQUFlO0FBQUEsY0FBRztBQUFBO0FBQUE7QUFBQSxVQUpwQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsUUFNQTtBQUFBLFdBakJGO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFrQkE7QUFBQSxNQUVBLHVCQUFDLFNBQUksV0FBVSwwQkFDYixpQ0FBQyxXQUFNLFdBQVUsb0NBQ2Y7QUFBQSwrQkFBQyxXQUFNLFdBQVUsZ0NBQ2YsaUNBQUMsUUFDQztBQUFBLGlDQUFDLFFBQUcsV0FBVSx3RUFBdUUsdUJBQXJGO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBQTRGO0FBQUEsVUFDNUYsdUJBQUMsUUFBRyxXQUFVLHdFQUF1RSxxQkFBckY7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFBMEY7QUFBQSxVQUMxRix1QkFBQyxRQUFHLFdBQVUsd0VBQXVFLHNCQUFyRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUEyRjtBQUFBLFVBQzNGLHVCQUFDLFFBQUcsV0FBVSx3RUFBdUUsNkJBQXJGO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBQWtHO0FBQUEsVUFDbEcsdUJBQUMsUUFBRyxXQUFVLG1GQUFrRix3QkFBaEc7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFBd0c7QUFBQSxhQUwxRztBQUFBO0FBQUE7QUFBQTtBQUFBLGVBTUEsS0FQRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBUUE7QUFBQSxRQUNBLHVCQUFDLFdBQU0sV0FBVSw0QkFDZEcsc0JBQ0MsdUJBQUMsUUFDQyxpQ0FBQyxRQUFHLFNBQVMsR0FBRyxXQUFVLHVDQUFzQyxvQ0FBaEU7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUFvRixLQUR0RjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBRUEsSUFDRXFDLGNBQWNRLFdBQVcsSUFDM0IsdUJBQUMsUUFDQyxpQ0FBQyxRQUFHLFNBQVMsR0FBRyxXQUFVLHVDQUFzQywwQ0FBaEU7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUEwRixLQUQ1RjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBRUEsSUFFQVIsY0FBY3hCO0FBQUFBLFVBQUksQ0FBQzBCLFNBQ2pCLHVCQUFDLFFBQWlCLFdBQVUsc0NBQzFCO0FBQUEsbUNBQUMsUUFBRyxXQUFVLCtCQUNaLGlDQUFDLFNBQUksV0FBVSwyQkFDYjtBQUFBLHFDQUFDLFNBQUksV0FBVSxpREFDYixpQ0FBQyxZQUFTLE1BQU0sTUFBaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFBbUIsS0FEckI7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFFQTtBQUFBLGNBQ0EsdUJBQUMsU0FDQztBQUFBLHVDQUFDLFNBQUksV0FBVSw2QkFBNkJBLGVBQUtwQixZQUFqRDtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUEwRDtBQUFBLGdCQUMxRCx1QkFBQyxTQUFJLFdBQVUseUJBQXlCb0IsZUFBS3JCLFNBQTdDO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQW1EO0FBQUEsbUJBRnJEO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBR0E7QUFBQSxpQkFQRjtBQUFBO0FBQUE7QUFBQTtBQUFBLG1CQVFBLEtBVEY7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFVQTtBQUFBLFlBQ0EsdUJBQUMsUUFBRyxXQUFVLGFBQ1osaUNBQUMsU0FBSSxXQUFVLHdCQUNacUIsZUFBS2IsTUFBTWI7QUFBQUEsY0FBSSxDQUFDaUMsTUFBTUMsVUFDckIsdUJBQUMsVUFBaUIsV0FBVSx3RUFDekJELGtCQURRQyxPQUFYO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBRUE7QUFBQSxZQUNELEtBTEg7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFNQSxLQVBGO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBUUE7QUFBQSxZQUNBLHVCQUFDLFFBQUcsV0FBVSwrQkFDWixpQ0FBQyxTQUFJLFdBQVcscUNBQXFDUixLQUFLZCxXQUFXLG1CQUFtQixjQUFjLElBQ25HYztBQUFBQSxtQkFBS2QsV0FBVyx1QkFBQyxlQUFZLE1BQU0sTUFBbkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFBc0IsSUFBTSx1QkFBQyxXQUFRLE1BQU0sTUFBZjtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQUFrQjtBQUFBLGNBQzlEYyxLQUFLZCxXQUFXLFdBQVc7QUFBQSxpQkFGOUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFHQSxLQUpGO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBS0E7QUFBQSxZQUNBLHVCQUFDLFFBQUcsV0FBVSxxREFDWGMsZUFBS1YsWUFBWSxJQUFJbUIsS0FBS1QsS0FBS1YsU0FBUyxFQUFFb0IsbUJBQW1CLElBQUksV0FEcEU7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFFQTtBQUFBLFlBQ0EsdUJBQUMsUUFBRyxXQUFVLDBDQUNaLGlDQUFDLFNBQUksV0FBVSx1Q0FDYjtBQUFBO0FBQUEsZ0JBQUM7QUFBQTtBQUFBLGtCQUNDLFNBQVMsTUFBTXBELFNBQVMsb0JBQW9CMEMsS0FBS3hCLEVBQUUsRUFBRTtBQUFBLGtCQUNyRCxXQUFVO0FBQUEsa0JBQ1YsT0FBTTtBQUFBLGtCQUVOLGlDQUFDLFFBQUssTUFBTSxNQUFaO0FBQUE7QUFBQTtBQUFBO0FBQUEseUJBQWU7QUFBQTtBQUFBLGdCQUxqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsY0FNQTtBQUFBLGNBQ0E7QUFBQSxnQkFBQztBQUFBO0FBQUEsa0JBQ0MsU0FBUyxNQUFNa0IsYUFBYU0sS0FBS3hCLEVBQUU7QUFBQSxrQkFDbkMsV0FBVTtBQUFBLGtCQUNWLE9BQU07QUFBQSxrQkFFTixpQ0FBQyxVQUFPLE1BQU0sTUFBZDtBQUFBO0FBQUE7QUFBQTtBQUFBLHlCQUFpQjtBQUFBO0FBQUEsZ0JBTG5CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxjQU1BO0FBQUEsaUJBZEY7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFlQSxLQWhCRjtBQUFBO0FBQUE7QUFBQTtBQUFBLG1CQWlCQTtBQUFBLGVBL0NPd0IsS0FBS3hCLElBQWQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFnREE7QUFBQSxRQUNELEtBNURMO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUE4REE7QUFBQSxXQXhFRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBeUVBLEtBMUVGO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUEyRUE7QUFBQSxTQWhHRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBaUdBO0FBQUEsT0F0SEo7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQXdIQTtBQUVKO0FBQUVuQixHQTNMSUQsZUFBYTtBQUFBLFVBQ0FULFdBQVc7QUFBQTtBQUFBZ0UsS0FEeEJ2RDtBQTZMTixlQUFlQTtBQUFjLElBQUF1RDtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VOYXZpZ2F0ZSIsIlBsdXMiLCJTZWFyY2giLCJFZGl0IiwiVHJhc2gyIiwiVXNlciIsIlVzZXJJY29uIiwiQ2hlY2tDaXJjbGUiLCJYQ2lyY2xlIiwiU2l0ZVVzZXJzUGFnZSIsIl9zIiwibmF2aWdhdGUiLCJ1c2VycyIsInNldFVzZXJzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2VhcmNoVGVybSIsInNldFNlYXJjaFRlcm0iLCJhY3RpdmVUYWIiLCJzZXRBY3RpdmVUYWIiLCJmZXRjaFVzZXJzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiZGF0YSIsImpzb24iLCJtYXBwZWRVc2VycyIsIm1hcCIsInUiLCJpZCIsInVzZXJuYW1lIiwidXNlck5hbWUiLCJlbWFpbCIsImZ1bGxOYW1lIiwiZGlzcGxheU5hbWUiLCJwZXJmaWwiLCJub21icmVzIiwiYXBlbGxpZG9zIiwidHJpbSIsImlzQWN0aXZlIiwicm9sZXMiLCJyIiwicm9sSWQiLCJsYXN0TG9naW4iLCJsYXN0TG9naW5BdFV0YyIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZURlbGV0ZSIsImNvbmZpcm0iLCJtZXRob2QiLCJhbGVydCIsImZpbHRlcmVkVXNlcnMiLCJmaWx0ZXIiLCJ1c2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImxlbmd0aCIsInJvbGUiLCJpbmRleCIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTaXRlVXNlcnNQYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VOYXZpZ2F0ZSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBQbHVzLCBTZWFyY2gsIEVkaXQsIFRyYXNoMiwgVXNlciBhcyBVc2VySWNvbiwgQ2hlY2tDaXJjbGUsIFhDaXJjbGUgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vLi4vdHlwZXMvdXNlcic7XHJcblxyXG5jb25zdCBTaXRlVXNlcnNQYWdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcclxuICBjb25zdCBbdXNlcnMsIHNldFVzZXJzXSA9IHVzZVN0YXRlPFVzZXJbXT4oW10pO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xyXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZSgndXNlcnMnKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoVXNlcnMoKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGZldGNoVXNlcnMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2xvY2FsaG9zdDo1MDAxL2FwaS91c2VycycpO1xyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIC8vIE1hcCBiYWNrZW5kIERUTyB0byBmcm9udGVuZCBVc2VyIG1vZGVsXHJcbiAgICAgICAgY29uc3QgbWFwcGVkVXNlcnM6IFVzZXJbXSA9IGRhdGEubWFwKCh1OiBhbnkpID0+ICh7XHJcbiAgICAgICAgICBpZDogdS5pZCxcclxuICAgICAgICAgIHVzZXJuYW1lOiB1LnVzZXJOYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHUuZW1haWwsXHJcbiAgICAgICAgICBmdWxsTmFtZTogdS5kaXNwbGF5TmFtZSB8fCBgJHt1LnBlcmZpbD8ubm9tYnJlcyB8fCAnJ30gJHt1LnBlcmZpbD8uYXBlbGxpZG9zIHx8ICcnfWAudHJpbSgpLFxyXG4gICAgICAgICAgaXNBY3RpdmU6IHUuaXNBY3RpdmUsXHJcbiAgICAgICAgICByb2xlczogdS5yb2xlcy5tYXAoKHI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBNYXAgUm9sZSBJRHMgdG8gTmFtZXMgKFRlbXBvcmFyeSBtYXBwaW5nIHVudGlsIHdlIGhhdmUgYSBSb2xlcyBBUEkpXHJcbiAgICAgICAgICAgIGlmIChyLnJvbElkID09PSAnZDVmMWM4YTAtMWIyYy00ZDNlLThmNGEtNWI2YzdkOGU5ZjBhJykgcmV0dXJuICdTaXRlIEFkbWluJztcclxuICAgICAgICAgICAgaWYgKHIucm9sSWQgPT09ICdlNmEyZDliMS0yYzNkLTRlNWYtOWEwYi02YzdkOGU5ZjBiMWMnKSByZXR1cm4gJ1NpdGUgQ29sbGFib3JhdG9yJztcclxuICAgICAgICAgICAgcmV0dXJuICdVbmtub3duIFJvbGUnO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBsYXN0TG9naW46IHUubGFzdExvZ2luQXRVdGNcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc2V0VXNlcnMobWFwcGVkVXNlcnMpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyczonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZSA9IGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBpZiAoIWNvbmZpcm0oJ8K/RXN0w6FzIHNlZ3VybyBkZSBxdWUgZGVzZWFzIGVsaW1pbmFyIGVzdGUgdXN1YXJpbyBkZWwgc2l0ZT8nKSkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2xvY2FsaG9zdDo1MDAxL2FwaS91c2Vycy8ke2lkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KTtcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgZmV0Y2hVc2VycygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgdXNlcicpO1xyXG4gICAgICAgIGFsZXJ0KCdFcnJvciBhbCBlbGltaW5hciBlbCB1c3VhcmlvJyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXI6JywgZXJyb3IpO1xyXG4gICAgICBhbGVydCgnRXJyb3IgYWwgZWxpbWluYXIgZWwgdXN1YXJpbycpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGZpbHRlcmVkVXNlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiBcclxuICAgIHVzZXIuZnVsbE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpIHx8XHJcbiAgICB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSB8fFxyXG4gICAgdXNlci51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSlcclxuICApO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwLTYgaC1bY2FsYygxMDB2aC00cmVtKV0gZmxleCBmbGV4LWNvbFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cclxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5Vc3VhcmlvcyBkZWwgU2l0ZTwvaDE+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPkdlc3Rpb25hIGxvcyB1c3VhcmlvcyBjb24gYWNjZXNvIGEgbGEgYWRtaW5pc3RyYWNpw7NuIGRlbCBzaXRlPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBUYWJzICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTYgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIG1iLTZcIj5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ3VzZXJzJyl9XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2BwYi0zIHB4LTEgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyByZWxhdGl2ZSAke1xyXG4gICAgICAgICAgICBhY3RpdmVUYWIgPT09ICd1c2VycycgXHJcbiAgICAgICAgICAgICAgPyAndGV4dC1pbmRpZ28tNjAwIGJvcmRlci1iLTIgYm9yZGVyLWluZGlnby02MDAnIFxyXG4gICAgICAgICAgICAgIDogJ3RleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCdcclxuICAgICAgICAgIH1gfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIFVzdWFyaW9zXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAge2FjdGl2ZVRhYiA9PT0gJ3VzZXJzJyAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIGZsZXggZ2FwLTQganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgtMSBtYXgtdy1tZFwiPlxyXG4gICAgICAgICAgICAgIDxTZWFyY2ggY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0zIHRvcC0xLzIgLXRyYW5zbGF0ZS15LTEvMiB0ZXh0LWdyYXktNDAwXCIgc2l6ZT17MjB9IC8+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJ1c2NhciB1c3Vhcmlvcy4uLlwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2VhcmNoVGVybShlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcGwtMTAgcHItNCBweS0yIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMFwiXHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZSgnL3VzdWFyaW9zL251ZXZvJyl9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtNCBweS0yIGJnLWluZGlnby02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGhvdmVyOmJnLWluZGlnby03MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPFBsdXMgc2l6ZT17MjB9IC8+XHJcbiAgICAgICAgICAgICAgTnVldm8gVXN1YXJpb1xyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmZsb3cteS1hdXRvIGZsZXgtMVwiPlxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBib3JkZXItY29sbGFwc2VcIj5cclxuICAgICAgICAgICAgICA8dGhlYWQgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBzdGlja3kgdG9wLTAgei0xMFwiPlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicHgtNiBweS0zIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXJcIj5Vc3VhcmlvPC90aD5cclxuICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInB4LTYgcHktMyB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyXCI+Um9sZXM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicHgtNiBweS0zIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXJcIj5Fc3RhZG88L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicHgtNiBweS0zIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXJcIj7Dmmx0aW1vIEFjY2VzbzwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJweC02IHB5LTMgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciB0ZXh0LXJpZ2h0XCI+QWNjaW9uZXM8L3RoPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgIDx0Ym9keSBjbGFzc05hbWU9XCJkaXZpZGUteSBkaXZpZGUtZ3JheS0xMDBcIj5cclxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj17NX0gY2xhc3NOYW1lPVwicHgtNiBweS04IHRleHQtY2VudGVyIHRleHQtZ3JheS01MDBcIj5DYXJnYW5kbyB1c3Vhcmlvcy4uLjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApIDogZmlsdGVyZWRVc2Vycy5sZW5ndGggPT09IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj17NX0gY2xhc3NOYW1lPVwicHgtNiBweS04IHRleHQtY2VudGVyIHRleHQtZ3JheS01MDBcIj5ObyBzZSBlbmNvbnRyYXJvbiB1c3VhcmlvczwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJlZFVzZXJzLm1hcCgodXNlcikgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e3VzZXIuaWR9IGNsYXNzTmFtZT1cImhvdmVyOmJnLWdyYXktNTAgdHJhbnNpdGlvbi1jb2xvcnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC02IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yIHJvdW5kZWQtZnVsbCBiZy1pbmRpZ28tNTAgdGV4dC1pbmRpZ28tNjAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VXNlckljb24gc2l6ZT17MjB9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPnt1c2VyLmZ1bGxOYW1lfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj57dXNlci5lbWFpbH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInB4LTYgcHktNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIucm9sZXMubWFwKChyb2xlLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4ga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwicHgtMiBweS0xIHRleHQteHMgZm9udC1tZWRpdW0gYmctZ3JheS0xMDAgdGV4dC1ncmF5LTYwMCByb3VuZGVkLWZ1bGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JvbGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJweC02IHB5LTQgd2hpdGVzcGFjZS1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41IHRleHQtc20gJHt1c2VyLmlzQWN0aXZlID8gJ3RleHQtZ3JlZW4tNjAwJyA6ICd0ZXh0LXJlZC02MDAnfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyLmlzQWN0aXZlID8gPENoZWNrQ2lyY2xlIHNpemU9ezE2fSAvPiA6IDxYQ2lyY2xlIHNpemU9ezE2fSAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlci5pc0FjdGl2ZSA/ICdBY3Rpdm8nIDogJ0luYWN0aXZvJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInB4LTYgcHktNCB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIubGFzdExvZ2luID8gbmV3IERhdGUodXNlci5sYXN0TG9naW4pLnRvTG9jYWxlRGF0ZVN0cmluZygpIDogJ051bmNhJ31cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicHgtNiBweS00IHdoaXRlc3BhY2Utbm93cmFwIHRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG5hdmlnYXRlKGAvdXN1YXJpb3MvZWRpdGFyLyR7dXNlci5pZH1gKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMiB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtaW5kaWdvLTYwMCBob3ZlcjpiZy1pbmRpZ28tNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVkaXRhclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVkaXQgc2l6ZT17MTh9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRGVsZXRlKHVzZXIuaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1yZWQtNjAwIGhvdmVyOmJnLXJlZC01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRWxpbWluYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MTh9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2l0ZVVzZXJzUGFnZTtcclxuIl0sImZpbGUiOiJEOi9Qcm95ZWN0cy9lbXBseXgvRW1wbHl4LlNpdGUvc3JjL3BhZ2VzL3VzZXJzL1NpdGVVc2Vyc1BhZ2UudHN4In0=