function WebServiceRobotics(n,t,i){this.onSuccessCall=n;this.onErrorCall=typeof t=="function"?t:WebServiceRobotics.connectionTimedOut;this.varType="GET";this.varUrl=window.VTPortal.roApp.getServerUrl(i).toLowerCase();this.varData=null;this.varContentType="application/json; charset=utf-8";this.varDataType="json";this.varProcessData=!0;this.finalizeSessionErrorCodes=[VTPortalUtils.constants.NO_SESSION.value,VTPortalUtils.constants.GENERAL_ERROR_InvalidSecurityToken.value,VTPortalUtils.constants.SERVER_NOT_RUNNING.value,VTPortalUtils.constants.LOGIN_INVALID_APP.value,VTPortalUtils.constants.LOGIN_INVALID_VERSION_APP.value,VTPortalUtils.constants.LOGIN_INVALID_APP_ADFS.value,VTPortalUtils.constants.GENERAL_ERROR_MaxCurrentSessionsExceeded.value]}function DatabaseUtils(n,t,i){this.dbName=n;this.dbDescription=t;this.isModeApp=i;this.tableCounter=0;this.fileSystem=null;this.dbObject=null;this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"};this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;this.settings=new Settings;this.loadFileSystem()}function Settings(){this.login="";this.password="";this.MT="";this.wsURL="";this.language="";this.saveLogin=!1;this.isSSL=!1;this.serverTimezone="Europe/Berlin";this.HeaderMD5="";this.BackgroundMD5="";this.timeGateBackground="";this.showForbiddenSections=!0;this.userPhoto="";this.wsBackground="";this.companyID="";this.lastStatus="";this.requestFilters="";this.teleWorkingFilters="";this.punchesFilters="";this.authorizationFilters="";this.supervisorFilters="";this.supervisorFiltersDR="";this.documentsFilters="";this.empPermissions="";this.UUID="";this.ApiVersion=0;this.licenseAccepted=!0;this.onlySupervisor=!1;this.supervisorPortalEnabled=!1;this.isUsingAdfs=!1;this.adfsCredential="";this.rememberLogin=!1;this.rememberLoginApp="";this.isTimeGate=!1;this.screenTimeout=10;this.BackgroundMD5="";this.timeGateBackground="";this.lastStatusRefresh=this.getNewStatusObject(-1);this.refreshConfiguration={causes:{refresh:1,interval:1440,off:""},zones:{refresh:1,interval:1440,off:""},status:{refresh:1,interval:1,off:""},punches:{refresh:1,interval:1,off:""},accruals:{refresh:1,interval:-1,off:""},notifications:{refresh:1,interval:30,off:""},dailyrecord:{refresh:1,interval:-1,off:""},communiques:{refresh:1,interval:60,off:""},channels:{refresh:1,interval:60,off:""},telecommute:{refresh:1,interval:-1,off:""},tcinfo:{refresh:1,interval:-1,off:""},surveys:{refresh:1,interval:60,off:""},alertstatus:{refresh:1,interval:60,off:""},weblinks:{refresh:1,interval:-1,off:""}};this.serverSSOConfig={}}function roApp(){(typeof device!="undefined"||window.document.URL.indexOf("localhost:8036")>=0)&&($.support.cors=!0);let n=ko.observable(0),t=ko.observable(!1),u=ko.observable(!1),i=ko.observable(!1);this.infoVersion="3.40.1";this.companyID="";this.loggedIn=!1;this.securityToken=null;this.guidToken=window.VTPortalUtils.utils.generateGuid();this.user="";this.userId=-1;this.employeeId=-1;this.AnywhereLicense=!1;this.syncTaskId=-1;this.FirebaseToken="";this.showPopover=ko.observable(!1);this.RequiereFineLocation=!0;this.DailyRecordEnabled=ko.observable(!1);this.ShowPermissionsIcon=ko.observable(!0);this.DailyRecordPatternEnabled=ko.observable(!1);this.ShowForbiddenSections=!0;this.selectedTab=ko.observable(1);this.automaticLogin=!0;this.refreshId=-1;this.adfsLoginInprogress=!1;this.adfsEnabled=ko.observable(!1);this.adfsMixedAuth=ko.observable(!1);this.punchInProgress=ko.observable(!1);this.ssoVersion=ko.observable(0);this.ssoEnabled=ko.observable(!1);this.ssoUnkownError=ko.observable(!1);this.apiURL="";this.serverURL={valid:!1,isMT:!1,url:"notValid",companyId:"",defURL:"",defSSL:""};this.HeaderMD5="";this.BackgroundMD5="";this.timeGateBackground="";this.HeaderChanged=ko.observable(!1);this.localFormat="YYYY-MM-DD[T]HH:mm:ss";this.ssoUserName=ko.observable("");this.currentLanguageId=ko.observable("");this.hasNotifications=ko.observable(!0);this.hasCommuniques=ko.observable(!0);this.hasMessages=ko.observable(!0);this.hasSurveys=ko.observable(!0);this.hasInquiries=ko.observable(!1);this.lastRequestFailed=ko.observable(!1);this.isMTApp=ko.observable(!1);this.supervisedRequests=ko.observable(0);this.productivDS=ko.observable(null);this.requestsDS=ko.observable(null);this.dailyRecordsDS=ko.observable(null);this.zonesDS=ko.observable(null);this.scheduleDS=ko.observable(null);this.holidaysDS=ko.observable(null);this.documentSent=ko.observable(!1);this.isSaas=ko.observable(!1);this.isCegidHub=ko.observable(!1);this.isCommuniquesEnabled=ko.observable(!1);this.isChannelsEnabled=ko.observable(!1);this.LastLogin=ko.observable(null);this.CustomHeader=ko.observable(null);this.punchesDS=ko.observable([]);this.menuItems=ko.observable([]);this.offlineCounter=ko.observable(0);this.failedLogins=ko.observable(0);this.wsRequestCounter=n;this.impersonateOnlyRequest=!1;this.impersonatedIDEmployee=-1;this.impersonatedNameEmployee="";this.isImpersonateEnabled=ko.observable(!0);this.isLatamMex=ko.observable(!1);this.supervisedEmployees=[];this.capacityEmployees=[];this.popupZoneVisible=ko.observable(!1);this.popupCauseVisible=ko.observable(!1);this.ZoneSelected=ko.observable(!1);this.SelectedCause=ko.observable(-1);this.SelectedZone=ko.observable(-1);this.ReliableZone=ko.observable(!0);this.zonesDataSource=ko.observable(new DevExpress.data.DataSource({store:[],searchOperation:"contains",searchExpr:"Name"}));this.causesDataSource=ko.observable(new DevExpress.data.DataSource({store:[],searchOperation:"contains",searchExpr:"Name"}));this.offlinePunch=ko.observable({punch:{idEmployee:"",credential:-1,method:1,action:"E",punchDateTime:moment().format("YYYY-MM-DD HH:mm:ss"),PunchData:{AttendanceData:{IdCause:0}},online:0,status:0,command:0,punchImage:""},command:0,status:null,display:null,employeeStatus:null,saveOnClose:!0});this.refreshId=-1;this.refreshClockId=-1;this.isOnline=ko.observable(!0);this.homeView=null;this.statusView=null;this.connectedToMT=ko.observable(!1);this.nfcPunchInProgress=t;this.nfcTimegateInProgress=u;this.signInProgressLoad=i;this.HasCustomHeader=ko.observable(!1);this.ReadMode=ko.observable(!1);this.ServerZones=ko.observable(null);this.customBackground=ko.observable(null);this.showLegalText=ko.observable("");this.dataCatalogs=new Robotics.Client.Data.roCatalog;this.gpsEmployeePermission=ko.observable(!0);this.userName=ko.observable("");this.mtServer=ko.observable("");this.configWS=ko.observable("");this.configSSL=ko.observable(!1);this.syncing=ko.observable(!1);this.nfcEnabled=ko.observable(!1);this.userPhoto=ko.observable("");this.currentTCInfo=ko.observable("");this.userStatus=ko.observable(null);this.userCommuniques=ko.observable(null);this.userSurveys=ko.observable(null);this.userTelecommute=ko.observable(null);this.userAlerts=ko.observable(null);this.stopShowingSurveysPopup=ko.observable(!1);this.requestFilters=ko.observable(null);this.teleWorkingFilters=ko.observable(null);this.punchesFilters=ko.observable(null);this.authorizationFilters=ko.observable(null);this.documentsFilters=ko.observable(null);this.showLogoutHome=ko.observable(!1);this.isAD=ko.observable("");this.supervisorFilters=ko.observable(null);this.supervisorFiltersDR=ko.observable(null);this.empPermissions=ko.observable(null);this.clientTimeZone=moment.tz.guess();this.serverTimeZone="Europe/Berlin";this.licenseAccepted=ko.observable(!0);this.licenseConsent=ko.observable(null);this.currentLocationInfo=ko.observable({coords:[0,0],location:"",fullAddress:"",reliable:!0,zone:null});this.taskPunchRequest=ko.observable({currentAction:-1,newAction:-1,currentTaskUserFieldsDefinition:null,currentTaskUserFieldsValue:["","","",-1,-1,-1],newTaskUserFieldsDefinition:null,newTaskUserFieldsValue:["","","",-1,-1,-1]});this.isTimeGate=ko.observable(!1);this.screenTimeout=ko.observable(10);this.logoutTimmer=-1;this.timeGateTimmerId=-1;this.timeGateTimmerResponse=-1;this.lastTimegateAction=moment();this.timeGateConfig=null;this.timegateLoggedIn=!1;this.timegateLanguage=ko.observable("ESP");this.timeGateMode=ko.observable(null);this.timeGateModeEIP=123;this.timeGateModeTA=95;this.timeGateModeCO=126;this.checkAutomaticLogout=function(){if(VTPortal.roApp.logoutTimmer>0&&clearTimeout(VTPortal.roApp.logoutTimmer),VTPortal.roApp.wsRequestCounter()>0)VTPortal.roApp.logoutTimmer=setTimeout(VTPortal.roApp.checkAutomaticLogout,1e3);else{let n=VTPortal.roApp.screenTimeout();typeof n=="undefined"&&(n=10);moment().diff(VTPortal.roApp.lastTimegateAction,"seconds")>n?VTPortal.roApp.isTimeGate()&&VTPortal.roApp.timegateLoggedIn&&(VTPortalUtils.utils.logoutTimegate(),VTPortal.app.navigate("TimeGate",{root:!0})):VTPortal.roApp.logoutTimmer=setTimeout(VTPortal.roApp.checkAutomaticLogout,1e3)}};this.getNumericVersion=function(n){let t=this.infoVersion.split(".");typeof n!="undefined"&&n!=""&&(t=n.split("."));let i=0;for(let n=0;n<t.length;n++){let r=(t.length-n-1)*3;i=i+parseInt(t[n].padEnd(t[n].length+r,"0"),10)}return i};this.redirectAtRequestList=function(n,t){let i=!1;if(typeof t!="undefined"&&(i=t),i)VTPortal.roApp.loadInitialData(!0,!1,!1,!1,!1),VTPortal.roApp.db.settings.onlySupervisor?VTPortal.app.navigate("myTeamRequests",{root:"true"}):VTPortal.app.navigate("myTeamRequests",{target:"back"});else switch(n){case 1:case 5:case 6:case 7:case 8:case 11:case 13:VTPortal.app.navigate("scheduler/4/"+moment().format("YYYY-MM-DD"),{target:"back"});break;case 9:case 14:VTPortal.app.navigate("scheduler/3/"+moment().format("YYYY-MM-DD"),{target:"back"});break;case 4:case 15:VTPortal.app.navigate("teleworking/3/"+moment().format("YYYY-MM-DD"),{target:"back"});break;case 2:case 3:case 10:case 12:VTPortal.app.navigate("punchManagement/2/"+moment().format("YYYY-MM-DD"),{target:"back"})}};this.redirectAtHome=function(n,t){VTPortal.roApp.impersonatedIDEmployee==-1?(VTPortal.roApp.db.settings.onlySupervisor?(VTPortal.app.createNavigation(VTPortal.config.supervisorNavigation),VTPortal.app.renderNavigation()):VTPortal.roApp.db.settings.supervisorPortalEnabled?(VTPortal.app.createNavigation(VTPortal.config.navigation),VTPortal.app.renderNavigation()):(VTPortal.app.createNavigation(VTPortal.config.navigationEmployee),VTPortal.app.renderNavigation()),this.selectedTab(1),VTPortal.roApp.db.settings.onlySupervisor?VTPortal.app.navigate("myTeamEmployees",{root:!0}):VTPortal.app.navigate("home",{root:!0})):(this.selectedTab(1),VTPortal.app.createNavigation(VTPortal.config.impersonatedEmployee),VTPortal.app.renderNavigation(),(typeof n=="undefined"||typeof n!="undefined"&&n)&&VTPortal.app.navigate("home",{root:!0}));typeof t!="undefined"&&t&&VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!1)};this.reloadCausesList=function(){let t=function(){VTPortal.roApp.redirectAtHome()},n=VTPortal.roApp.db.settings.getCacheDS("causes");n!=null&&(VTPortalUtils.causes=n.visibility,VTPortal.roApp.causesDataSource(new DevExpress.data.DataSource({store:n.readerinput,searchOperation:"contains",searchExpr:"Name"})));(n==null||window.VTPortalUtils.needToRefresh("causes"))&&new WebServiceRobotics(function(n){if(n.Status==window.VTPortalUtils.constants.OK.value){let i=[];for(const t of n.SelectFields)i.push({ID:parseInt(t.FieldValue,10),Name:t.FieldName});VTPortalUtils.causes=i;let r={visibility:i,readerinput:null};new WebServiceRobotics(function(n){if(n.Status==window.VTPortalUtils.constants.OK.value){let t=[];for(const i of n.SelectFields)parseInt(i.FieldValue,10)>0&&t.push({ID:parseInt(i.FieldValue,10),Name:i.FieldName});r.readerinput=t;VTPortal.roApp.db.settings.updateCacheDS("causes",r);VTPortal.roApp.causesDataSource(new DevExpress.data.DataSource({store:t,searchOperation:"contains",searchExpr:"Name"}))}else VTPortalUtils.utils.processErrorMessage(n,t)}).getGenericList("causes.readerinputcode")}else VTPortalUtils.utils.processErrorMessage(n,t)},function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingRequestInfo"),"error",0,t)}).getGenericList("causes.visibilitypermissions")};this.reloadZonesList=function(){if(VTPortal.roApp.ServerZones(VTPortal.roApp.db.settings.getCacheDS("zones")),VTPortal.roApp.ServerZones()==null||window.VTPortalUtils.needToRefresh("zones")){let n=function(){VTPortal.roApp.redirectAtHome()};new WebServiceRobotics(function(t){t.Status==window.VTPortalUtils.constants.OK.value?(VTPortal.roApp.db.settings.updateCacheDS("zones",t.ListZones),VTPortal.roApp.ServerZones(t.ListZones)):VTPortalUtils.utils.processErrorMessage(t,n)},function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingRequestInfo"),"error",0,n)}).getServerZones()}};this.getZoneOfCurrentLocation=function(){if(VTPortal.roApp.ServerZones()!=null){let n=VTPortal.roApp.ServerZones().filter(function(n){return n.Area!=null&&parseFloat(n.Area.toString().replace(",","."))>0});n=n.sort(function(n,t){return n.Area-t.Area});let t=VTPortal.roApp.currentLocationInfo();if(n.length>0)for(const i of n)if(i.MapInfo!=null&&i.MapInfo.Coordinates!=null&&i.MapInfo.Coordinates.length==2&&parseFloat(t.coords[0])>=parseFloat(i.MapInfo.Coordinates[1].Latitud)&&parseFloat(t.coords[0])<=parseFloat(i.MapInfo.Coordinates[0].Latitud)&&parseFloat(t.coords[1])>=parseFloat(i.MapInfo.Coordinates[1].Longitud)&&parseFloat(t.coords[1])<=parseFloat(i.MapInfo.Coordinates[0].Longitud))return i.Id;return null}return null};this.loadZones=function(){let n=function(n){if(n.Status==window.VTPortalUtils.constants.OK.value){let t=n.ListZones;VTPortal.roApp.zonesDS(t);VTPortal.roApp.zonesDataSource(new DevExpress.data.DataSource({store:VTPortal.roApp.zonesDS(),searchOperation:"contains",searchExpr:"Name"}));setTimeout(function(){$("#scrollview").height($("#panelsContent").height()-45)},100)}else itemCount(0),dataSource(new DevExpress.data.DataSource({store:[],searchOperation:"contains",searchExpr:"Name"}))};new WebServiceRobotics(function(t){n(t)}).getZones()};this.loadInitialData=function(n,t,i,r,u,f){let e=this;VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(0);VTPortal.roApp.loggedIn&&(VTPortalUtils.causes==null&&VTPortal.roApp.reloadCausesList(),VTPortal.roApp.ServerZones()==null&&VTPortal.roApp.reloadZonesList(),n&&e.reloadUserPhoto(),t&&e.reloadBackground(),i?e.reloadUserPermissions(r,f):VTPortal.roApp.refreshEmployeeStatus(r,f),e.redirectToDocumentIfRequiered());u&&e.restartRefreshTrigger()};this.reloadUserPhoto=function(){new WebServiceRobotics(function(n){n.Status==window.VTPortalUtils.constants.OK.value&&(VTPortal.roApp.db.settings.userPhoto=n.Base64StringContent,VTPortal.roApp.userPhoto(n.Base64StringContent),VTPortal.roApp.db.settings.saveParameter("userPhoto"))}).GetWsEmployeePhoto(-1)};this.reloadBackground=function(){VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.CustomHeader&&VTPortal.roApp.HeaderChanged()?new WebServiceRobotics(function(n){n.Status==window.VTPortalUtils.constants.OK.value?(VTPortal.roApp.db.settings.wsBackground=n.PortalConfiguration,VTPortal.roApp.CustomHeader(n.PortalConfiguration),VTPortal.roApp.db.settings.saveParameter("wsBackground"),n.PortalConfiguration!=null&&n.PortalConfiguration!=""?(VTPortal.roApp.customBackground(JSON.parse(n.PortalConfiguration)),VTPortal.roApp.HasCustomHeader(!0)):VTPortal.roApp.HasCustomHeader(!1)):VTPortal.roApp.HasCustomHeader(!1)}).GetWsBackgroundImage():VTPortal.roApp.db.settings.wsBackground!=null&&VTPortal.roApp.db.settings.wsBackground!=""?VTPortal.roApp.HasCustomHeader(!0):VTPortal.roApp.HasCustomHeader(!1)};this.reloadUserPermissions=function(n,t){new WebServiceRobotics(function(i){i.Status==window.VTPortalUtils.constants.OK.value&&(typeof i.Punch.ScheduleQuery=="undefined"&&(i.Punch.ScheduleQuery=i.Punch.Query),typeof i.Punch.ProductiVQuery=="undefined"&&(i.Punch.ProductiVQuery=i.Punch.Query),(typeof i.MustUseGPS=="undefined"||i.MustUseGPS==null)&&(i.MustUseGPS=!0),(typeof i.MustUsePhoto=="undefined"||i.MustUsePhoto==null)&&(i.MustUsePhoto=!0),VTPortal.roApp.db.settings.empPermissions=JSON.stringify(i).encodeBase64(),VTPortal.roApp.empPermissions(i),VTPortal.roApp.db.settings.saveParameter("empPermissions"),VTPortal.roApp.refreshEmployeeStatus(n,t))}).getMyPermissions()};this.restartRefreshTrigger=function(){(VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(0),VTPortal.roApp.loggedIn)&&(VTPortal.roApp.refreshId!=-1&&clearTimeout(VTPortal.roApp.refreshId),VTPortal.roApp.refreshId=setTimeout(function(){VTPortal.roApp.refreshId=-1;VTPortal.roApp.db.exportToJsonString(function(){});new WebServiceRobotics(function(n){if(n.Status==window.VTPortalUtils.constants.OK.value)VTPortal.roApp.loadInitialData(!1,!1,!1,!1,!0);else window.VTPortalUtils.utils.onLogoutSuccessFunc({Status:0})},function(n){window.VTPortalUtils.utils.onLoginErrorFunc(n)},VTPortal.roApp.serverURL.url).authenticateSession()},6e5),VTPortal.roApp.refreshClockId!=-1&&clearInterval(VTPortal.roApp.refreshClockId),VTPortal.roApp.refreshClockId=setInterval(function(){VTPortalUtils.utils.updateClientTime(10)},1e4))};this.redirectToDocumentIfRequiered=function(){let n=Cookies.get("VTPortalSign");Cookies.remove("VTPortalSign");n!=null&&VTPortal.app.navigate("documents",{root:!0})};this.refreshEmployeeStatus=function(n,t){let u=function(n){return function(t){t.Status==window.VTPortalUtils.constants.OK.value||t.Status<-8&&t.Status>-59?(VTPortal.roApp.db.settings.updateCacheDS("status",t),VTPortal.roApp.userStatus(t),VTPortal.roApp.userStatus()!=null&&typeof VTPortal.roApp.userStatus()!="undefined"&&(VTPortal.roApp.userStatus().ReadMode?VTPortal.roApp.ReadMode(!0):VTPortal.roApp.ReadMode(!1)),VTPortal.roApp.homeView!=null&&VTPortal.roApp.homeView.punchAllowedCalc(),typeof n=="function"&&n(),setTimeout(function(){VTPortalUtils.utils.buildHamburgerMenu()},1e3)):VTPortalUtils.utils.processErrorMessage(t)}},f=function(n){n.Status==window.VTPortalUtils.constants.OK.value&&(VTPortal.roApp.db.settings.updateCacheDS("alertstatus",n),VTPortal.roApp.userNotificationStatus(n),setTimeout(function(){VTPortal.roApp.userNotificationStatus()==null||!VTPortal.roApp.userNotificationStatus().HasMandatoryCommuniques||VTPortalUtils.utils.isOnView("communiques")||VTPortalUtils.utils.isOnView("communiqueDetail")||VTPortalUtils.utils.isOnView("status")||(VTPortal.roApp.db.settings.markForRefresh(["communiques"]),VTPortal.app.navigate("status",{root:!0}))},1e3))},e=function(n){n.Status==window.VTPortalUtils.constants.OK.value?(VTPortal.roApp.db.settings.updateCacheDS("telecommute",n.Telecommute),VTPortal.roApp.userTelecommute(n.Telecommute)):VTPortalUtils.utils.processErrorMessage(n)};n&&VTPortal.roApp.gpsEmployeePermission()&&VTPortal.roApp.empPermissions()!=null&&VTPortal.roApp.empPermissions().MustUseGPS!=null&&VTPortal.roApp.empPermissions().MustUseGPS&&VTPortalUtils.utils.reloadLocation(null);let i=!1,r=window.VTPortalUtils.needToRefresh("status");VTPortal.roApp.userStatus(VTPortal.roApp.db.settings.getCacheDS("status"));(VTPortal.roApp.userStatus()==null||r)&&(i=!0,new WebServiceRobotics(u(t),function(){}).getUserScheduleStatus());VTPortal.roApp.impersonatedIDEmployee==-1?(VTPortal.roApp.userNotificationStatus(VTPortal.roApp.db.settings.getCacheDS("alertstatus")),r&&new WebServiceRobotics(f,function(){}).getUserNotificationsStatus()):VTPortal.roApp.userNotificationStatus(null);VTPortal.roApp.userTelecommute(VTPortal.roApp.db.settings.getCacheDS("telecommute"));(VTPortal.roApp.userTelecommute()==null||window.VTPortalUtils.needToRefresh("telecommute"))&&new WebServiceRobotics(e,function(){}).getEmployeeTelecommutingInfo();i||typeof t!="function"||(t(),setTimeout(function(){VTPortalUtils.utils.buildHamburgerMenu()},1e3))};this.refreshEmployeeAlerts=function(n){let i=function(n){return function(t){if(t.Status==window.VTPortalUtils.constants.OK.value||t.Status<-8&&t.Status>-59){(typeof t.ScheduleStatus.TrackingDocuments=="undefined"||t.ScheduleStatus.TrackingDocuments==null)&&(t.ScheduleStatus.TrackingDocuments=[]);(typeof t.ScheduleStatus.ForecastDocuments=="undefined"||t.ScheduleStatus.ForecastDocuments==null)&&(t.ScheduleStatus.ForecastDocuments=[]);(typeof t.ScheduleStatus.SignDocuments=="undefined"||t.ScheduleStatus.SignDocuments==null)&&(t.ScheduleStatus.SignDocuments=[]);let i=VTPortal.roApp.userAlerts();i!=null?(i.ScheduleStatus=t.ScheduleStatus,i.SupervisorStatus=t.SupervisorStatus):i={ScheduleStatus:t.ScheduleStatus,SupervisorStatus:t.SupervisorStatus};VTPortal.roApp.db.settings.updateCacheDS("notifications",i);VTPortal.roApp.userAlerts(i);typeof n=="function"&&n()}else VTPortalUtils.utils.processErrorMessage(t)}},t=!1;VTPortal.roApp.userAlerts(VTPortal.roApp.db.settings.getCacheDS("notifications"));(VTPortal.roApp.userAlerts()==null||window.VTPortalUtils.needToRefresh("notifications"))&&(t=!0,new WebServiceRobotics(i(n),function(){}).getUserNotifications());t||typeof n!="function"||n()};this.checkIfRedirectToRequestIsEnabled=function(){let n=function(){VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.impersonateOnlyRequest=!1;VTPortal.roApp.redirectAtHome()};if(!VTPortal.roApp.adfsLoginInprogress){let t=Cookies.get("VTPortalRequest");if(Cookies.remove("VTPortalRequest"),t!=null){let i=t.split("_");VTPortal.roApp.impersonatedIDEmployee=i[1];VTPortal.roApp.impersonateOnlyRequest=!0;new WebServiceRobotics(function(t){t.Status==window.VTPortalUtils.constants.OK.value?VTPortal.roApp.loadInitialData(!0,!1,!1,!1,!1,function(){VTPortalUtils.utils.navigateToRequest({IdRequestType:t.RequestType,ID:t.Id})}):VTPortalUtils.utils.processErrorMessage(t,n)},function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingRequest"),"error",0,n)}).getRequest(i[0])}}};this.getLanguageByID=function(n){for(const t of this.availableLanguages)if(t.ID==n)return t;return this.availableLanguages[0]};this.initializeCulture=function(){i18nextko.init("es",ko);i18nextko.setLanguage("es");moment.locale("es");let n=window.location.href.substr(0,window.location.href.indexOf("index.html"));$.ajaxSetup({cache:!1});$.getJSON(n+"../js/cldr/locales/likelySubtags.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-ca.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-fr.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-it.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-en.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-es.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-gl.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-pt.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)});$.getJSON(n+"../js/cldr/locales/environment-eu.json?_="+(new Date).getMilliseconds(),function(n){Globalize.load(n)})};this.disableImpersonateActionsOnRequest=function(){document.querySelector("#tabMain")&&(document.querySelector("#tabMain").style.display="none")};this.isModeApp=function(){return typeof device!="undefined"};this.isRemoteEnvironment=function(){return typeof device!="undefined"?!0:window.document.URL.indexOf("localhost:8036")>=0};this.onIosDevice=function(){return typeof device!="undefined"?cordova.platformId==="ios":!1};this.onIos18Device=function(){return typeof device!="undefined"&&cordova.platformId==="ios"?parseFloat(device.version)>=18:!1};this.openURLonExternalBrowser=function(n){VTPortal.roApp.isModeApp()?cordova.InAppBrowser.open(n,"_system","location=yes"):window.open(n,"_system","location=yes")};this.getServerUrl=function(n){return VTPortal.roApp.isModeApp()?typeof n!="undefined"&&n!=""&&(this.apiURL=n):window.document.URL.indexOf("localhost:8036")>=0?typeof n!="undefined"&&n!=""&&(this.apiURL=n):this.apiURL="/api/Portalsvcx.svc",this.apiURL==""&&(this.apiURL=VTPortal.roApp.db.settings.wsURL),this.apiURL};this.getImpToken=function(){let n=("roImpersonateUser##"+this.impersonatedIDEmployee+"##").encodeBase64();return n.replace(/=/g,"*")};this.setLanguage=function(n){i18nextko.init(n,ko);i18nextko.setLanguage(n);moment.locale(n);let t=window.location.href.substr(0,window.location.href.indexOf("index.html"));$.getJSON(t+"../2/js/localization/dx.all."+n+".json",function(t){Globalize.loadMessages(t);Globalize.locale(n)})};this.db=new DatabaseUtils("spVtPortal","VTPortal settings",this.isModeApp());this.loadPanelVisible=ko.computed(function(){return t()?!1:i()?!0:n()<=0?(n()<0&&n(0),!1):!0});this.showNfcPanel=ko.computed(function(){return t()?!VTPortalUtils.utils.isShowingPopup():!1});this.availableLanguages=[{ID:"ESP",Name:"Español",tag:"es"},{ID:"CAT",Name:"Catalán",tag:"ca"},{ID:"EKR",Name:"Euskera",tag:"eu"},{ID:"GAL",Name:"Gallego",tag:"gl"},{ID:"ENG",Name:"Inglés",tag:"en"},{ID:"FRA",Name:"Francés",tag:"fr"},{ID:"ITA",Name:"Italiano",tag:"it"},{ID:"POR",Name:"Portugués",tag:"pt"},{ID:"SLK",Name:"Eslovaco",tag:"sk"}];this.empPermissions()!=null&&this.empPermissions().MustUseGPS&&(this.currentLocationInfo=ko.observable({coords:[41.5551618,2.0960154],location:"Sabadell",fullAddress:"Avenida Francesc Macià 60, Sabadell, Spain",reliable:!1,zone:null}));this.mainMenuItems=ko.observable([]);this.hamburgerMenu={dataSource:this.mainMenuItems,adaptivityEnabled:!0,itemTemplate:"title",selectOnFocus:!1,onItemClick:function(n){VTPortal.roApp.selectedTab(n.itemData.ID);switch(n.itemData.ActionIndex){case 1:VTPortal.app.navigate("home",{root:!0});break;case 2:VTPortal.app.navigate("scheduler/1/"+moment().format("YYYY-MM-DD"),{root:!0});break;case 3:VTPortal.app.navigate("punchManagement/1/"+moment().format("YYYY-MM-DD"),{root:!0});break;case 4:VTPortal.app.navigate("teleworking/1/"+moment().format("YYYY-MM-DD"),{root:!0});break;case 5:VTPortal.app.navigate("documents",{root:!0});break;case 6:VTPortal.app.navigate("leaves",{root:!0});break;case 7:VTPortal.app.navigate("profile",{root:!0});break;case 15:VTPortal.app.navigate("myTeamEmployees",{root:!0});break;case 16:VTPortal.app.navigate("myTeamAlerts",{root:!0});break;case 17:VTPortal.app.navigate("myTeamRequests",{root:!0});break;case 18:VTPortal.app.navigate("myteam",{root:!0});break;case 19:VTPortal.app.navigate("communiques",{root:!0});break;case 20:VTPortal.app.navigate("onboardings",{root:!0});break;case 21:VTPortal.app.navigate("surveyDetail",{root:!0});break;case 22:VTPortal.app.navigate("myDailyRecord",{root:!0});break;case 23:VTPortal.app.navigate("myChannels",{root:!0});break;case 24:VTPortal.app.navigate("status",{root:!0});break;case 25:VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.db.settings.onlySupervisor?VTPortal.roApp.redirectAtHome(!1):(VTPortal.roApp.selectedTab(2),VTPortal.app.navigate("myteam",{root:!0}));VTPortal.roApp.loadInitialData(!0,!0,!0,!1,!1,function(){VTPortalUtils.utils.buildHamburgerMenu()});break;case 26:new WebServiceRobotics(function(n){window.VTPortalUtils.utils.onLogoutSuccessFunc(n)},function(n){window.VTPortalUtils.utils.onLogoutErrorFunc(n)}).logout(VTPortal.roApp.db.settings.UUID);break;case 27:DevExpress.ui.notify("VisualTime Portal "+VTPortal.roApp.infoVersion,"info",3e3);break;case 28:VTPortal.app.navigate("configuration",{root:!0});break;case 29:VTPortal.app.navigate("myWebLinks",{root:!0});break;case 30:var t=n.itemData.URL;t&&window.open(t,"_blank")}}};this.userNotificationStatus=ko.observable(null);let r=ko.observable(this);this.userStatusBadge=ko.computed(function(){return VTPortalUtils.utils.badgeCount(!1,!1,!1,r())>0?"!":""});this.supervisorBadge=ko.computed(function(){return VTPortalUtils.utils.badgeCount(!0,!1,!1,r())>0?"!":""});this.showHamburgerMenu=ko.observable(!1)}var checkMimeTypes=function(n){var t=n.toLowerCase();return mimetypes[t]},mimetypes={"3dml":"text/vnd.in3d.3dml","3ds":"image/x-3ds","3g2":"video/3gpp2","3gp":"video/3gpp","7z":"application/x-7z-compressed",aab:"application/x-authorware-bin",aac:"audio/x-aac",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",abw:"application/x-abiword",ac:"application/pkix-attr-cert",acc:"application/vnd.americandynamics.acc",ace:"application/x-ace-compressed",acu:"application/vnd.acucobol",acutc:"application/vnd.acucorp",adp:"audio/adpcm",aep:"application/vnd.audiograph",afm:"application/x-font-type1",afp:"application/vnd.ibm.modcap",ahead:"application/vnd.ahead.space",ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",air:"application/vnd.adobe.air-application-installer-package+zip",ait:"application/vnd.dvb.ait",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",appcache:"text/cache-manifest",application:"application/x-ms-application",apr:"application/vnd.lotus-approach",arc:"application/x-freearc",asa:"text/plain",asax:"application/octet-stream",asc:"application/pgp-signature",ascx:"text/plain",asf:"video/x-ms-asf",ashx:"text/plain",asm:"text/x-asm",asmx:"text/plain",aso:"application/vnd.accpac.simply.aso",asp:"text/plain",aspx:"text/plain",asx:"video/x-ms-asf",atc:"application/vnd.acucorp",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomsvc:"application/atomsvc+xml",atx:"application/vnd.antix.game-component",au:"audio/basic",avi:"video/x-msvideo",aw:"application/applixware",axd:"text/plain",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",bat:"application/x-msdownload",bcpio:"application/x-bcpio",bdf:"application/x-font-bdf",bdm:"application/vnd.syncml.dm+wbxml",bed:"application/vnd.realvnc.bed",bh2:"application/vnd.fujitsu.oasysprs",bin:"application/octet-stream",blb:"application/x-blorb",blorb:"application/x-blorb",bmi:"application/vnd.bmi",bmp:"image/bmp",book:"application/vnd.framemaker",box:"application/vnd.previewsystems.box",boz:"application/x-bzip2",bpk:"application/octet-stream",btif:"image/prs.btif",bz:"application/x-bzip",bz2:"application/x-bzip2",c:"text/x-c",c11amc:"application/vnd.cluetrust.cartomobile-config",c11amz:"application/vnd.cluetrust.cartomobile-config-pkg",c4d:"application/vnd.clonk.c4group",c4f:"application/vnd.clonk.c4group",c4g:"application/vnd.clonk.c4group",c4p:"application/vnd.clonk.c4group",c4u:"application/vnd.clonk.c4group",cab:"application/vnd.ms-cab-compressed",caf:"audio/x-caf",cap:"application/vnd.tcpdump.pcap",car:"application/vnd.curl.car",cat:"application/vnd.ms-pki.seccat",cb7:"application/x-cbr",cba:"application/x-cbr",cbr:"application/x-cbr",cbt:"application/x-cbr",cbz:"application/x-cbr",cc:"text/x-c",cct:"application/x-director",ccxml:"application/ccxml+xml",cdbcmsg:"application/vnd.contact.cmsg",cdf:"application/x-netcdf",cdkey:"application/vnd.mediastation.cdkey",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cdx:"chemical/x-cdx",cdxml:"application/vnd.chemdraw+xml",cdy:"application/vnd.cinderella",cer:"application/pkix-cert",cfc:"application/x-coldfusion",cfm:"application/x-coldfusion",cfs:"application/x-cfs-compressed",cgm:"image/cgm",chat:"application/x-chat",chm:"application/vnd.ms-htmlhelp",chrt:"application/vnd.kde.kchart",cif:"chemical/x-cif",cii:"application/vnd.anser-web-certificate-issue-initiation",cil:"application/vnd.ms-artgalry",cla:"application/vnd.claymore","class":"application/java-vm",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",clkx:"application/vnd.crick.clicker",clp:"application/x-msclip",cmc:"application/vnd.cosmocaller",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",cmp:"application/vnd.yellowriver-custom-menu",cmx:"image/x-cmx",cod:"application/vnd.rim.cod",com:"application/x-msdownload",conf:"text/plain",cpio:"application/x-cpio",cpp:"text/x-c",cpt:"application/mac-compactpro",crd:"application/x-mscardfile",crl:"application/pkix-crl",crt:"application/x-x509-ca-cert",crx:"application/octet-stream",cryptonote:"application/vnd.rig.cryptonote",cs:"text/plain",csh:"application/x-csh",csml:"chemical/x-csml",csp:"application/vnd.commonspace",css:"text/css",cst:"application/x-director",csv:"text/csv",cu:"application/cu-seeme",curl:"text/vnd.curl",cww:"application/prs.cww",cxt:"application/x-director",cxx:"text/x-c",dae:"model/vnd.collada+xml",daf:"application/vnd.mobius.daf",dart:"application/vnd.dart",dataless:"application/vnd.fdsn.seed",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dcr:"application/x-director",dcurl:"text/vnd.curl.dcurl",dd2:"application/vnd.oma.dd2+xml",ddd:"application/vnd.fujixerox.ddd",deb:"application/x-debian-package",def:"text/plain",deploy:"application/octet-stream",der:"application/x-x509-ca-cert",dfac:"application/vnd.dreamfactory",dgc:"application/x-dgc-compressed",dic:"text/x-c",dir:"application/x-director",dis:"application/vnd.mobius.dis",dist:"application/octet-stream",distz:"application/octet-stream",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/x-msdownload",dmg:"application/x-apple-diskimage",dmp:"application/vnd.tcpdump.pcap",dms:"application/octet-stream",dna:"application/vnd.dna",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",dp:"application/vnd.osgi.dp",dpg:"application/vnd.dpgraph",dra:"audio/vnd.dra",dsc:"text/prs.lines.tag",dssc:"application/dssc+der",dtb:"application/x-dtbook+xml",dtd:"application/xml-dtd",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",dump:"application/octet-stream",dvb:"video/vnd.dvb.file",dvi:"application/x-dvi",dwf:"model/vnd.dwf",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",dxp:"application/vnd.spotfire.dxp",dxr:"application/x-director",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",ecma:"application/ecmascript",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",efif:"application/vnd.picsel",ei6:"application/vnd.pg.osasli",elc:"application/octet-stream",emf:"application/x-msmetafile",eml:"message/rfc822",emma:"application/emma+xml",emz:"application/x-msmetafile",eol:"audio/vnd.digital-winds",eot:"application/vnd.ms-fontobject",eps:"application/postscript",epub:"application/epub+zip",es3:"application/vnd.eszigno3+xml",esa:"application/vnd.osgi.subsystem",esf:"application/vnd.epson.esf",et3:"application/vnd.eszigno3+xml",etx:"text/x-setext",eva:"application/x-eva",evy:"application/x-envoy",exe:"application/x-msdownload",exi:"application/exi",ext:"application/vnd.novadigm.ext",ez:"application/andrew-inset",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",f:"text/x-fortran",f4v:"video/x-f4v",f77:"text/x-fortran",f90:"text/x-fortran",fbs:"image/vnd.fastbidsheet",fcdt:"application/vnd.adobe.formscentral.fcdt",fcs:"application/vnd.isac.fcs",fdf:"application/vnd.fdf",fe_launch:"application/vnd.denovo.fcselayout-link",fg5:"application/vnd.fujitsu.oasysgp",fgd:"application/x-director",fh:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",fhc:"image/x-freehand",fig:"application/x-xfig",flac:"audio/x-flac",fli:"video/x-fli",flo:"application/vnd.micrografx.flo",flv:"video/x-flv",flw:"application/vnd.kde.kivio",flx:"text/vnd.fmi.flexstor",fly:"text/vnd.fly",fm:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc","for":"text/x-fortran",fpx:"image/vnd.fpx",frame:"application/vnd.framemaker",fsc:"application/vnd.fsc.weblaunch",fst:"image/vnd.fst",ftc:"application/vnd.fluxtime.clip",fti:"application/vnd.anser-web-funds-transfer-initiation",fvt:"video/vnd.fvt",fxp:"application/vnd.adobe.fxp",fxpl:"application/vnd.adobe.fxp",fzs:"application/vnd.fuzzysheet",g2w:"application/vnd.geoplan",g3:"image/g3fax",g3w:"application/vnd.geospace",gac:"application/vnd.groove-account",gam:"application/x-tads",gbr:"application/rpki-ghostbusters",gca:"application/x-gca-compressed",gdl:"model/vnd.gdl",geo:"application/vnd.dynageo",gex:"application/vnd.geometry-explorer",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",ghf:"application/vnd.groove-help",gif:"image/gif",gim:"application/vnd.groove-identity-message",gml:"application/gml+xml",gmx:"application/vnd.gmx",gnumeric:"application/x-gnumeric",gph:"application/vnd.flographit",gpx:"application/gpx+xml",gqf:"application/vnd.grafeq",gqs:"application/vnd.grafeq",gram:"application/srgs",gramps:"application/x-gramps-xml",gre:"application/vnd.geometry-explorer",grv:"application/vnd.groove-injector",grxml:"application/srgs+xml",gsf:"application/x-font-ghostscript",gtar:"application/x-gtar",gtm:"application/vnd.groove-tool-message",gtw:"model/vnd.gtw",gv:"text/vnd.graphviz",gxf:"application/gxf",gxt:"application/vnd.geonext",gz:"application/x-gzip",h:"text/x-c",h261:"video/h261",h263:"video/h263",h264:"video/h264",hal:"application/vnd.hal+xml",hbci:"application/vnd.hbci",hdf:"application/x-hdf",hh:"text/x-c",hlp:"application/winhlp",hpgl:"application/vnd.hp-hpgl",hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",hqx:"application/mac-binhex40",hta:"application/octet-stream",htc:"text/html",htke:"application/vnd.kenameaapp",htm:"text/html",html:"text/html",hvd:"application/vnd.yamaha.hv-dic",hvp:"application/vnd.yamaha.hv-voice",hvs:"application/vnd.yamaha.hv-script",i2g:"application/vnd.intergeo",icc:"application/vnd.iccprofile",ice:"x-conference/x-cooltalk",icm:"application/vnd.iccprofile",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",ifm:"application/vnd.shana.informed.formdata",iges:"model/iges",igl:"application/vnd.igloader",igm:"application/vnd.insors.igm",igs:"model/iges",igx:"application/vnd.micrografx.igx",iif:"application/vnd.shana.informed.interchange",imp:"application/vnd.accpac.simply.imp",ims:"application/vnd.ms-ims","in":"text/plain",ini:"text/plain",ink:"application/inkml+xml",inkml:"application/inkml+xml",install:"application/x-install-instructions",iota:"application/vnd.astraea-software.iota",ipa:"application/octet-stream",ipfix:"application/ipfix",ipk:"application/vnd.shana.informed.package",irm:"application/vnd.ibm.rights-management",irp:"application/vnd.irepository.package+xml",iso:"application/x-iso9660-image",itp:"application/vnd.shana.informed.formtemplate",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",jad:"text/vnd.sun.j2me.app-descriptor",jam:"application/vnd.jam",jar:"application/java-archive",java:"text/x-java-source",jisp:"application/vnd.jisp",jlt:"application/vnd.hp-jlyt",jnlp:"application/x-java-jnlp-file",joda:"application/vnd.joost.joda-archive",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jpgm:"video/jpm",jpgv:"video/jpeg",jpm:"video/jpm",js:"text/javascript",json:"application/json",jsonml:"application/jsonml+json",kar:"audio/midi",karbon:"application/vnd.kde.karbon",kfo:"application/vnd.kde.kformula",kia:"application/vnd.kidspiration",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz",kne:"application/vnd.kinar",knp:"application/vnd.kinar",kon:"application/vnd.kde.kontour",kpr:"application/vnd.kde.kpresenter",kpt:"application/vnd.kde.kpresenter",kpxx:"application/vnd.ds-keypoint",ksp:"application/vnd.kde.kspread",ktr:"application/vnd.kahootz",ktx:"image/ktx",ktz:"application/vnd.kahootz",kwd:"application/vnd.kde.kword",kwt:"application/vnd.kde.kword",lasxml:"application/vnd.las.las+xml",latex:"application/x-latex",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",les:"application/vnd.hhe.lesson-player",lha:"application/x-lzh-compressed",link66:"application/vnd.route66.link66+xml",list:"text/plain",list3820:"application/vnd.ibm.modcap",listafp:"application/vnd.ibm.modcap",lnk:"application/x-ms-shortcut",log:"text/plain",lostxml:"application/lost+xml",lrf:"application/octet-stream",lrm:"application/vnd.ms-lrm",ltf:"application/vnd.frogans.ltf",lvp:"audio/vnd.lucent.voice",lwp:"application/vnd.lotus-wordpro",lz:"application/x-lzip",lzh:"application/x-lzh-compressed",lzma:"application/x-lzma",lzo:"application/x-lzop",m13:"application/x-msmediaview",m14:"application/x-msmediaview",m1v:"video/mpeg",m21:"application/mp21",m2a:"audio/mpeg",m2v:"video/mpeg",m3a:"audio/mpeg",m3u:"audio/x-mpegurl",m3u8:"application/vnd.apple.mpegurl",m4a:"audio/mp4",m4u:"video/vnd.mpegurl",m4v:"video/mp4",ma:"application/mathematica",mads:"application/mads+xml",mag:"application/vnd.ecowin.chart",maker:"application/vnd.framemaker",man:"text/troff",mar:"application/octet-stream",mathml:"application/mathml+xml",mb:"application/mathematica",mbk:"application/vnd.mobius.mbk",mbox:"application/mbox",mc1:"application/vnd.medcalcdata",mcd:"application/vnd.mcd",mcurl:"text/vnd.curl.mcurl",mdb:"application/x-msaccess",mdi:"image/vnd.ms-modi",me:"text/troff",mesh:"model/mesh",meta4:"application/metalink4+xml",metalink:"application/metalink+xml",mets:"application/mets+xml",mfm:"application/vnd.mfmp",mft:"application/rpki-manifest",mgp:"application/vnd.osgeo.mapguide.package",mgz:"application/vnd.proteus.magazine",mid:"audio/midi",midi:"audio/midi",mie:"application/x-mie",mif:"application/vnd.mif",mime:"message/rfc822",mj2:"video/mj2",mjp2:"video/mj2",mk3d:"video/x-matroska",mka:"audio/x-matroska",mks:"video/x-matroska",mkv:"video/x-matroska",mlp:"application/vnd.dolby.mlp",mmd:"application/vnd.chipnuts.karaoke-mmd",mmf:"application/vnd.smaf",mmr:"image/vnd.fujixerox.edmics-mmr",mng:"video/x-mng",mny:"application/x-msmoney",mobi:"application/x-mobipocket-ebook",mods:"application/mods+xml",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp21:"application/mp21",mp2a:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4a:"audio/mp4",mp4s:"application/mp4",mp4v:"video/mp4",mpc:"application/vnd.mophun.certificate",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mpkg:"application/vnd.apple.installer+xml",mpm:"application/vnd.blueice.multipass",mpn:"application/vnd.mophun.application",mpp:"application/vnd.ms-project",mpt:"application/vnd.ms-project",mpy:"application/vnd.ibm.minipay",mqy:"application/vnd.mobius.mqy",mrc:"application/marc",mrcx:"application/marcxml+xml",ms:"text/troff",mscml:"application/mediaservercontrol+xml",mseed:"application/vnd.fdsn.mseed",mseq:"application/vnd.mseq",msf:"application/vnd.epson.msf",msh:"model/mesh",msi:"application/x-msdownload",msl:"application/vnd.mobius.msl",msty:"application/vnd.muvee.style",mts:"model/vnd.mts",mus:"application/vnd.musician",musicxml:"application/vnd.recordare.musicxml+xml",mvb:"application/x-msmediaview",mwf:"application/vnd.mfer",mxf:"application/mxf",mxl:"application/vnd.recordare.musicxml",mxml:"application/xv+xml",mxs:"application/vnd.triscape.mxs",mxu:"video/vnd.mpegurl","n-gage":"application/vnd.nokia.n-gage.symbian.install",n3:"text/n3",nb:"application/mathematica",nbp:"application/vnd.wolfram.player",nc:"application/x-netcdf",ncx:"application/x-dtbncx+xml",nfo:"text/x-nfo",ngdat:"application/vnd.nokia.n-gage.data",nitf:"application/vnd.nitf",nlu:"application/vnd.neurolanguage.nlu",nml:"application/vnd.enliven",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",npx:"image/vnd.net-fpx",nsc:"application/x-conference",nsf:"application/vnd.lotus-notes",ntf:"application/vnd.nitf",nzb:"application/x-nzb",oa2:"application/vnd.fujitsu.oasys2",oa3:"application/vnd.fujitsu.oasys3",oas:"application/vnd.fujitsu.oasys",obd:"application/x-msbinder",obj:"application/x-tgif",oda:"application/oda",odb:"application/vnd.oasis.opendocument.database",odc:"application/vnd.oasis.opendocument.chart",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",odg:"application/vnd.oasis.opendocument.graphics",odi:"application/vnd.oasis.opendocument.image",odm:"application/vnd.oasis.opendocument.text-master",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",omdoc:"application/omdoc+xml",onepkg:"application/onenote",onetmp:"application/onenote",onetoc:"application/onenote",onetoc2:"application/onenote",opf:"application/oebps-package+xml",opml:"text/x-opml",oprc:"application/vnd.palm",org:"application/vnd.lotus-organizer",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",otc:"application/vnd.oasis.opendocument.chart-template",otf:"application/x-font-otf",otg:"application/vnd.oasis.opendocument.graphics-template",oth:"application/vnd.oasis.opendocument.text-web",oti:"application/vnd.oasis.opendocument.image-template",otp:"application/vnd.oasis.opendocument.presentation-template",ots:"application/vnd.oasis.opendocument.spreadsheet-template",ott:"application/vnd.oasis.opendocument.text-template",oxps:"application/oxps",oxt:"application/vnd.openofficeorg.extension",p:"text/x-pascal",p10:"application/pkcs10",p12:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7r:"application/x-pkcs7-certreqresp",p7s:"application/pkcs7-signature",p8:"application/pkcs8",pas:"text/x-pascal",paw:"application/vnd.pawaafile",pbd:"application/vnd.powerbuilder6",pbm:"image/x-portable-bitmap",pcap:"application/vnd.tcpdump.pcap",pcf:"application/x-font-pcf",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl",pct:"image/x-pict",pcurl:"application/vnd.curl.pcurl",pcx:"image/x-pcx",pdb:"application/vnd.palm",pdf:"application/pdf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfm:"application/x-font-type1",pfr:"application/font-tdpfr",pfx:"application/x-pkcs12",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pgp:"application/pgp-encrypted",phar:"application/octet-stream",php:"text/plain",phps:"application/x-httpd-phps",pic:"image/x-pict",pkg:"application/octet-stream",pki:"application/pkixcmp",pkipath:"application/pkix-pkipath",plb:"application/vnd.3gpp.pic-bw-large",plc:"application/vnd.mobius.plc",plf:"application/vnd.pocketlearn",plist:"application/x-plist",pls:"application/pls+xml",pml:"application/vnd.ctc-posml",png:"image/png",pnm:"image/x-portable-anymap",portpkg:"application/vnd.macports.portpkg",pot:"application/vnd.ms-powerpoint",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",ppd:"application/vnd.cups-ppd",ppm:"image/x-portable-pixmap",pps:"application/vnd.ms-powerpoint",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppt:"application/vnd.ms-powerpoint",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pqa:"application/vnd.palm",prc:"application/x-mobipocket-ebook",pre:"application/vnd.lotus-freelance",prf:"application/pics-rules",ps:"application/postscript",psb:"application/vnd.3gpp.pic-bw-small",psd:"image/vnd.adobe.photoshop",psf:"application/x-font-linux-psf",pskcxml:"application/pskc+xml",ptid:"application/vnd.pvi.ptid1",pub:"application/x-mspublisher",pvb:"application/vnd.3gpp.pic-bw-var",pwn:"application/vnd.3m.post-it-notes",pya:"audio/vnd.ms-playready.media.pya",pyv:"video/vnd.ms-playready.media.pyv",qam:"application/vnd.epson.quickanime",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",qps:"application/vnd.publishare-delta-tree",qt:"video/quicktime",qwd:"application/vnd.quark.quarkxpress",qwt:"application/vnd.quark.quarkxpress",qxb:"application/vnd.quark.quarkxpress",qxd:"application/vnd.quark.quarkxpress",qxl:"application/vnd.quark.quarkxpress",qxt:"application/vnd.quark.quarkxpress",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rar:"application/x-rar-compressed",ras:"image/x-cmu-raster",rb:"text/plain",rcprofile:"application/vnd.ipunplugged.rcprofile",rdf:"application/rdf+xml",rdz:"application/vnd.data-vision.rdz",rep:"application/vnd.businessobjects",res:"application/x-dtbresource+xml",resx:"text/xml",rgb:"image/x-rgb",rif:"application/reginfo+xml",rip:"audio/vnd.rip",ris:"application/x-research-info-systems",rl:"application/resource-lists+xml",rlc:"image/vnd.fujixerox.edmics-rlc",rld:"application/resource-lists-diff+xml",rm:"application/vnd.rn-realmedia",rmi:"audio/midi",rmp:"audio/x-pn-realaudio-plugin",rms:"application/vnd.jcp.javame.midlet-rms",rmvb:"application/vnd.rn-realmedia-vbr",rnc:"application/relax-ng-compact-syntax",roa:"application/rpki-roa",roff:"text/troff",rp9:"application/vnd.cloanto.rp9",rpm:"application/x-rpm",rpss:"application/vnd.nokia.radio-presets",rpst:"application/vnd.nokia.radio-preset",rq:"application/sparql-query",rs:"application/rls-services+xml",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",rtx:"text/richtext",s:"text/x-asm",s3m:"audio/s3m",s7z:"application/x-7z-compressed",saf:"application/vnd.yamaha.smaf-audio",safariextz:"application/octet-stream",sass:"text/x-sass",sbml:"application/sbml+xml",sc:"application/vnd.ibm.secure-container",scd:"application/x-msschedule",scm:"application/vnd.lotus-screencam",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",scss:"text/x-scss",scurl:"text/vnd.curl.scurl",sda:"application/vnd.stardivision.draw",sdc:"application/vnd.stardivision.calc",sdd:"application/vnd.stardivision.impress",sdkd:"application/vnd.solent.sdkm+xml",sdkm:"application/vnd.solent.sdkm+xml",sdp:"application/sdp",sdw:"application/vnd.stardivision.writer",see:"application/vnd.seemail",seed:"application/vnd.fdsn.seed",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ser:"application/java-serialized-object",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation","sfd-hdstx":"application/vnd.hydrostatix.sof-data",sfs:"application/vnd.spotfire.sfs",sfv:"text/x-sfv",sgi:"image/sgi",sgl:"application/vnd.stardivision.writer-global",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",shf:"application/shf+xml",sid:"image/x-mrsid-image",sig:"application/pgp-signature",sil:"audio/silk",silo:"model/mesh",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",sit:"application/x-stuffit",sitx:"application/x-stuffitx",skd:"application/vnd.koan",skm:"application/vnd.koan",skp:"application/vnd.koan",skt:"application/vnd.koan",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",slt:"application/vnd.epson.salt",sm:"application/vnd.stepmania.stepchart",smf:"application/vnd.stardivision.math",smi:"application/smil+xml",smil:"application/smil+xml",smv:"video/x-smv",smzip:"application/vnd.stepmania.package",snd:"audio/basic",snf:"application/x-font-snf",so:"application/octet-stream",spc:"application/x-pkcs7-certificates",spf:"application/vnd.yamaha.smaf-phrase",spl:"application/x-futuresplash",spot:"text/vnd.in3d.spot",spp:"application/scvp-vp-response",spq:"application/scvp-vp-request",spx:"audio/ogg",sql:"application/x-sql",src:"application/x-wais-source",srt:"application/x-subrip",sru:"application/sru+xml",srx:"application/sparql-results+xml",ssdl:"application/ssdl+xml",sse:"application/vnd.kodak-descriptor",ssf:"application/vnd.epson.ssf",ssml:"application/ssml+xml",st:"application/vnd.sailingtracker.track",stc:"application/vnd.sun.xml.calc.template",std:"application/vnd.sun.xml.draw.template",stf:"application/vnd.wt.stf",sti:"application/vnd.sun.xml.impress.template",stk:"application/hyperstudio",stl:"application/vnd.ms-pki.stl",str:"application/vnd.pg.format",stw:"application/vnd.sun.xml.writer.template",styl:"text/x-styl",sub:"image/vnd.dvb.subtitle",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svc:"application/vnd.dvb.service",svd:"application/vnd.svd",svg:"image/svg+xml",svgz:"image/svg+xml",swa:"application/x-director",swf:"application/x-shockwave-flash",swi:"application/vnd.aristanetworks.swi",sxc:"application/vnd.sun.xml.calc",sxd:"application/vnd.sun.xml.draw",sxg:"application/vnd.sun.xml.writer.global",sxi:"application/vnd.sun.xml.impress",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",t:"text/troff",t3:"application/x-t3vm-image",taglet:"application/vnd.mynfc",tao:"application/vnd.tao.intent-module-archive",tar:"application/x-tar",tcap:"application/vnd.3gpp2.tcap",tcl:"application/x-tcl",teacher:"application/vnd.smart.teacher",tei:"application/tei+xml",teicorpus:"application/tei+xml",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",text:"text/plain",tfi:"application/thraud+xml",tfm:"application/x-tex-tfm",tga:"image/x-tga",tgz:"application/x-gzip",thmx:"application/vnd.ms-officetheme",tif:"image/tiff",tiff:"image/tiff",tmo:"application/vnd.tmobile-livetv",torrent:"application/x-bittorrent",tpl:"application/vnd.groove-tool-template",tpt:"application/vnd.trid.tpt",tr:"text/troff",tra:"application/vnd.trueapp",trm:"application/x-msterminal",tsd:"application/timestamped-data",tsv:"text/tab-separated-values",ttc:"application/x-font-ttf",ttf:"application/x-font-ttf",ttl:"text/turtle",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",txd:"application/vnd.genomatix.tuxedo",txf:"application/vnd.mobius.txf",txt:"text/plain",u32:"application/x-authorware-bin",udeb:"application/x-debian-package",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",ulx:"application/x-glulx",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",ustar:"application/x-ustar",utz:"application/vnd.uiq.theme",uu:"text/x-uuencode",uva:"audio/vnd.dece.audio",uvd:"application/vnd.dece.data",uvf:"application/vnd.dece.data",uvg:"image/vnd.dece.graphic",uvh:"video/vnd.dece.hd",uvi:"image/vnd.dece.graphic",uvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvt:"application/vnd.dece.ttml+xml",uvu:"video/vnd.uvvu.mp4",uvv:"video/vnd.dece.video",uvva:"audio/vnd.dece.audio",uvvd:"application/vnd.dece.data",uvvf:"application/vnd.dece.data",uvvg:"image/vnd.dece.graphic",uvvh:"video/vnd.dece.hd",uvvi:"image/vnd.dece.graphic",uvvm:"video/vnd.dece.mobile",uvvp:"video/vnd.dece.pd",uvvs:"video/vnd.dece.sd",uvvt:"application/vnd.dece.ttml+xml",uvvu:"video/vnd.uvvu.mp4",uvvv:"video/vnd.dece.video",uvvx:"application/vnd.dece.unspecified",uvvz:"application/vnd.dece.zip",uvx:"application/vnd.dece.unspecified",uvz:"application/vnd.dece.zip",vcard:"text/vcard",vcd:"application/x-cdlink",vcf:"text/x-vcard",vcg:"application/vnd.groove-vcard",vcs:"text/x-vcalendar",vcx:"application/vnd.vcx",vis:"application/vnd.visionary",viv:"video/vnd.vivo",vob:"video/x-ms-vob",vor:"application/vnd.stardivision.writer",vox:"application/x-authorware-bin",vrml:"model/vrml",vsd:"application/vnd.visio",vsf:"application/vnd.vsf",vss:"application/vnd.visio",vst:"application/vnd.visio",vsw:"application/vnd.visio",vtu:"model/vnd.vtu",vxml:"application/voicexml+xml",w3d:"application/x-director",wad:"application/x-doom",wav:"audio/x-wav",wax:"audio/x-ms-wax",wbmp:"image/vnd.wap.wbmp",wbs:"application/vnd.criticaltools.wbs+xml",wbxml:"application/vnd.wap.wbxml",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wdp:"image/vnd.ms-photo",weba:"audio/webm",webm:"video/webm",webp:"image/webp",wg:"application/vnd.pmi.widget",wgt:"application/widget",wks:"application/vnd.ms-works",wm:"video/x-ms-wm",wma:"audio/x-ms-wma",wmd:"application/x-ms-wmd",wmf:"application/x-msmetafile",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wmz:"application/x-ms-wmz",woff:"application/x-font-woff",wpd:"application/vnd.wordperfect",wpl:"application/vnd.ms-wpl",wps:"application/vnd.ms-works",wqd:"application/vnd.wqd",wri:"application/x-mswrite",wrl:"model/vrml",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",wtb:"application/vnd.webturbo",wvx:"video/x-ms-wvx",x32:"application/x-authorware-bin",x3d:"model/x3d+xml",x3db:"model/x3d+binary",x3dbz:"model/x3d+binary",x3dv:"model/x3d+vrml",x3dvz:"model/x3d+vrml",x3dz:"model/x3d+xml",xaml:"application/xaml+xml",xap:"application/x-silverlight-app",xar:"application/vnd.xara",xbap:"application/x-ms-xbap",xbd:"application/vnd.fujixerox.docuworks.binder",xbm:"image/x-xbitmap",xdf:"application/xcap-diff+xml",xdm:"application/vnd.syncml.dm+xml",xdp:"application/vnd.adobe.xdp+xml",xdssc:"application/dssc+xml",xdw:"application/vnd.fujixerox.docuworks",xenc:"application/xenc+xml",xer:"application/patch-ops-error+xml",xfdf:"application/vnd.adobe.xfdf",xfdl:"application/vnd.xfdl",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xhvml:"application/xv+xml",xif:"image/vnd.xiff",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",xm:"audio/xm",xml:"application/xml",xo:"application/vnd.olpc-sugar",xop:"application/xop+xml",xpi:"application/x-xpinstall",xpl:"application/xproc+xml",xpm:"image/x-xpixmap",xpr:"application/vnd.is-xpr",xps:"application/vnd.ms-xpsdocument",xpw:"application/vnd.intercon.formnet",xpx:"application/vnd.intercon.formnet",xsl:"application/xml",xslt:"application/xslt+xml",xsm:"application/vnd.syncml+xml",xspf:"application/xspf+xml",xul:"application/vnd.mozilla.xul+xml",xvm:"application/xv+xml",xvml:"application/xv+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",xz:"application/x-xz",yaml:"text/yaml",yang:"application/yang",yin:"application/yin+xml",yml:"text/yaml",z:"application/x-compress",z1:"application/x-zmachine",z2:"application/x-zmachine",z3:"application/x-zmachine",z4:"application/x-zmachine",z5:"application/x-zmachine",z6:"application/x-zmachine",z7:"application/x-zmachine",z8:"application/x-zmachine",zaz:"application/vnd.zzazz.deck+xml",zip:"application/zip",zir:"application/vnd.zul",zirz:"application/vnd.zul",zmm:"application/vnd.handheld-entertainment+xml","123":"application/vnd.lotus-1-2-3"};WebServiceRobotics.prototype.blobCreationFromURL=function(n){var i,r,t;for(i=n.split(",")[0].indexOf("base64")>=0?atob(n.split(",")[1]):unescape(n.split(",")[1]),r=[],t=0;t<i.length;t++)r.push(i.charCodeAt(t));return new Blob([r],{type:'type: "image/jpeg"'})};WebServiceRobotics.prototype.callUrlTimeGate=function(n,t,i){var r,u,f;VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()+1);VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());r=3e4;typeof i!="undefined"&&(r=i);u=function(n,t){return function(i){VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());try{VTPortal.roApp.lastRequestFailed()&&(VTPortal.roApp.lastRequestFailed(!1),VTPortal.roApp.offlineCounter(0));t(i.d);VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()-1)}catch(r){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}};f=function(n,t){return function(i,r,u){VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());try{typeof t!="undefined"&&t(n,i,r,u);VTPortal.roApp.wsRequestCounter(0)}catch(f){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}};$.ajax({type:"POST",url:n,timeout:r,data:t,cache:!1,contentType:!1,processData:!1,success:u(n,this.onSuccessCall,this.finalizeSessionErrorCodes),error:f(n,this.onErrorCall),headers:{roAuth:VTPortal.roApp.guidToken,roToken:VTPortal.roApp.securityToken,roAlias:VTPortal.roApp.getImpToken(),roSrc:VTPortal.roApp.isRemoteEnvironment(),roCompanyID:VTPortal.roApp.companyID.split("-")[0].toLowerCase(),roApp:VTPortal.roApp.isTimeGate()?"TimeGate":"VTPortal"},xhrFields:{withCredentials:!0}})};WebServiceRobotics.prototype.callUrlPost=function(n,t,i){this.callUploadFileDesktop(n,t,i)};WebServiceRobotics.prototype.callUploadFileDesktop=function(n,t,i){VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()+1);VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());let r=3e4;typeof i!="undefined"&&(r=i);let u=function(n,t,i){return function(r){VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());try{VTPortal.roApp.lastRequestFailed()&&(VTPortal.roApp.lastRequestFailed(!1),VTPortal.roApp.offlineCounter(0),VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roSessionRecovered"),"success",2e3));i.includes(r.d.Status)?r.d.Status==VTPortalUtils.constants.GENERAL_ERROR_MaxCurrentSessionsExceeded.value?WebServiceRobotics.maxConcurrentUsersReached(r.d):WebServiceRobotics.connectionLoggedOut(r.d):t(r.d);VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()-1)}catch(u){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}},f=function(n,t){return function(i,r,u){VTPortal.roApp.timegateLoggedIn&&(VTPortal.roApp.lastTimegateAction=moment());try{typeof t!="undefined"?t(n,i,r,u):WebServiceRobotics.connectionTimedOut(n,i,r,u);VTPortal.roApp.wsRequestCounter(0)}catch(f){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}};$.ajax({type:"POST",url:n,timeout:r,data:t,cache:!1,contentType:!1,processData:!1,success:u(n,this.onSuccessCall,this.finalizeSessionErrorCodes),error:f(n,this.onErrorCall),headers:{roAuth:VTPortal.roApp.guidToken,roToken:VTPortal.roApp.securityToken,roAlias:VTPortal.roApp.getImpToken(),roSrc:VTPortal.roApp.isRemoteEnvironment(),roCompanyID:VTPortal.roApp.companyID.split("-")[0].toLowerCase(),roApp:VTPortal.roApp.isTimeGate()?"TimeGate":"VTPortal"},xhrFields:{withCredentials:!0}})};WebServiceRobotics.prototype.callUrl=function(n,t,i){var r,u,f;try{typeof navigator.splashscreen!="undefined"&&navigator.splashscreen.hide()}catch(e){}n.indexOf("/GetUserNotificationsStatus")==-1&&VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()+1);t.timestamp=(new Date).getMilliseconds();r=6e4;typeof i!="undefined"&&(r=i);u=function(n,t,i){return function(r){try{VTPortal.roApp.lastRequestFailed()&&(VTPortal.roApp.lastRequestFailed(!1),VTPortal.roApp.offlineCounter(0),VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roSessionRecovered"),"success",2e3));i.includes(r.d.Status)?r.d.Status==VTPortalUtils.constants.GENERAL_ERROR_MaxCurrentSessionsExceeded.value?WebServiceRobotics.maxConcurrentUsersReached(r.d):WebServiceRobotics.connectionLoggedOut(r.d):(n.indexOf("GetGenericList")!=-1&&r.d.Status==window.VTPortalUtils.constants.OK.value&&(r.d.SelectFields=r.d.SelectFields.sortBy(function(n){return n.FieldName})),t(r.d));n.indexOf("/GetUserNotificationsStatus")==-1&&VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()-1)}catch(u){n.indexOf("GetEmployeeAlerts")==-1&&VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}};f=function(n,t){return function(i,r,u){try{n.indexOf("GetEmployeeAlerts")==-1&&(typeof t!="undefined"?t(n,i,r,u):WebServiceRobotics.connectionTimedOut(n,i,r,u));VTPortal.roApp.wsRequestCounter(0)}catch(f){n.indexOf("GetEmployeeAlerts")==-1&&VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roUnkownErrorOnRequest")+n.split("/").pop(),"error",0);VTPortal.roApp.wsRequestCounter(0)}}};$.ajax({type:this.varType,url:n,timeout:r,data:decodeURIComponent($.param(t)),contentType:this.varContentType,dataType:this.varDataType,processdata:this.varProcessData,success:u(n,this.onSuccessCall,this.finalizeSessionErrorCodes),error:f(n,this.onErrorCall),headers:{roAuth:VTPortal.roApp.guidToken,roToken:VTPortal.roApp.securityToken,roAlias:VTPortal.roApp.getImpToken(),roSrc:VTPortal.roApp.isRemoteEnvironment(),roCompanyID:VTPortal.roApp.companyID!=""?VTPortal.roApp.companyID.split("-")[0].toLowerCase():VTPortal.roApp.db.settings.companyID.split("-")[0].toLowerCase(),roApp:VTPortal.roApp.isTimeGate()?"TimeGate":"VTPortal"},xhrFields:{withCredentials:!0}})};WebServiceRobotics.prototype.callFileTranferUrl=function(n,t,i){var r=this;cordova.platformId==="ios"?window.resolveLocalFileSystemURL(i,function(i){i.file(function(i){var u=new FileReader;u.onloadend=function(i){var u=i.target.result,f=new Blob([new Uint8Array(u)],{type:"image/png"});t.append("userfile",f,"file.png");r.callUploadFileDesktop(n,t)};u.readAsArrayBuffer(i)},function(n){console.log(n)})},function(n){console.log(n)}):window.resolveLocalFileSystemURI(i,function(i){i.file(function(i){var u=new FileReader;u.onloadend=function(i){var u=i.target.result,f=new Blob([new Uint8Array(u)],{type:"image/png"});t.append("userfile",f,"file.png");r.callUploadFileDesktop(n,t)};u.readAsArrayBuffer(i)},function(n){console.log(n)})},function(n){console.log(n)});return};WebServiceRobotics.maxConcurrentUsersReached=function(n){VTPortal.roApp.wsRequestCounter(0);var t=function(){try{VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.impersonateOnlyRequest=!1;VTPortal.roApp.redirectAtHome(!1,!0)}catch(n){}};VTPortalUtils.utils.processErrorMessage(n,t)};WebServiceRobotics.connectionLoggedOut=function(n){VTPortal.roApp.wsRequestCounter(0);var t=function(){try{VTPortal.roApp.loggedIn=!1;VTPortal.roApp.securityToken="";VTPortal.roApp.adfsEnabled()&&VTPortal.roApp.userName("");!VTPortal.roApp.isTimeGate()&&VTPortal.roApp.adfsEnabled()&&(VTPortal.roApp.companyID="",VTPortal.roApp.db.settings.companyID="");VTPortal.roApp.db.settings.adfsCredential="";VTPortal.roApp.db.settings.password="";VTPortal.roApp.db.settings.rememberLogin=!1;VTPortal.roApp.db.settings.rememberLoginApp="";VTPortal.roApp.db.settings.save();VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.supervisedEmployees=[];VTPortal.roApp.LastLogin(null);VTPortal.roApp.automaticLogin=!0;VTPortal.roApp.adfsLoginInprogress=!1;localStorage.setItem("adfsLoginInprogress","false");VTPortal.roApp.refreshId!=-1&&(clearTimeout(VTPortal.roApp.refreshId),VTPortal.roApp.refreshId=-1)}catch(n){}VTPortal.roApp.isTimeGate()?VTPortal.app.navigate("TimeGate",{root:!0}):VTPortal.app.navigate("login",{root:!0})};(n.Status!=VTPortalUtils.constants.GENERAL_ERROR_InvalidSecurityToken||VTPortal.roApp.db.settings.isUsingAdfs)&&n.Status==VTPortalUtils.constants.GENERAL_ERROR_InvalidSecurityToken||VTPortalUtils.utils.processErrorMessage(n,t)};WebServiceRobotics.connectionTimedOut=function(n){VTPortal.roApp.wsRequestCounter(0);var t=n.split("/").pop();VTPortal.roApp.offlineCounter(VTPortal.roApp.offlineCounter()+1);VTPortal.roApp.lastRequestFailed(!0)};WebServiceRobotics.prototype.login=function(n,t,i,r,u,f){let o=this.varUrl+"/Authenticate",e=new FormData;e.append("user",n);e.append("password",VTPortalUtils.utils.encryptString(t));e.append("language",i);e.append("accessFromApp",VTPortal.roApp.isModeApp());e.append("appVersion",r);e.append("validationCode",u);e.append("timeZone",VTPortal.roApp.clientTimeZone);e.append("buttonLogin",f);this.callUrlPost(o,e)};WebServiceRobotics.prototype.validateSession=function(n){let i=this.varUrl+"/ValidateSession",t=new FormData;t.append("code",n);this.callUrlPost(i,t)};WebServiceRobotics.prototype.authenticateSession=function(){let t=this.varUrl+"/AuthenticateSession",n=new FormData;n.append("isModeApp",VTPortal.roApp.isModeApp());this.callUrlPost(t,n)};WebServiceRobotics.prototype.recoverPassword=function(n,t){let r=this.varUrl+"/RecoverMyPassword",i=new FormData;i.append("userName",n);i.append("email",t);this.callUrlPost(r,i)};WebServiceRobotics.prototype.updateServerLanguage=function(n){let i=this.varUrl+"/UpdateServerLanguage",t=new FormData;t.append("language",n);this.callUrlPost(i,t)};WebServiceRobotics.prototype.resetPasswordToNew=function(n,t,i){let u=this.varUrl+"/ResetPassword",r=new FormData;r.append("userName",n);r.append("requestKey",t);r.append("newPassword",i);this.callUrlPost(u,r)};WebServiceRobotics.prototype.logout=function(n){let t=this.varUrl+"/Logout";this.varData={uuid:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.changePassword=function(n,t){let r=this.varUrl+"/ChangeMyPassword",i=new FormData;i.append("oldPassword",n);i.append("newPassword",t);this.callUrlPost(r,i)};WebServiceRobotics.prototype.checkTelecommutingChange=function(n,t,i){let r=this.varUrl+"/CheckTelecommutingChange";this.varData={selectedDay:n,type:t,impersonating:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.getMyTeamPlanEmployees=function(n,t,i,r,u){let f=this.varUrl+"/GetMyTeamPlanEmployees";this.varData={startDay:n,endDay:t,idEmployee:i,oldShift:r,newShift:u};this.callUrl(f,this.varData)};WebServiceRobotics.prototype.changeTelecommuting=function(n,t,i){let r=this.varUrl+"/ChangeTelecommuting";this.varData={selectedDay:n,type:t,impersonating:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.changeTelecommutingByRequest=function(n,t,i){let r=this.varUrl+"/ChangeTelecommutingByRequest";this.varData={selectedDay:n,type:t,impersonating:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.acceptConsent=function(n){let i=this.varUrl+"/AcceptConsent",t=new FormData;t.append("consentText",n);this.callUrlPost(i,t)};WebServiceRobotics.prototype.acceptMyLicense=function(n){let t=this.varUrl+"/AcceptMyLicense";this.varData={bAcceptLicense:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getEmployeeStatus=function(){let n=this.varUrl+"/GetEmployeeStatus";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getUserScheduleStatus=function(){let n=this.varUrl+"/GetUserScheduleStatus";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getUserNotifications=function(){let n=this.varUrl+"/GetUserNotifications";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getUserNotificationsStatus=function(){let n=this.varUrl+"/GetUserNotificationsStatus";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getServerZones=function(){let n=this.varUrl+"/GetServerZones";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getEmployeeCommuniques=function(){let n=this.varUrl+"/GetEmployeeCommuniques";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getEmployeeSurveys=function(){let n=this.varUrl+"/GetEmployeeSurveys";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getEmployeeTelecommutingInfo=function(){let n=this.varUrl+"/GetEmployeeTelecommutingInfo";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getEmployeeAlerts=function(){let n=this.varUrl+"/GetEmployeeAlerts";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.GetWsEmployeePhoto=function(n){let t=this.varUrl+"/GetWsEmployeePhoto";return this.varData={employeeId:n},this.callUrl(t,this.varData),t};WebServiceRobotics.prototype.getView=function(n){let t=this.varUrl+"/GetView";this.varData={viewName:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.GetWsBackgroundImage=function(){let n=this.varUrl+"/GetWsBackgroundImage";return this.varData={},this.callUrl(n,this.varData),n};WebServiceRobotics.prototype.getGenericList=function(n){let t=this.varUrl+"/GetGenericList";this.varData={requestType:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getTasksByName=function(n){let t=this.varUrl+"/GetTasksByName";this.varData={taskName:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.setStatus=function(n,t,i,r,u,f,e,o,s,h,c=true,l=-1){let a=this.varUrl+"/SetStatus";this.varData={causeId:n,direction:t,latitude:i,longitude:r,identifier:u,locationZone:f,fullAddress:e,reliable:o,nfcTag:s,tcType:h,reliableZone:c,selectedZone:l};this.callUrl(a,this.varData)};WebServiceRobotics.prototype.setStatusWithPhoto=function(n,t,i,r,u,f,e,o,s,h,c,l=true,a=-1){let y=this.varUrl+"/SetStatusWithPhoto",v=new FormData;v.append("causeId",n);v.append("direction",t);v.append("latitude",i);v.append("longitude",r);v.append("identifier",u);v.append("locationZone",f);v.append("fullAddress",e);v.append("reliable",o);v.append("nfcTag",typeof h=="undefined"?"":h);v.append("tcType",typeof c=="undefined"?"":c);v.append("reliableZone",l);v.append("selectedZone",a);this.callFileTranferUrl(y,v,s)};WebServiceRobotics.prototype.setCostCenterStatus=function(n,t,i,r,u,f,e,o){let s=this.varUrl+"/SetCostCenterStatus";this.varData={costCenterId:n,latitude:t,longitude:i,identifier:r,locationZone:u,fullAddress:f,reliable:e,tcType:o};this.callUrl(s,this.varData)};WebServiceRobotics.prototype.setCostCenterPunchWithPhoto=function(n,t,i,r,u,f,e,o,s){let c=this.varUrl+"/SetCostCenterPunchWithPhoto",h=new FormData;h.append("costCenterId",n);h.append("latitude",t);h.append("longitude",i);h.append("identifier",r);h.append("locationZone",u);h.append("fullAddress",f);h.append("reliable",e);h.append("tcType",typeof s=="undefined"?"":s);this.callFileTranferUrl(c,h,o)};WebServiceRobotics.prototype.SetTaskPunch=function(n,t,i,r,u,f,e,o,s,h,c,l){let a=this.varUrl+"/SetTaskPunch";this.varData={taskId:n,newTaskId:t,latitude:r,longitude:u,identifier:f,locationZone:e,fullAddress:o,oldValue0:s[0],oldValue1:s[1],oldValue2:s[2],oldValue3:s[3],oldValue4:s[4],oldValue5:s[5],newValue0:h[0],newValue1:h[1],newValue2:h[2],newValue3:h[3],newValue4:h[4],newValue5:h[5],completeTask:i,reliable:c,tcType:l};this.callUrl(a,this.varData)};WebServiceRobotics.prototype.setTaskPunchWithPhoto=function(n,t,i,r,u,f,e,o,s,h,c,l,a){let y=this.varUrl+"/SetTaskPunchWithPhoto",v=new FormData;v.append("taskId",n);v.append("newTaskId",t);v.append("completeTask",i);v.append("latitude",r);v.append("longitude",u);v.append("identifier",f);v.append("locationZone",e);v.append("fullAddress",o);v.append("reliable",c);v.append("tcType",typeof a=="undefined"?"":a);v.append("oldValue0",s[0]);v.append("oldValue1",s[1]);v.append("oldValue2",s[2]);v.append("oldValue3",s[3]);v.append("oldValue4",s[4]);v.append("oldValue5",s[5]);v.append("newValue0",h[0]);v.append("newValue1",h[1]);v.append("newValue2",h[2]);v.append("newValue3",h[3]);v.append("newValue4",h[4]);v.append("newValue5",h[5]);this.callFileTranferUrl(y,v,l)};WebServiceRobotics.prototype.getMyCalendar=function(n){let t=this.varUrl+"/GetMyCalendar";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyDailyRecordCalendar=function(n){let t=this.varUrl+"/GetMyDailyRecordCalendar";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getLoadSeatingCapacity=function(n){let t=this.varUrl+"/GetLoadSeatingCapacity";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getEmployeeDayInfo=function(n,t){let i=this.varUrl+"/GetEmployeeDayInfo";this.varData={strDayDate:moment(n).format("DD/MM/YYYY"),idEmployee:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getAccrualsSummary=function(n){let t=this.varUrl+"/GetAccrualsSummary";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyAccruals=function(n){let t=this.varUrl+"/GetMyAccruals";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyDailyAccruals=function(n){let t=this.varUrl+"/GetMyDailyAccruals";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyPunches=function(n){let t=this.varUrl+"/GetMyPunches";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getCommuniqueById=function(n){let t=this.varUrl+"/GetCommuniqueById";this.varData={idCommunique:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.sendSurveyResponse=function(n,t,i){let u=this.varUrl+"/SendSurveyResponse",r=new FormData;r.append("idSurvey",n);r.append("idEmployee",t);r.append("Response",JSON.stringify(i));this.callUrlPost(u,r)};WebServiceRobotics.prototype.getSurveyById=function(n){let t=this.varUrl+"/GetSurveyById";this.varData={idSurvey:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.answerCommunique=function(n,t){let i=this.varUrl+"/AnswerCommunique";this.varData={idCommunique:n,answer:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.registerFirebaseToken=function(n,t){let i=this.varUrl+"/RegisterFirebaseToken";this.varData={token:n,uuid:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getHolidaysInfo=function(){let n=this.varUrl+"/GetHolidaysInfo";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getUserFields=function(){let n=this.varUrl+"/GetUserFields";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getTelecommutingInfo=function(n,t){let i=this.varUrl+"/GetTelecommutingInfo";this.varData={selectedDate:moment(n).format("DD/MM/YYYY"),idEmployee:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getTeleworkingDetail=function(n,t){let i=this.varUrl+"/GetTeleworkingDetail";this.varData={iDate:moment(n).format("YYYYMMDD"),eDate:moment(t).format("YYYYMMDD")};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getMyDailyTeleWorking=function(n){let t=this.varUrl+"/GetMyDailyTeleWorking";this.varData={selectedDate:moment(n).format("YYYYMMDD")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyRequests=function(n,t,i,r,u,f,e){let o=this.varUrl+"/GetMyRequests";this.varData={showAll:n,dateStart:t!=null?moment(t).format("YYYY-MM-DD HH:mm"):"",dateEnd:i!=null?moment(i).format("YYYY-MM-DD HH:mm"):"",filter:r,orderBy:u,dateRequestedStart:f!=null?moment(f).format("YYYY-MM-DD HH:mm"):"",dateRequestedEnd:e!=null?moment(e).format("YYYY-MM-DD HH:mm"):""};this.callUrl(o,this.varData)};WebServiceRobotics.prototype.getSupervisedRequests=function(n,t,i,r,u,f,e){let o=this.varUrl+"/GetSupervisedRequests";this.varData={showAll:n,dateStart:t!=null?moment(t).format("YYYY-MM-DD HH:mm"):"",dateEnd:i!=null?moment(i).format("YYYY-MM-DD HH:mm"):"",filter:r,orderBy:u,dateRequestedStart:f!=null?moment(f).format("YYYY-MM-DD HH:mm"):"",dateRequestedEnd:e!=null?moment(e).format("YYYY-MM-DD HH:mm"):""};this.callUrl(o,this.varData)};WebServiceRobotics.prototype.getOverlappingEmployees=function(n){let t=this.varUrl+"/GetOverlappingEmployees";this.varData={idRequest:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getZones=function(){let n=this.varUrl+"/GetZones";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getMyLeaves=function(n,t,i){let r=this.varUrl+"/GetMyLeaves";this.varData={showAll:n,dateStart:t!=null?moment(t).format("YYYY-MM-DD HH:mm"):"",dateEnd:i!=null?moment(i).format("YYYY-MM-DD HH:mm"):""};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.getMyPermissions=function(){let n=this.varUrl+"/GetMyPermissions";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.setRequestReaded=function(n){let t=this.varUrl+"/SetRequestReaded";this.varData={requestId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.setNotificationReaded=function(n){let t=this.varUrl+"/SetNotificationReaded";this.varData={notificationtId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getRequest=function(n){let t=this.varUrl+"/GetRequest";this.varData={requestId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getDailyRecord=function(n){let t=this.varUrl+"/GetDailyRecord";this.varData={idDailyRecord:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getDailyRecordRequestForSupervisor=function(n){let t=this.varUrl+"/GetDailyRecordRequestForSupervisor";this.varData={requestId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getDailyRecordPattern=function(n){let t=this.varUrl+"/GetEmployeeDailyRecordPunchesPattern";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getPunchesOnDate=function(n,t){let i=this.varUrl+"/GetPunchesOnDate";this.varData={idEmployee:n,selectedDate:moment(t).format("DD/MM/YYYY")};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getRequestForSupervisor=function(n){let t=this.varUrl+"/GetRequestForSupervisor";this.varData={requestId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.saveUserFieldRequest=function(n,t,i,r,u,f){let o=this.varUrl+"/SaveRequestUserField",e=new FormData;e.append("fieldName",n);e.append("fieldValue",t);e.append("comments",i);e.append("hasHistory",r);e.append("historyDate",u.format("YYYY-MM-DD HH:mm"));e.append("acceptWarning",f);this.callUrlPost(o,e)};WebServiceRobotics.prototype.saveForbbidenPunch=function(n,t,i,r,u,f){let o=this.varUrl+"/SaveRequestForbiddenPunch",e=new FormData;e.append("punchDate",n.format("YYYY-MM-DD HH:mm"));e.append("idCause",t==""?"-1":t);e.append("comments",i);e.append("direction",r);e.append("acceptWarning",u);e.append("tcType",typeof f=="undefined"?"":f);this.callUrlPost(o,e)};WebServiceRobotics.prototype.SaveRequestDailyRecord=function(n){let i=this.varUrl+"/SaveRequestDailyRecord",t=new FormData;t.append("dailyRecord",n);this.callUrlPost(i,t)};WebServiceRobotics.prototype.savePunchCause=function(n,t,i,r){let f=this.varUrl+"/SaveRequestJustifyPunch",u=new FormData;u.append("punchDate",t.format("YYYY-MM-DD HH:mm:ss"));u.append("idCause",n);u.append("comments",i);u.append("acceptWarning",r);this.callUrlPost(f,u)};WebServiceRobotics.prototype.sendPunch=function(n){var t=this;return new Promise(function(i,r){let f=t.varUrl+"/SavePunch";t.promiseResolve=i;t.promiseReject=r;let u=new FormData;u.append("oPunch",JSON.stringify(n));t.callUrlPost(f,u)})};WebServiceRobotics.prototype.saveExternalWork=function(n,t,i,r,u){let e=this.varUrl+"/SaveRequestExternalWork",f=new FormData;f.append("externalWorkDate",n.format("YYYY-MM-DD HH:mm:ss"));f.append("idCause",r);f.append("duration",t);f.append("comments",i);f.append("acceptWarning",u);this.callUrlPost(e,f)};WebServiceRobotics.prototype.saveChangeShift=function(n,t,i,r,u,f,e){let s=this.varUrl+"/SaveRequestChangeShift",o=new FormData;o.append("fromDate",n.format("YYYY-MM-DD HH:mm"));o.append("toDate",t.format("YYYY-MM-DD HH:mm"));o.append("idRequestedShift",i);o.append("idReplaceShift",r);o.append("strStartShiftHour",u);o.append("comments",f);o.append("acceptWarning",e);this.callUrlPost(s,o)};WebServiceRobotics.prototype.saveShiftExchange=function(n,t,i,r,u,f,e){let s=this.varUrl+"/SaveRequestShiftExchange",o=new FormData;o.append("sDate",moment(n).format("YYYY-MM-DD HH:mm"));o.append("sCompensateDate",t);o.append("idEmployee",i);o.append("idShift",r);o.append("idSourceShift",u);o.append("comments",f);o.append("acceptWarning",e);this.callUrlPost(s,o)};WebServiceRobotics.prototype.savePermissions=function(n,t,i,r){let f=this.varUrl+"/SaveRequestHolidays",u=new FormData;u.append("strDates",n);u.append("idHolidays",t);u.append("comments",i);u.append("acceptWarning",r);this.callUrlPost(f,u)};WebServiceRobotics.prototype.saveAbsences=function(n,t,i,r,u,f){let e=window.navigator.userAgent,o=e.indexOf("MSIE ");if(o>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){let e=this.varUrl+"/SaveRequestPlannedAbsences",f=new FormData;f.append("fromDate",n.format("YYYY-MM-DD HH:mm"));f.append("toDate",t.format("YYYY-MM-DD HH:mm"));f.append("idCause",i);f.append("comments",r);f.append("acceptWarning",u);this.callUrlPost(e,f)}else if(f.get("userfile")!=""){let e=this.varUrl+"/SaveRequestPlannedAbsences";f.append("fromDate",n.format("YYYY-MM-DD HH:mm"));f.append("toDate",t.format("YYYY-MM-DD HH:mm"));f.append("idCause",i);f.append("comments",r);f.append("acceptWarning",u);VTPortal.roApp.isModeApp()?this.callFileTranferUrl(e,f,f.get("userfile")):this.callUploadFileDesktop(e,f)}else{let e=this.varUrl+"/SaveRequestPlannedAbsences",f=new FormData;f.append("fromDate",n.format("YYYY-MM-DD HH:mm"));f.append("toDate",t.format("YYYY-MM-DD HH:mm"));f.append("idCause",i);f.append("comments",r);f.append("acceptWarning",u);this.callUrlPost(e,f)}};WebServiceRobotics.prototype.saveIncidence=function(n,t,i,r,u,f,e,o,s){let h=window.navigator.userAgent,c=h.indexOf("MSIE ");if(c>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){let h=this.varUrl+"/SaveRequestPlannedCauses",s=new FormData;s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);this.callUrlPost(h,s)}else if(s.get("userfile")!=""){let h=this.varUrl+"/SaveRequestPlannedCauses";s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);VTPortal.roApp.isModeApp()?this.callFileTranferUrl(h,s,s.get("userfile")):this.callUploadFileDesktop(h,s)}else{let h=this.varUrl+"/SaveRequestPlannedCauses",s=new FormData;s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);this.callUrlPost(h,s)}};WebServiceRobotics.prototype.saveOvertime=function(n,t,i,r,u,f,e,o,s){let h=window.navigator.userAgent,c=h.indexOf("MSIE ");if(c>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)){let h=this.varUrl+"/SaveRequestPlannedOvertime",s=new FormData;s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);this.callUrlPost(h,s)}else if(s.get("userfile")!=""){let h=this.varUrl+"/SaveRequestPlannedOvertime";s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);VTPortal.roApp.isModeApp()?this.callFileTranferUrl(h,s,s.get("userfile")):this.callUploadFileDesktop(h,s)}else{let h=this.varUrl+"/SaveRequestPlannedOvertime",s=new FormData;s.append("fromDate",n.format("YYYY-MM-DD HH:mm"));s.append("toDate",t.format("YYYY-MM-DD HH:mm"));s.append("fromHour",i.format("YYYY-MM-DD HH:mm"));s.append("toHour",r.format("YYYY-MM-DD HH:mm"));s.append("duration",u);s.append("idCause",f);s.append("comments",e);s.append("acceptWarning",o);this.callUrlPost(h,s)}};WebServiceRobotics.prototype.savePlannedHoliday=function(n,t,i,r,u,f,e){let s=this.varUrl+"/SaveRequestPlannedHoliday",o=new FormData;o.append("datesStr",n);o.append("allDay",t);o.append("fromHour",i.format("YYYY-MM-DD HH:mm"));o.append("toHour",r.format("YYYY-MM-DD HH:mm"));o.append("idCause",u);o.append("comments",f);o.append("acceptWarning",e);this.callUrlPost(s,o)};WebServiceRobotics.prototype.SaveRequest_ForbiddenTaskPunch=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){let p=this.varUrl+"/SaveRequestForbiddenTaskPunch",y=new FormData;y.append("punchDate",n);y.append("continueOnPunchDate",i);y.append("idTask",t);y.append("idContinueOnTask",r);y.append("completeTask",u);y.append("comments",f);y.append("value1",e);y.append("value2",o);y.append("value3",s);y.append("value4",h);y.append("value5",c);y.append("value6",l);y.append("acceptWarning",a);y.append("tcType",typeof v=="undefined"?"":v);this.callUrlPost(p,y)};WebServiceRobotics.prototype.saveCancelHolidays=function(n,t,i,r,u){let e=this.varUrl+"/SaveRequestCancelHolidays",f=new FormData;f.append("strDates",n);f.append("idShift",i);f.append("idCause",t);f.append("comments",r);f.append("acceptWarning",u);this.callUrlPost(e,f)};WebServiceRobotics.prototype.saveCostCenterPunch=function(n,t,i,r,u){let e=this.varUrl+"/SaveRequestForbiddenCostCenterPunch",f=new FormData;f.append("punchDate",n.format("YYYY-MM-DD HH:mm"));f.append("idCostCenter",t==""?-1:t);f.append("comments",i);f.append("acceptWarning",r);f.append("tcType",typeof u=="undefined"?"":u);this.callUrlPost(e,f)};WebServiceRobotics.prototype.saveExternalWorkWeekResume=function(n,t,i){let u=this.varUrl+"/SaveRequestExternalWorkWeekResume",r=new FormData;r.append("resumeInfo",JSON.stringify(t));r.append("comments",n);r.append("acceptWarning",i);this.callUrlPost(u,r)};WebServiceRobotics.prototype.saveProfileImageDesktop=function(n){let t=this.varUrl+"/SaveProfileImage";this.callUploadFileDesktop(t,n)};WebServiceRobotics.prototype.saveProfileImageMobile=function(n){let t=this.varUrl+"/SaveProfileImage",i=new FormData;this.callFileTranferUrl(t,i,n.get("userfile"))};WebServiceRobotics.prototype.saveLeaveDesktop=function(n,t,i,r,u){let f=this.varUrl+"/SaveLeave";u.append("from",n.format("YYYY-MM-DD"));u.append("to",t.format("YYYY-MM-DD"));u.append("idCause",i);u.append("remarks",r);this.callUploadFileDesktop(f,u)};WebServiceRobotics.prototype.saveLeaveMobile=function(n,t,i,r,u){let f=this.varUrl+"/SaveLeave",e=window.navigator.userAgent,o=e.indexOf("MSIE ");if(o>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))u.append("from",n.format("YYYY-MM-DD")),u.append("to",t.format("YYYY-MM-DD")),u.append("idCause",i),u.append("remarks",r),this.callUploadFileDesktop(f,u);else if(u.get("userfile")!=""){let e=new FormData;e.append("from",n.format("YYYY-MM-DD"));e.append("to",t.format("YYYY-MM-DD"));e.append("idCause",i);e.append("remarks",r);e.append("idTemplateDocument",u.get("idTemplateDocument"));this.callFileTranferUrl(f,e,u.get("userfile"))}else u.append("from",n.format("YYYY-MM-DD")),u.append("to",t.format("YYYY-MM-DD")),u.append("idCause",i),u.append("remarks",r),this.callUploadFileDesktop(f,u)};WebServiceRobotics.prototype.setLeaveEndDate=function(n,t,i){let r=this.varUrl+"/SetLeaveEndDate";this.varData=t!=null?{leaveId:n,documentTemplate:i,endDate:t}:{leaveId:n,documentTemplate:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.checkIsWorkingdayShift=function(n){let t=this.varUrl+"/CheckIsWorkingdayShift";this.varData={shiftId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.checkIsFloatingShift=function(n){let t=this.varUrl+"/CheckIsFloatingShift";this.varData={shiftId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getUserFieldAvailableValues=function(n){let t=this.varUrl+"/GetUserFieldAvailableValues";this.varData={fieldName:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.deleteRequest=function(n){let t=this.varUrl+"/DeleteRequest";this.varData={requestId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.deleteAbsence=function(n){let t=this.varUrl+"/DeleteAbsence";this.varData={absenceId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.deleteProgrammedAbsence=function(n,t){let i=this.varUrl+"/DeleteProgrammedAbsence";this.varData={forecastId:n,forecastType:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.uploadDocumentDesktop=function(n){let t=this.varUrl+"/UploadDocument";this.callUploadFileDesktop(t,n)};WebServiceRobotics.prototype.uploadDocumentMobile=function(n,t,i,r){let f=this.varUrl+"/UploadDocument",u=new FormData;u.append("forecastType",t);u.append("remarks",i);u.append("docRelatedInfo",r);u.append("idRelatedObject",n.get("idRelatedObject"));u.append("idTemplateDocument",n.get("idTemplateDocument"));this.callFileTranferUrl(f,u,n.get("userfile"))};WebServiceRobotics.prototype.getMyDocuments=function(n,t,i,r){let u=this.varUrl+"/GetMyDocuments";this.varData={dateStart:n!=null?moment(n).format("YYYY-MM-DD HH:mm"):"",dateEnd:t!=null?moment(t).format("YYYY-MM-DD HH:mm"):"",filter:i,orderBy:r};this.callUrl(u,this.varData)};WebServiceRobotics.prototype.getDocumentBytes=function(n){let t=this.varUrl+"/GetDocumentBytes";this.varData={documentId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.uploadDocumenttoSign=function(n){let t=this.varUrl+"/UploadDocumenttoSign";this.varData={documentId:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getAvailablePermitsCalendar=function(n,t){let i=this.varUrl+"/GetAvailablePermitsCalendar";this.varData={selectedDate:moment(n).format("DD/MM/YYYY"),ProgrammedHoliday_IDCause:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getTaskUserFieldsAction=function(n,t){let i=this.varUrl+"/GetTaskUserFieldsAction";this.varData={action:n,taskId:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.saveNewTaskAlert=function(n,t){let i=this.varUrl+"/SaveNewTaskAlert";this.varData={taskId:n,taskTextAlert:encodeURIComponent(t)};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getLoggedInUserInfo=function(){let n=this.varUrl+"/GetLoggedInUserInfo";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getRequieredLeaveDocuments=function(n,t){let i=this.varUrl+"/GetRequieredLeaveDocuments";this.varData={idCause:n,isStarting:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getAvailableDocumentTemplateType=function(n){let t=this.varUrl+"/GetAvailableDocumentTemplateType";this.varData={idEmployee:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getRequieredCauseDocuments=function(n){let t=this.varUrl+"/GetRequieredCauseDocuments";this.varData={idCause:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getUserFile=function(n,t){return this.varUrl+"/GetUserFile?token="+n+"&userFieldName="+encodeURIComponent(t)};WebServiceRobotics.prototype.getCurrentTaskInfo=function(n,t){let i=this.varUrl+"/GetCurrentTaskInfo";this.varData={token:n,taskId:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getTaskInfo=function(n,t){let i=this.varUrl+"/GetTaskInfo";this.varData={token:n,taskId:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.getMyEmployees=function(){let n=this.varUrl+"/GetMyEmployees";this.varData={};this.callUrl(n,this.varData,6e4)};WebServiceRobotics.prototype.getCapacityDetail=function(n){let t=this.varUrl+"/GetCapacityDetail";this.varData={selectedDate:moment(n).format("DD/MM/YYYY")};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getMyOnBoardings=function(){let n=this.varUrl+"/GetMyOnBoardings";this.varData={};this.callUrl(n,this.varData,6e4)};WebServiceRobotics.prototype.getOnBoardingtasksById=function(n){let t=this.varUrl+"/GetOnBoardingTasksById";this.varData={idOnboarding:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.updateTaskStatus=function(n,t,i){let r=this.varUrl+"/UpdateTaskStatus";this.varData={status:n,idTask:t,idList:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.getMyEmployeesWithStatus=function(){let n=this.varUrl+"/GetMyEmployeesWithStatus";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getSupervisorAlertsDetail=function(n){let t=this.varUrl+"/GetSupervisorAlertsDetail";this.varData={idAlertType:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.approveRefuseRequest=function(n,t,i){let r=this.varUrl+"/ApproveRefuseRequest";this.varData={idRequest:n,bApprove:t,bForceApprove:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.approveRefuseRequestNew=function(n,t,i){let r=this.varUrl+"/ApproveRefuseRequestNew";this.varData={idRequest:n,bApprove:t,bForceApprove:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.approveRefuseMultipleDR=function(n,t){let i=this.varUrl+"/ApproveRefuseMultipleDR";this.varData={idRequests:n,action:t};this.callUrl(i,this.varData)};WebServiceRobotics.prototype.approveRefuseRequestByEmployee=function(n,t,i){let r=this.varUrl+"/ApproveRefuseRequestByEmployee";this.varData={idRequest:n,bApprove:t,bForceApprove:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.getAvailableEmployeesForDate=function(n,t,i,r){let u=this.varUrl+"/GetAvailableEmployeesForDate";this.varData={sDate:moment(n).format("DD/MM/YYYY"),eDate:moment(t).format("DD/MM/YYYY"),iSourceShift:r,iDestinationShift:i};this.callUrl(u,this.varData,6e4)};WebServiceRobotics.prototype.getDaysToCompensate=function(n,t,i){let r=this.varUrl+"/GetDaysToCompensate";this.varData={sDate:moment(n).format("DD/MM/YYYY"),eDate:moment(t).format("DD/MM/YYYY"),iExchangeEmployee:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.getRankingForDay=function(n,t,i){let r=this.varUrl+"/GetRankingForDay";this.varData={sDate:moment(n).format("DD/MM/YYYY"),idRequestType:t,idReason:i};this.callUrl(r,this.varData)};WebServiceRobotics.prototype.isAdfsActive=function(){let n=this.varUrl+"/isAdfsActive";this.varData={};this.callUrl(n,this.varData,5e3)};WebServiceRobotics.prototype.getSsoConfiguration=function(){let n=this.varUrl+"/GetSsoConfiguration";this.varData={};this.callUrl(n,this.varData,5e3)};WebServiceRobotics.prototype.updateServerLanguage=function(n){let t=this.varUrl+"/updateServerLanguage";this.varData={lang:n};this.callUrl(t,this.varData,2e3)};WebServiceRobotics.prototype.updateServerTimeZone=function(n){let t=this.varUrl+"/updateServerTimeZone";this.varData={timeZone:n};this.callUrl(t,this.varData,2e3)};WebServiceRobotics.prototype.getMyChannels=function(){let n=this.varUrl+"/GetMyChannels";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getComplaintChannelUrl=function(){let n=this.varUrl+"/GetDEXUrl";this.varData={};this.callUrl(n,this.varData)};WebServiceRobotics.prototype.getMyConversationsByIDChannel=function(n){let t=this.varUrl+"/GetMyConversationsByChannel";this.varData={idChannel:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.addNewConversation=function(n,t,i,r){let f=this.varUrl+"/AddNewConversation",u=new FormData;u.append("idChannel",n);u.append("title",t);u.append("message",i);u.append("isAnonymous",r);this.callUrlPost(f,u)};WebServiceRobotics.prototype.getMyMessagesByIDConversation=function(n){let t=this.varUrl+"/GetMyMessagesByConversation";this.varData={idConversation:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.addNewMessage=function(n,t){let r=this.varUrl+"/AddNewMessage",i=new FormData;i.append("idConversation",n);i.append("message",t);this.callUrlPost(r,i)};WebServiceRobotics.prototype.getConceptsSummaryByShift=function(n){let t=this.varUrl+"/GetConceptsSummaryByShift";this.varData={idShift:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.getConceptsDetailByShift=function(n){let t=this.varUrl+"/GetConceptsDetailByShift";this.varData={idShift:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.enableTimegate=function(n,t,i){let u=this.varUrl+"/EnableTimegate",r=new FormData;r.append("serialNumber",n);r.append("name",t);r.append("apkVersion",i);this.callUrlPost(u,r)};WebServiceRobotics.prototype.disableTimegate=function(n){let i=this.varUrl+"/DisableTimegate",t=new FormData;t.append("serialNumber",n);this.callUrlPost(i,t)};WebServiceRobotics.prototype.getTimegateConfiguration=function(n){let t=this.varUrl+"/GetTimegateConfiguration";this.varData={serialNumber:n};this.callUrl(t,this.varData)};WebServiceRobotics.prototype.initializeTimeGate=function(){let t=this.varUrl.replace("portalsvcx","timegate")+"/Initialize",n=new FormData;n.append("apkVersion",VTPortal.roApp.infoVersion);this.callUrlTimeGate(t,n)};WebServiceRobotics.prototype.identify=function(n,t,i){let u=this.varUrl.replace("portalsvcx","timegate")+"/Identify",r=new FormData;r.append("id",n);r.append("pin",t);r.append("nfc",i);r.append("accessFromApp",VTPortal.roApp.isModeApp()?"1":"0");r.append("appVersion",VTPortal.roApp.infoVersion);r.append("timeZone",VTPortal.roApp.clientTimeZone);this.callUrlTimeGate(u,r)};WebServiceRobotics.prototype.getTimeGateBackground=function(){let t=this.varUrl.replace("portalsvcx","timegate")+"/GetBackground",n=new FormData;n.append("apkVersion",VTPortal.roApp.infoVersion);this.callUrlTimeGate(t,n)};WebServiceRobotics.prototype.GetAllPortalWebLinks=function(){let n=this.varUrl+"/GetAllPortalWebLinks";this.varData={};this.callUrl(n,this.varData)};DatabaseUtils.prototype.loadFileSystem=function(){if(this.isModeApp){var n=this,t=function(t){return function(i){n.onSuccessFileSystem(i,t)}};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,t(n),function(){n.onSuccessFileSystem(null,null)})}else this.onSuccessFileSystem(null,null)};DatabaseUtils.prototype.onSuccessFileSystem=function(n,t){t!=null&&(typeof t.fileSystem=="undefined"||t.fileSystem==null)&&n!=null&&(t.fileSystem=n)};DatabaseUtils.prototype.loadSettings=function(){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject==null){var actualVersion=23;VTPortal.roApp.db.dbObject=VTPortal.roApp.db.indexedDB.open(VTPortal.roApp.db.dbName,actualVersion);VTPortal.roApp.db.dbObject.onupgradeneeded=function(e){for(var func,storeCreateIndex=function(n,t,i){n.indexNames.contains(t)||n.createIndex(t,t,i)},i=e.oldVersion;i<actualVersion;i++)func=eval("DatabaseUtils.script"+(i+1)),func(e,storeCreateIndex)};VTPortal.roApp.db.dbObject.onsuccess=function(){this.isModeApp&&VTPortal.roApp.db.fileSystem!=null?VTPortal.roApp.db.loadJsStringFromDisk(function(){VTPortal.roApp.db.settings.loadSettings(VTPortal.roApp.db.dbObject)}):VTPortal.roApp.db.settings.loadSettings(VTPortal.roApp.db.dbObject)};VTPortal.roApp.db.dbObject.onerror=function(){}}else VTPortalUtils.utils.notifyMesage("Error al cargar la configuración","error",2e3)};DatabaseUtils.script1=function(n,t){var f=n.target.result,r=f.createObjectStore("Settings",{keyPath:"key"}),i,u;t(r,"key",{unique:!0});i=[{id:1,key:"wsURL",data:""},{id:2,key:"ssl",data:"false"},{id:3,key:"saveLogin",data:"false"},{id:4,key:"login",data:""},{id:5,key:"password",data:""},{id:6,key:"over4g",data:"120"},{id:7,key:"overWifi",data:"60"},{id:8,key:"emptyPhotoWifi",data:"false"},{id:9,key:"UUID",data:VTPortal.roApp.guidToken},{id:10,key:"VinculationCode",data:""}];for(u in i)r.add(i[u])};DatabaseUtils.script2=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:11,key:"userPhoto",data:""},{id:12,key:"wsBackground",data:""},{id:13,key:"lastStatus",data:""},{id:14,key:"requestFilters",data:""},{id:15,key:"empPermissions",data:""},{id:16,key:"teleWorkingFilters",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script3=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:17,key:"language",data:"ESP"}];for(var u in t)r.add(t[u])};DatabaseUtils.script4=function(n,t){var i=n.target.result,u=i.createObjectStore("Views",{keyPath:"key"}),r;t(u,"key",{unique:!0});r=i.createObjectStore("JsViews",{keyPath:"key"});t(r,"key",{unique:!0})};DatabaseUtils.script5=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:18,key:"ApiVersion",data:"0"}];for(var u in t)r.add(t[u])};DatabaseUtils.script6=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:19,key:"documentsFilters",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script7=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:20,key:"adfsCredential",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script8=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:21,key:"licenseAccepted",data:"true"}];for(var u in t)r.add(t[u])};DatabaseUtils.script9=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:22,key:"punchesFilters",data:""},{id:23,key:"authorizationFilters",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script10=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:24,key:"serverTimezone",data:"Europe/Berlin"}];for(var u in t)r.add(t[u])};DatabaseUtils.script11=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:25,key:"showForbiddenSections",data:"true"}];for(var u in t)r.add(t[u])};DatabaseUtils.script12=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:26,key:"showLogoutHome",data:"false"}];for(var u in t)r.add(t[u])};DatabaseUtils.script13=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:27,key:"onlySupervisor",data:"false"},{id:28,key:"supervisorPortalEnabled",data:"false"},{id:29,key:"supervisorFilters",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script14=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:30,key:"isUsingAdfs",data:"false"}];for(var u in t)r.add(t[u])};DatabaseUtils.script15=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:31,key:"isAD",data:""},{id:34,key:"MT",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script16=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:35,key:"companyID",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script17=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:36,key:"HeaderMD5",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script18=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:37,key:"supervisorFiltersDR",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script19=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:38,key:"rememberLogin",data:""},{id:39,key:"rememberLoginApp",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script20=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:40,key:"refreshStatus",data:""},{id:41,key:"refreshConfig",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.script21=function(n){var t=n.target.transaction,i=t.objectStore("Settings");i.add({id:42,key:"isTimeGate",data:""})};DatabaseUtils.script22=function(n){var t=n.target.transaction,i=t.objectStore("Settings");i.add({id:43,key:"screenTimeout",data:"10"})};DatabaseUtils.script23=function(n){var i=n.target.transaction,r=i.objectStore("Settings"),t=[{id:44,key:"BackgroundMD5",data:""},{id:45,key:"timeGateBackground",data:""}];for(var u in t)r.add(t[u])};DatabaseUtils.prototype.updateParameters=function(n,t){Settings.updateParameters(this.dbName,this.dbDescription,this.databaseSize,n,t)};DatabaseUtils.prototype.loadView=function(n){VTPortal.app.getViewTemplateInfo(n)?VTPortal.app.navigate(n):(this.loasJsView(n),this.loadDview(n))};DatabaseUtils.prototype.emptyViewsCatalogs=function(){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var n=VTPortal.roApp.db.dbObject.result.transaction("JsViews","readwrite").objectStore("JsViews"),t=VTPortal.roApp.db.dbObject.result.transaction("Views","readwrite").objectStore("Views");n.clear();t.clear()}};DatabaseUtils.prototype.loasJsView=function(key){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var objectStore=VTPortal.roApp.db.dbObject.result.transaction("JsViews","readwrite").objectStore("JsViews"),request=objectStore.get(key);request.onerror=function(){};request.onsuccess=function(event){var data=event.target.result;typeof data!="undefined"&&eval(data.markup)}}};DatabaseUtils.prototype.loadDview=function(key){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var objectStore=VTPortal.roApp.db.dbObject.result.transaction("Views","readwrite").objectStore("Views"),request=objectStore.get(key);request.onerror=function(){new WebServiceRobotics(function(result){var viewsCatalong,jsViewsCatalong;result.Status==window.VTPortalUtils.constants.OK.value?(viewsCatalong=VTPortal.roApp.db.dbObject.result.createObjectStore("Views",{keyPath:"key"}),viewsCatalong.add({key:key,markup:result.viewContent}),jsViewsCatalong=VTPortal.roApp.db.dbObject.result.createObjectStore("JsViews",{keyPath:"key"}),jsViewsCatalong.add({key:key,markup:result.jsContent}),eval(result.jsContent),VTPortal.app.loadTemplates($(result.viewContent)),VTPortal.app.navigate(key)):VTPortalUtils.utils.processSecurityMessage(result)}).getView(key)};request.onsuccess=function(event){var data=event.target.result;typeof data=="undefined"?new WebServiceRobotics(function(result){var viewsCatalong,jsViewsCatalong;result.Status==window.VTPortalUtils.constants.OK.value?(viewsCatalong=VTPortal.roApp.db.dbObject.result.transaction("Views","readwrite").objectStore("Views"),viewsCatalong.add({key:key,markup:result.viewContent}),jsViewsCatalong=VTPortal.roApp.db.dbObject.result.transaction("JsViews","readwrite").objectStore("JsViews"),jsViewsCatalong.add({key:key,markup:result.jsContent}),eval(result.jsContent),VTPortal.app.loadTemplates($(result.viewContent)),VTPortal.app.navigate(key)):VTPortalUtils.utils.processSecurityMessage(result)}).getView(key):(VTPortal.app.loadTemplates($(data.markup)),VTPortal.app.navigate(key))}}};DatabaseUtils.prototype.exportToJsonString=function(n){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var t={};VTPortal.roApp.db.dbObject.result.objectStoreNames.length>0&&$.each(VTPortal.roApp.db.dbObject.result.objectStoreNames,function(i,r){var u=[],e=VTPortal.roApp.db.dbObject.result.transaction(VTPortal.roApp.db.dbObject.result.objectStoreNames,"readonly"),o=e.objectStore(r),s=VTPortal.roApp.db.IDBKeyRange.lowerBound(0),f=o.openCursor(s);f.onerror=function(){VTPortal.roApp.db.fileSystem!=null&&VTPortal.roApp.db.writeConfigFile("")};f.onsuccess=function(i){var f=i.target.result,e;f?(u.push(f.value),f.continue()):(t[r]=u,VTPortal.roApp.db.dbObject.result.objectStoreNames.length==Object.keys(t).length&&(e=JSON.stringify(t),typeof n!="undefined"&&n!=null&&n(e),VTPortal.roApp.db.fileSystem!=null&&VTPortal.roApp.db.writeConfigFile(e)))}})}};DatabaseUtils.prototype.importFromJsonString=function(n,t){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null)try{if(n==""){typeof t!="undefined"&&t!=null&&t();return}var i=JSON.parse(n);$.each(VTPortal.roApp.db.dbObject.result.objectStoreNames,function(n,r){VTPortal.roApp.db.tableCounter=0;i[r].length>0?$.each(i[r],function(n,u){var e=VTPortal.roApp.db.dbObject.result.transaction(VTPortal.roApp.db.dbObject.result.objectStoreNames,"readwrite"),o=e.objectStore(r),f=o.add(u);f.onerror=function(){};f.onsuccess=function(){VTPortal.roApp.db.tableCounter++;VTPortal.roApp.db.tableCounter==i[r].length&&(delete i[r],Object.keys(i).length==0&&typeof t!="undefined"&&t!=null&&t())}}):(delete i[r],typeof t!="undefined"&&t!=null&&t())})}catch(r){typeof t!="undefined"&&t!=null&&t()}};DatabaseUtils.prototype.clearDatabase=function(n){typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null&&(VTPortal.roApp.db.tableCounter=0,$.each(VTPortal.roApp.db.dbObject.result.objectStoreNames,function(t,i){var u=VTPortal.roApp.db.dbObject.result.transaction(VTPortal.roApp.db.dbObject.result.objectStoreNames,"readwrite"),f=u.objectStore(i),r=f.clear();r.onerror=function(){};r.onsuccess=function(){VTPortal.roApp.db.tableCounter++;VTPortal.roApp.db.tableCounter==VTPortal.roApp.db.dbObject.result.objectStoreNames.length&&n()}}))};DatabaseUtils.prototype.loadJsStringFromDisk=function(n){VTPortal.roApp.db.fileSystem!=null?VTPortal.roApp.db.fileSystem.root.getFile("vtportal.conf",{create:!1,exclusive:!1},function(t){t.file(function(t){var i=new FileReader;i.onloadend=function(t){var i=t.target.result;VTPortal.roApp.db.clearDatabase(function(){VTPortal.roApp.db.importFromJsonString(i,n)})};i.readAsText(t)},function(){typeof n!="undefined"&&n!=null&&n()})},function(){typeof n!="undefined"&&n!=null&&n()}):typeof n!="undefined"&&n!=null&&n()};DatabaseUtils.prototype.writeConfigFile=function(n){VTPortal.roApp.db.fileSystem.root.getFile("vtportal.conf",{create:!0,exclusive:!1},function(t){t.createWriter(function(t){t.onwriteend=function(){};t.onerror=function(){};t.write(new Blob([n],{type:"text/plain"}))})},function(){})};Settings.prototype.deleteRefreshTimestamps=function(){return VTPortal.roApp.userId!=this.lastStatusRefresh.userId?(this.lastStatusRefresh=this.getNewStatusObject(VTPortal.roApp.userId),!0):!1};Settings.prototype.deleteVTPortalUserData=function(){return VTPortal.roApp.userId!=this.lastStatusRefresh.userId?(this.lastStatus="",this.requestFilters="",this.teleWorkingFilters="",this.punchesFilters="",this.authorizationFilters="",this.supervisorFilters="",this.supervisorFiltersDR="",this.documentsFilters="",this.userPhoto="",this.wsBackground="",this.HeaderMD5="",!0):!1};Settings.prototype.getCacheDS=function(n){return VTPortal.roApp.impersonatedIDEmployee!=-1?null:typeof this.lastStatusRefresh[n]!="undefined"?this.lastStatusRefresh[n].ds:null};Settings.prototype.updateCacheDS=function(n,t){VTPortal.roApp.impersonatedIDEmployee==-1&&typeof this.lastStatusRefresh[n]!="undefined"&&(this.lastStatusRefresh[n]={timestamp:moment().toDate(),ds:t},this.saveParameter("refreshStatus"))};Settings.prototype.markForRefresh=function(n){if(VTPortal.roApp.impersonatedIDEmployee==-1){for(var t=0;t<n.length;t++)typeof this.lastStatusRefresh[n[t]]!="undefined"&&(this.lastStatusRefresh[n[t]]={timestamp:new Date(1970,1,1,0,0,0,0),ds:null});n.find(function(n){return n=="status"})!=null&&typeof this.lastStatusRefresh.alertstatus!="undefined"&&(this.lastStatusRefresh.alertstatus={timestamp:new Date(1970,1,1,0,0,0,0),ds:null});this.saveParameter("refreshStatus")}};Settings.prototype.resetFastPunchStatusObject=function(){VTPortal.roApp.impersonatedIDEmployee==-1&&(this.lastStatusRefresh.status={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.alertstatus={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.punches={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.telecommute={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.tcinfo={timestamp:new Date(1970,1,1,0,0,0,0),ds:null})};Settings.prototype.resetAlertsStatusObject=function(){VTPortal.roApp.impersonatedIDEmployee==-1&&(this.lastStatusRefresh.notifications={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.dailyrecord={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.communiques={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.channels={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.surveys={timestamp:new Date(1970,1,1,0,0,0,0),ds:null},this.lastStatusRefresh.accruals={timestamp:new Date(1970,1,1,0,0,0,0),ds:null})};Settings.prototype.getNewStatusObject=function(n){return{userId:n,causes:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},zones:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},status:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},punches:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},accruals:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},notifications:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},dailyrecord:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},communiques:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},channels:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},telecommute:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},tcinfo:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},surveys:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},alertstatus:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null},weblinks:{timestamp:new Date(1970,1,1,0,0,0,0),ds:null}}};Settings.prototype.commitSettings=function(){var i=Cookies.get("VTPortalToken"),t=typeof i!="undefined"?decodeURIComponent(i):"",n,r;VTPortal.roApp.adfsLoginInprogress=localStorage.getItem("adfsLoginInprogress")=="true"?!0:!1;VTPortal.roApp.configWS(this.wsURL);VTPortal.roApp.mtServer(this.companyID);VTPortal.roApp.companyID=this.companyID;VTPortal.roApp.configSSL(this.isSSL);VTPortal.roApp.screenTimeout(this.screenTimeout);VTPortal.roApp.db.settings.isTimeGate==!0?(VTPortal.roApp.db.settings.wsURL=this.wsURL,VTPortal.roApp.db.settings.isSSL=this.isSSL,VTPortal.roApp.db.settings.companyID=this.companyID,VTPortal.roApp.companyID=VTPortal.roApp.db.settings.companyID,VTPortal.roApp.currentLanguageId(VTPortal.roApp.db.settings.language),VTPortal.roApp.timegateLanguage(VTPortal.roApp.db.settings.language),VTPortal.roApp.setLanguage(VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.isTimeGate(!0),VTPortal.app.navigate("TimeGate",{root:!0})):VTPortal.roApp.isModeApp()||typeof t=="undefined"||t==""?(VTPortal.roApp.userName(this.login),VTPortal.roApp.db.settings.adfsCredential==""?this.rememberLogin==!1&&this.password==""||(VTPortal.roApp.db.settings.wsURL=this.wsURL,VTPortal.roApp.db.settings.isSSL=this.isSSL,VTPortal.roApp.db.settings.isUsingAdfs=this.isSSL,VTPortal.roApp.db.settings.language=this.language,VTPortal.roApp.db.settings.login=this.login,VTPortal.roApp.db.settings.MT=this.MT,VTPortal.roApp.db.settings.companyID=this.companyID,VTPortal.roApp.db.settings.password=this.password,VTPortal.roApp.db.settings.rememberLogin=this.rememberLogin,VTPortal.roApp.db.settings.rememberLoginApp=this.rememberLoginApp,VTPortal.roApp.db.settings.userPhoto=this.userPhoto,VTPortal.roApp.db.settings.wsBackground=this.wsBackground,VTPortal.roApp.db.settings.lastStatus=this.lastStatus,VTPortal.roApp.db.settings.requestFilters=this.requestFilters,VTPortal.roApp.db.settings.empPermissions=this.empPermissions,VTPortal.roApp.db.settings.ApiVersion=this.ApiVersion,VTPortal.roApp.db.settings.adfsCredential=this.adfsCredential,VTPortal.roApp.db.settings.teleWorkingFilters=this.teleWorkingFilters,VTPortal.roApp.db.settings.punchesFilters=this.punchesFilters,VTPortal.roApp.db.settings.authorizationFilters=this.authorizationFilters,VTPortal.roApp.db.settings.supervisorFilters=this.supervisorFilters,VTPortal.roApp.db.settings.supervisorFiltersDR=this.supervisorFiltersDR,VTPortal.roApp.db.settings.documentsFilters=this.documentsFilters,VTPortal.roApp.db.settings.licenseAccepted=this.licenseAccepted,VTPortal.roApp.db.settings.onlySupervisor=this.onlySupervisor,VTPortal.roApp.db.settings.supervisorPortalEnabled=this.supervisorPortalEnabled,VTPortal.roApp.db.settings.lastStatusRefresh=this.lastStatusRefresh,VTPortal.roApp.db.settings.serverTimezone=this.serverTimezone,VTPortal.roApp.db.settings.HeaderMD5=this.HeaderMD5,VTPortal.roApp.db.settings.showForbiddenSections=this.showForbiddenSections,VTPortal.roApp.db.settings.showLogoutHome=this.showLogoutHome,VTPortal.roApp.db.settings.isAD=this.isAD,VTPortal.roApp.userPhoto(this.userPhoto),VTPortal.roApp.licenseAccepted(this.licenseAccepted),VTPortal.roApp.setLanguage(VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.serverTimeZone=VTPortal.roApp.db.settings.serverTimezone,VTPortal.roApp.HeaderMD5=VTPortal.roApp.db.settings.HeaderMD5,VTPortal.roApp.ShowForbiddenSections=VTPortal.roApp.db.settings.showForbiddenSections,VTPortal.roApp.showLogoutHome(VTPortal.roApp.db.settings.showLogoutHome),VTPortal.roApp.isAD(VTPortal.roApp.db.settings.isAD),VTPortal.roApp.db.settings.isTimeGate=this.isTimeGate,VTPortal.roApp.isTimeGate(VTPortal.roApp.db.settings.isTimeGate),this.requestFilters!=""&&VTPortal.roApp.requestFilters(JSON.parse(this.requestFilters.decodeBase64())),this.empPermissions!=""&&VTPortal.roApp.empPermissions(JSON.parse(this.empPermissions.decodeBase64())),this.teleWorkingFilters!=""&&VTPortal.roApp.teleWorkingFilters(JSON.parse(this.teleWorkingFilters.decodeBase64())),this.authorizationFilters!=""&&VTPortal.roApp.authorizationFilters(JSON.parse(this.authorizationFilters.decodeBase64())),this.supervisorFilters!=""&&VTPortal.roApp.supervisorFilters(JSON.parse(this.supervisorFilters.decodeBase64())),this.supervisorFiltersDR!=""&&VTPortal.roApp.supervisorFiltersDR(JSON.parse(this.supervisorFiltersDR.decodeBase64())),this.punchesFilters!=""&&VTPortal.roApp.punchesFilters(JSON.parse(this.punchesFilters.decodeBase64())),this.documentsFilters!=""&&VTPortal.roApp.documentsFilters(JSON.parse(this.documentsFilters.decodeBase64()))):(n=VTPortal.roApp.db.settings.adfsCredential.decodeBase64().split("#"),VTPortal.roApp.guidToken=n[0],VTPortal.roApp.securityToken=n[1],n.length>2&&(VTPortal.roApp.companyID=n[2]),VTPortal.roApp.db.settings.language=this.language,VTPortal.roApp.setLanguage(VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag)),r=function(){VTPortal.roApp.db.settings.adfsCredential==""?VTPortal.roApp.db.settings.rememberLogin==!1&&VTPortal.roApp.db.settings.password==""?VTPortal.app.navigate("login",{root:!0}):VTPortal.roApp.redirectAtHome():VTPortal.roApp.redirectAtHome()},VTPortal.roApp.db.settings.save(r)):(Cookies.remove("VTPortalToken"),n=t.decodeBase64().split("#"),n[1]=="unknown"?(n.length>2&&(VTPortal.roApp.companyID=n[2],VTPortal.roApp.db.settings.companyID=n[2]),VTPortal.roApp.mtServer(VTPortal.roApp.companyID),VTPortal.roApp.ssoUnkownError(!0),VTPortal.roApp.setLanguage(VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.db.settings.save(function(){VTPortal.app.navigate("login",{root:!0})})):(VTPortal.roApp.guidToken=n[0],VTPortal.roApp.securityToken=n[1],n.length>2&&(VTPortal.roApp.companyID=n[2],VTPortal.roApp.db.settings.companyID=n[2]),VTPortal.roApp.mtServer(this.companyID),VTPortal.roApp.companyID=this.companyID,VTPortal.roApp.adfsEnabled(!0),VTPortal.roApp.db.settings.isUsingAdfs=!0,VTPortal.roApp.db.settings.adfsCredential=t,VTPortal.roApp.db.settings.wsURL=VTPortal.roApp.configWS(),VTPortal.roApp.db.settings.isSSL=VTPortal.roApp.configSSL(),VTPortal.roApp.mtServer(VTPortal.roApp.companyID),VTPortal.roApp.setLanguage(VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.db.settings.save(function(){VTPortal.roApp.redirectAtHome()})))};Settings.prototype.loadSettings=function(n){var t=n.result.transaction("Settings","readwrite"),i=t.objectStore("Settings"),r=VTPortal.roApp.db.IDBKeyRange.lowerBound(0),u=i.openCursor(r);u.onsuccess=function(n){var t=n.target.result;if(!!t==!1){setTimeout(function(){VTPortal.roApp.db.settings.commitSettings()},200);return}switch(t.value.key){case"wsURL":VTPortal.roApp.db.settings.wsURL=t.value.data;break;case"ssl":VTPortal.roApp.db.settings.isSSL=t.value.data=="true"?!0:!1;break;case"isUsingAdfs":VTPortal.roApp.db.settings.isUsingAdfs=t.value.data=="true"?!0:!1;break;case"saveLogin":VTPortal.roApp.db.settings.saveLogin=t.value.data=="true"?!0:!1;break;case"login":try{VTPortal.roApp.db.settings.login=t.value.data.decodeBase64()}catch(n){VTPortal.roApp.db.settings.login=""}break;case"MT":VTPortal.roApp.db.settings.MT=t.value.data==""?!0:t.value.data=="false"?!1:!0;localStorage.setItem("IsMT",VTPortal.roApp.db.settings.MT);break;case"companyID":try{VTPortal.roApp.db.settings.companyID=t.value.data.decodeBase64()}catch(n){VTPortal.roApp.db.settings.companyID=""}break;case"password":try{VTPortal.roApp.db.settings.password=t.value.data.decodeBase64()}catch(n){VTPortal.roApp.db.settings.password=""}break;case"rememberLogin":VTPortal.roApp.db.settings.rememberLogin=t.value.data=="true"?!0:!1;break;case"rememberLoginApp":try{VTPortal.roApp.db.settings.rememberLoginApp=t.value.data.decodeBase64()}catch(n){VTPortal.roApp.db.settings.rememberLoginApp=""}break;case"language":VTPortal.roApp.db.settings.language=t.value.data;break;case"userPhoto":VTPortal.roApp.db.settings.userPhoto=t.value.data;break;case"wsBackground":if(t.value.data==null||t.value.data=="")VTPortal.roApp.HasCustomHeader(!1),VTPortal.roApp.customBackground(null);else try{VTPortal.roApp.HasCustomHeader(!0);VTPortal.roApp.customBackground(JSON.parse(t.value.data))}catch(n){VTPortal.roApp.HasCustomHeader(!1);VTPortal.roApp.customBackground(null)}VTPortal.roApp.db.settings.wsBackground=t.value.data;break;case"lastStatus":VTPortal.roApp.db.settings.lastStatus=t.value.data;break;case"requestFilters":VTPortal.roApp.db.settings.requestFilters=t.value.data;break;case"empPermissions":VTPortal.roApp.db.settings.empPermissions=t.value.data;break;case"ApiVersion":VTPortal.roApp.db.settings.ApiVersion=parseInt(t.value.data,10);break;case"adfsCredential":VTPortal.roApp.db.settings.adfsCredential=t.value.data;break;case"teleWorkingFilters":VTPortal.roApp.db.settings.teleWorkingFilters=t.value.data;break;case"punchesFilters":VTPortal.roApp.db.settings.punchesFilters=t.value.data;break;case"authorizationFilters":VTPortal.roApp.db.settings.authorizationFilters=t.value.data;break;case"supervisorFilters":VTPortal.roApp.db.settings.supervisorFilters=t.value.data;break;case"supervisorFiltersDR":VTPortal.roApp.db.settings.supervisorFiltersDR=t.value.data;break;case"documentsFilters":VTPortal.roApp.db.settings.documentsFilters=t.value.data;break;case"licenseAccepted":VTPortal.roApp.db.settings.licenseAccepted=t.value.data=="false"?!1:!0;break;case"serverTimezone":VTPortal.roApp.db.settings.serverTimezone=t.value.data;break;case"HeaderMD5":VTPortal.roApp.db.settings.HeaderMD5=t.value.data;break;case"showForbiddenSections":VTPortal.roApp.db.settings.showForbiddenSections=t.value.data=="false"?!1:!0;break;case"showLogoutHome":VTPortal.roApp.db.settings.showLogoutHome=t.value.data=="false"?!1:!0;break;case"isAD":VTPortal.roApp.db.settings.isAD=t.value.data==""||t.value.data=="false"?!1:!0;break;case"onlySupervisor":VTPortal.roApp.db.settings.onlySupervisor=t.value.data=="false"?!1:!0;break;case"supervisorPortalEnabled":VTPortal.roApp.db.settings.supervisorPortalEnabled=t.value.data=="false"?!1:!0;break;case"UUID":VTPortal.roApp.db.settings.UUID=t.value.data;VTPortal.roApp.guidToken=t.value.data;break;case"refreshStatus":t.value.data!=null&&t.value.data!=""&&(VTPortal.roApp.db.settings.lastStatusRefresh=JSON.parse(t.value.data.decodeBase64()));break;case"refreshConfig":t.value.data!=null&&t.value.data!=""&&(VTPortal.roApp.db.settings.refreshConfiguration=JSON.parse(t.value.data.decodeBase64()));break;case"isTimeGate":VTPortal.roApp.db.settings.isTimeGate=t.value.data=="true"?!0:!1;break;case"screenTimeout":VTPortal.roApp.db.settings.screenTimeout=parseInt(t.value.data,10);break;case"BackgroundMD5":VTPortal.roApp.db.settings.BackgroundMD5=t.value.data;break;case"timeGateBackground":VTPortal.roApp.db.settings.timeGateBackground=t.value.data}t.continue()}};Settings.prototype.save=function(n){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var i=VTPortal.roApp.db.dbObject,t=i.result.transaction("Settings","readwrite");t.objectStore("Settings").put({id:1,key:"wsURL",data:this.wsURL});t.objectStore("Settings").put({id:2,key:"ssl",data:this.isSSL==!0?"true":"false"});t.objectStore("Settings").put({id:4,key:"login",data:this.login.encodeBase64()});t.objectStore("Settings").put({id:5,key:"password",data:this.password.encodeBase64()});t.objectStore("Settings").put({id:11,key:"userPhoto",data:this.userPhoto});t.objectStore("Settings").put({id:12,key:"wsBackground",data:this.wsBackground});t.objectStore("Settings").put({id:13,key:"lastStatus",data:""});t.objectStore("Settings").put({id:14,key:"requestFilters",data:this.requestFilters});t.objectStore("Settings").put({id:15,key:"empPermissions",data:this.empPermissions});t.objectStore("Settings").put({id:16,key:"teleWorkingFilters",data:this.teleWorkingFilters});t.objectStore("Settings").put({id:17,key:"language",data:this.language});t.objectStore("Settings").put({id:18,key:"ApiVersion",data:this.ApiVersion});t.objectStore("Settings").put({id:19,key:"documentsFilters",data:this.documentsFilters});t.objectStore("Settings").put({id:20,key:"adfsCredential",data:this.adfsCredential});t.objectStore("Settings").put({id:21,key:"licenseAccepted",data:this.licenseAccepted==!0?"true":"false"});t.objectStore("Settings").put({id:22,key:"punchesFilters",data:this.punchesFilters});t.objectStore("Settings").put({id:23,key:"authorizationFilters",data:this.authorizationFilters});t.objectStore("Settings").put({id:24,key:"serverTimezone",data:this.serverTimezone});t.objectStore("Settings").put({id:25,key:"showForbiddenSections",data:this.showForbiddenSections==!0?"true":"false"});t.objectStore("Settings").put({id:26,key:"showLogoutHome",data:this.showLogoutHome==!0?"true":"false"});t.objectStore("Settings").put({id:27,key:"onlySupervisor",data:this.onlySupervisor==!0?"true":"false"});t.objectStore("Settings").put({id:28,key:"supervisorPortalEnabled",data:this.supervisorPortalEnabled==!0?"true":"false"});t.objectStore("Settings").put({id:29,key:"supervisorFilters",data:this.supervisorFilters});t.objectStore("Settings").put({id:30,key:"isUsingAdfs",data:this.isUsingAdfs==!0?"true":"false"});t.objectStore("Settings").put({id:31,key:"isAD",data:this.isAD!=""?"true":"false"});t.objectStore("Settings").put({id:34,key:"MT",data:this.MT});t.objectStore("Settings").put({id:35,key:"companyID",data:this.companyID.encodeBase64()});t.objectStore("Settings").put({id:36,key:"HeaderMD5",data:this.HeaderMD5});t.objectStore("Settings").put({id:37,key:"supervisorFiltersDR",data:this.supervisorFiltersDR});t.objectStore("Settings").put({id:38,key:"rememberLogin",data:this.rememberLogin==!0?"true":"false"});t.objectStore("Settings").put({id:39,key:"rememberLoginApp",data:this.rememberLoginApp.encodeBase64()});t.objectStore("Settings").put({id:40,key:"refreshStatus",data:JSON.stringify(this.lastStatusRefresh).encodeBase64()});t.objectStore("Settings").put({id:41,key:"refreshConfig",data:JSON.stringify(this.refreshConfiguration).encodeBase64()});t.objectStore("Settings").put({id:42,key:"isTimeGate",data:this.isTimeGate?"true":"false"});t.objectStore("Settings").put({id:43,key:"screenTimeout",data:this.screenTimeout});t.objectStore("Settings").put({id:44,key:"BackgroundMD5",data:this.BackgroundMD5});t.objectStore("Settings").put({id:45,key:"timeGateBackground",data:this.timeGateBackground});t.oncomplete=function(){VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.fileSystem!=null&&VTPortal.roApp.db.exportToJsonString(function(){});typeof n!="undefined"&&n()}}};Settings.prototype.saveParameter=function(n,t){if(typeof VTPortal.roApp.db.indexedDB!="undefined"&&VTPortal.roApp.db.dbObject!=null){var i=VTPortal.roApp.db.dbObject;switch(n){case"wsURL":this.updateParameters(i,"wsURL",this.wsURL,t);break;case"ssl":this.updateParameters(i,"ssl",this.isSSL==!0?"true":"false",t);break;case"isUsingAdfs":this.updateParameters(i,"isUsingAdfs",this.isUsingAdfs==!0?"true":"false",t);break;case"login":this.updateParameters(i,"login",this.login.encodeBase64(),t);break;case"MT":this.updateParameters(i,"MT",this.MT,t);break;case"companyID":this.updateParameters(i,"companyID",this.companyID.encodeBase64(),t);break;case"password":this.updateParameters(i,"password",this.password.encodeBase64(),t);break;case"rememberLogin":this.updateParameters(i,"rememberLogin",this.isSSL==!0?"true":"false",t);break;case"password":this.updateParameters(i,"rememberLoginApp",this.rememberLoginApp.encodeBase64(),t);break;case"language":this.updateParameters(i,"language",this.language,t);break;case"userPhoto":this.updateParameters(i,"userPhoto",this.userPhoto,t);break;case"wsBackground":this.updateParameters(i,"wsBackground",this.wsBackground,t);break;case"lastStatus":this.updateParameters(i,"lastStatus",this.lastStatus,t);break;case"requestFilters":this.updateParameters(i,"requestFilters",this.requestFilters,t);break;case"empPermissions":this.updateParameters(i,"empPermissions",this.empPermissions,t);break;case"ApiVersion":this.updateParameters(i,"ApiVersion",this.ApiVersion,t);break;case"adfsCredential":this.updateParameters(i,"adfsCredential",this.adfsCredential,t);break;case"teleWorkingFilters":this.updateParameters(i,"teleWorkingFilters",this.teleWorkingFilters,t);break;case"punchesFilters":this.updateParameters(i,"punchesFilters",this.punchesFilters,t);break;case"authorizationFilters":this.updateParameters(i,"authorizationFilters",this.authorizationFilters,t);break;case"supervisorFilters":this.updateParameters(i,"supervisorFilters",this.supervisorFilters,t);break;case"supervisorFiltersDR":this.updateParameters(i,"supervisorFiltersDR",this.supervisorFiltersDR,t);break;case"documentsFilters":this.updateParameters(i,"documentsFilters",this.documentsFilters,t);break;case"licenseAccepted":this.updateParameters(i,"licenseAccepted",this.licenseAccepted,t);VTPortal.roApp.licenseAccepted(this.licenseAccepted);break;case"serverTimezone":this.updateParameters(i,"serverTimezone",this.serverTimezone,t);break;case"HeaderMD5":this.updateParameters(i,"HeaderMD5",this.HeaderMD5,t);break;case"showForbiddenSections":this.updateParameters(i,"showForbiddenSections",this.showForbiddenSections,t);break;case"showLogoutHome":this.updateParameters(i,"showLogoutHome",this.showLogoutHome,t);break;case"isAD":this.updateParameters(i,"isAD",this.isAD,t);break;case"onlySupervisor":this.updateParameters(i,"onlySupervisor",this.onlySupervisor,t);break;case"refreshStatus":this.updateParameters(i,"refreshStatus",JSON.stringify(this.lastStatusRefresh).encodeBase64(),t);break;case"refreshConfig":this.updateParameters(i,"refreshConfig",JSON.stringify(this.refreshConfiguration).encodeBase64(),t);break;case"isTimeGate":this.updateParameters(i,"isTimeGate",this.isTimeGate?"true":"false",t);break;case"screenTimeout":this.updateParameters(i,"screenTimeout",this.screenTimeout,t);break;case"BackgroundMD5":this.updateParameters(i,"BackgroundMD5",this.BackgroundMD5,t);break;case"timeGateBackground":this.updateParameters(i,"timeGateBackground",this.timeGateBackground,t)}}};Settings.prototype.updateParameters=function(n,t,i,r){var u=n.result.transaction("Settings","readwrite").objectStore("Settings"),f=u.get(t),e=r;f.onerror=function(){};f.onsuccess=function(n){var t=n.target.result,r;!!t!=!1&&(t.data=i,r=u.put(t),r.onerror=function(){},r.onsuccess=function(){typeof e!="undefined"&&e()})}};window.VTPortal=$.extend(!0,window.VTPortal,{config:{}}),function(){var n=function(n){for(var r=n.split("."),i=window,t=0;t<r.length;t+=1)i=i[r[t]]=i[r[t]]||{};return i};n("Robotics.Client.Common")}();Robotics.Client.Common.roHtmlColor=function(){};Robotics.Client.Common.roHtmlColor.prototype.randomColor=function(){var n;return n=Math.floor(Math.random()*16777216),n=n.toString(16),n=("000000"+n).slice(-6),"#"+n};Robotics.Client.Common.roHtmlColor.prototype.ColorLuminance=function(n,t){n=String(n).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);t=t||0;for(var u="#",i,r=0;r<3;r++)i=parseInt(n.substr(r*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u};Robotics.Client.Common.roHtmlColor.prototype.sbcRip=function(n,t){var u=t.length,i={};if(u>9){if(t=t.split(","),t.length<3||t.length>4)return null;i[0]=n(t[0].slice(4));i[1]=n(t[1]);i[2]=n(t[2]);i[3]=t[3]?parseFloat(t[3]):-1}else{if(u==8||u==6||u<4)return null;u<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(u>4?t[4]+""+t[4]:""));t=n(t.slice(1),16);i[0]=t>>16&255;i[1]=t>>8&255;i[2]=t&255;i[3]=u==9||u==5?r((t>>24&255)/255*1e4)/1e4:-1}return i};Robotics.Client.Common.roHtmlColor.prototype.shadeBlendConvert=function(n,t,i){if(typeof n!="number"||n<-1||n>1||typeof t!="string"||t[0]!="r"&&t[0]!="#"||typeof i!="string"&&typeof i!="undefined")return null;var o=parseInt,f=Math.round,e=t.length>9,e=typeof i=="string"?i.length>9?!0:i=="c"?!e:!1:e,s=n<0,n=s?n*-1:n,i=i&&i!="c"?i:s?"#000000":"#FFFFFF",r=this.sbcRip(o,t),u=this.sbcRip(o,i);return!r||!u?null:e?"rgb("+f((u[0]-r[0])*n+r[0])+","+f((u[1]-r[1])*n+r[1])+","+f((u[2]-r[2])*n+r[2])+(r[3]<0&&u[3]<0?")":","+(r[3]>-1&&u[3]>-1?f(((u[3]-r[3])*n+r[3])*1e4)/1e4:u[3]<0?r[3]:u[3])+")"):"#"+(4294967296+(r[3]>-1&&u[3]>-1?f(((u[3]-r[3])*n+r[3])*255):u[3]>-1?f(u[3]*255):r[3]>-1?f(r[3]*255):255)*16777216+f((u[0]-r[0])*n+r[0])*65536+f((u[1]-r[1])*n+r[1])*256+f((u[2]-r[2])*n+r[2])).toString(16).slice(r[3]>-1||u[3]>-1?1:3)};Robotics.Client.Common.roHtmlColor.prototype.invertCssColor=function(n){var t=this.invertColor(this.hexColor2rgb(n));return this.rgb2hexColor(t)};Robotics.Client.Common.roHtmlColor.prototype.invertSimpleColor=function(n){var t=n;return t=t.substring(1),t=parseInt(t,16),t=16777215^t,t=t.toString(16),t=("000000"+t).slice(-6),"#"+t};Robotics.Client.Common.roHtmlColor.prototype.invertColor=function(n){var t=this.rgb2yuv(n),i=90;return t.y=this.clamp(t.y+(t.y>100?-i:i)),this.yuv2rgb(t)};Robotics.Client.Common.roHtmlColor.prototype.rgb2hexColor=function(n){return"#"+this.dec2hex(n.r)+this.dec2hex(n.g)+this.dec2hex(n.b)};Robotics.Client.Common.roHtmlColor.prototype.hexColor2rgb=function(n){return n=n.substring(1),{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16)}};Robotics.Client.Common.roHtmlColor.prototype.rgb2hexColor=function(n){return"#"+this.dec2hex(n.r)+this.dec2hex(n.g)+this.dec2hex(n.b)};Robotics.Client.Common.roHtmlColor.prototype.dec2hex=function(n){var t=n.toString(16);return t.length<2?"0"+t:t};Robotics.Client.Common.roHtmlColor.prototype.rgb2yuv=function(n){var t=this.clamp(n.r*.299+n.g*.587+n.b*.114),i=this.clamp(n.r*-.16874+n.g*-.33126+n.b*.5+128),r=this.clamp(n.r*.5+n.g*-.41869+n.b*-.08131+128);return{y:t,u:i,v:r}};Robotics.Client.Common.roHtmlColor.prototype.yuv2rgb=function(n){var t=n.y,i=n.u,r=n.v,u=this.clamp(t+(r-128)*1.402),f=this.clamp(t+(i-128)*-.34414+(r-128)*-.71414),e=this.clamp(t+(i-128)*1.772);return{r:u,g:f,b:e}};Robotics.Client.Common.roHtmlColor.prototype.clamp=function(n){return n<0?0:n>255?255:Math.floor(n)},function(){function pi(){function i(){t.push({ID:n,ActionIndex:26,Name:i18nextko.t("roLogout"),Class:"icon iconLogout"});n=n+1;t.push({ID:n,ActionIndex:0,Name:"VTP "+VTPortal.roApp.infoVersion,Class:""});VTPortal.roApp.mainMenuItems(t)}var t=[],n=1;if(VTPortal.roApp.impersonatedIDEmployee!=-1?$("body").addClass("impersonate"):$("body").removeClass("impersonate"),VTPortal.roApp.impersonatedIDEmployee!=-1&&(t.push({ID:n,ActionIndex:25,Name:VTPortal.roApp.impersonatedNameEmployee,Class:"icon iconImpersonate"}),n=n+1),VTPortal.roApp.db.settings.onlySupervisor)if(VTPortal.roApp.impersonatedIDEmployee==-1)t.push({ID:n,ActionIndex:15,Name:i18nextko.t("roHomeMyTeamEmployees"),Class:"icon iconTeam"}),n=n+1,VTPortal.roApp.userStatus()==null?(t.push({ID:n,ActionIndex:16,Name:i18nextko.t("roHomeMyTeamAlerts"),Class:"icon iconAlerts"}),n=n+1):(typeof VTPortal.roApp.userStatus().HasAlertPermission=="undefined"||VTPortal.roApp.userStatus().HasAlertPermission)&&(t.push({ID:n,ActionIndex:16,Name:i18nextko.t("roHomeMyTeamAlerts"),Class:"icon iconAlerts",badge:VTPortal.roApp.supervisorBadge}),n=n+1),t.push({ID:n,ActionIndex:17,Name:i18nextko.t("roHomeMyTeamRequests"),Class:"icon iconRequests"}),n=n+1,VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.OnBoardings&&VTPortal.roApp.isSaas()&&!VTPortal.roApp.isCegidHub()&&(t.push({ID:n,ActionIndex:20,Name:"onboarding",Class:"icon iconOB"}),n=n+1),VTPortal.roApp.empPermissions()!=null&&VTPortal.roApp.empPermissions().Terminals&&VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SharedPortal&&(t.push({ID:n,ActionIndex:28,Name:i18nextko.t("roConfiguration"),Class:"icon iconConfiguration"}),n=n+1);else{t.push({ID:n,ActionIndex:1,Name:i18nextko.t("roHomeTitle"),Class:"icon iconHome"});n=n+1;t.push({ID:n,ActionIndex:24,Name:i18nextko.t("roDocumentsStatus"),Class:"icon iconStatus",badge:VTPortal.roApp.userStatusBadge});n=n+1;t.push({ID:n,ActionIndex:2,Name:i18nextko.t("roGHMenuTitle"),Class:"icon iconGH"});n=n+1;t.push({ID:n,ActionIndex:3,Name:i18nextko.t("roPunchesTitle"),Class:"icon iconPunches"});n=n+1;try{VTPortal.roApp.empPermissions()!=null&&(VTPortal.roApp.empPermissions().Requests[3].Permission||VTPortal.roApp.empPermissions().Requests[14].Permission)&&(t.push({ID:n,ActionIndex:4,Name:i18nextko.t("roHomeWorkingTitle"),Class:"icon iconHW"}),n=n+1)}catch(r){}t.push({ID:n,ActionIndex:6,Name:i18nextko.t("roHomeLeavesTitle"),Class:"icon iconLeaves"});n=n+1;t.push({ID:n,ActionIndex:7,Name:i18nextko.t("roHomeProfile"),Class:"icon iconProfile"})}else if(VTPortal.roApp.db.settings.supervisorPortalEnabled)if(VTPortal.roApp.impersonatedIDEmployee==-1){t.push({ID:n,ActionIndex:1,Name:i18nextko.t("roHomeTitle"),Class:"icon iconHome"});n=n+1;t.push({ID:n,ActionIndex:24,Name:i18nextko.t("roDocumentsStatus"),Class:"icon iconStatus",badge:VTPortal.roApp.userStatusBadge});n=n+1;t.push({ID:n,ActionIndex:18,Name:i18nextko.t("roHomeTeam"),Class:"icon iconTeam",badge:VTPortal.roApp.supervisorBadge});n=n+1;t.push({ID:n,ActionIndex:2,Name:i18nextko.t("roGHMenuTitle"),Class:"icon iconGH"});n=n+1;VTPortal.roApp.DailyRecordEnabled()&&(t.push({ID:n,ActionIndex:22,Name:i18nextko.t("roDailyRecord"),Class:"icon iconDailyRecord"}),n=n+1);t.push({ID:n,ActionIndex:3,Name:i18nextko.t("roPunchesTitle"),Class:"icon iconPunches"});n=n+1;VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.OnBoardings&&VTPortal.roApp.isSaas()&&VTPortal.roApp.isCegidHub()==!1&&(t.push({ID:n,ActionIndex:20,Name:"onboarding",Class:"icon iconOB"}),n=n+1);VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.Communiques&&VTPortal.roApp.isCegidHub()==!1&&VTPortal.roApp.isCommuniquesEnabled()&&(t.push({ID:n,ActionIndex:19,Name:i18nextko.t("roHomeCommunique"),Class:"icon iconCommuniquees"}),n=n+1);VTPortal.roApp.isChannelsEnabled()&&(t.push({ID:n,ActionIndex:23,Name:i18nextko.t("roHomeChannels"),Class:"icon iconChannels"}),n=n+1);try{VTPortal.roApp.empPermissions()!=null&&(VTPortal.roApp.empPermissions().Requests[3].Permission||VTPortal.roApp.empPermissions().Requests[14].Permission)&&(t.push({ID:n,ActionIndex:4,Name:i18nextko.t("roHomeWorkingTitle"),Class:"icon iconHW"}),n=n+1)}catch(r){}t.push({ID:n,ActionIndex:5,Name:i18nextko.t("roHomeDocumentsTitle"),Class:"icon iconDocuments"});n=n+1;t.push({ID:n,ActionIndex:6,Name:i18nextko.t("roHomeLeavesTitle"),Class:"icon iconLeaves"});n=n+1;t.push({ID:n,ActionIndex:7,Name:i18nextko.t("roHomeProfile"),Class:"icon iconProfile"});VTPortal.roApp.empPermissions()!=null&&VTPortal.roApp.empPermissions().Terminals&&VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SharedPortal&&(t.push({ID:n,ActionIndex:28,Name:i18nextko.t("roConfiguration"),Class:"icon iconConfiguration"}),n=n+1)}else{t.push({ID:n,ActionIndex:1,Name:i18nextko.t("roHomeTitle"),Class:"icon iconHome"});n=n+1;t.push({ID:n,ActionIndex:24,Name:i18nextko.t("roDocumentsStatus"),badge:VTPortal.roApp.userStatusBadge,Class:"icon iconStatus"});n=n+1;t.push({ID:n,ActionIndex:2,Name:i18nextko.t("roGHMenuTitle"),Class:"icon iconGH"});n=n+1;t.push({ID:n,ActionIndex:3,Name:i18nextko.t("roPunchesTitle"),Class:"icon iconPunches"});n=n+1;try{VTPortal.roApp.empPermissions()!=null&&(VTPortal.roApp.empPermissions().Requests[3].Permission||VTPortal.roApp.empPermissions().Requests[14].Permission)&&(t.push({ID:n,ActionIndex:4,Name:i18nextko.t("roHomeWorkingTitle"),Class:"icon iconHW"}),n=n+1)}catch(r){}t.push({ID:n,ActionIndex:6,Name:i18nextko.t("roHomeLeavesTitle"),Class:"icon iconLeaves"});n=n+1;t.push({ID:n,ActionIndex:7,Name:i18nextko.t("roHomeProfile"),Class:"icon iconProfile"})}else{t.push({ID:n,ActionIndex:1,Name:i18nextko.t("roHomeTitle"),Class:"icon iconHome"});n=n+1;t.push({ID:n,ActionIndex:24,Name:i18nextko.t("roDocumentsStatus"),badge:VTPortal.roApp.userStatusBadge,Class:"icon iconStatus"});n=n+1;t.push({ID:n,ActionIndex:2,Name:i18nextko.t("roGHMenuTitle"),Class:"icon iconGH"});n=n+1;VTPortal.roApp.DailyRecordEnabled()&&(t.push({ID:n,ActionIndex:22,Name:i18nextko.t("roDailyRecord"),Class:"icon iconDailyRecord"}),n=n+1);t.push({ID:n,ActionIndex:3,Name:i18nextko.t("roPunchesTitle"),Class:"icon iconPunches"});n=n+1;VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.Communiques&&VTPortal.roApp.isCegidHub()==!1&&VTPortal.roApp.isCommuniquesEnabled()&&(t.push({ID:n,ActionIndex:19,Name:i18nextko.t("roHomeCommunique"),Class:"icon iconCommuniquees"}),n=n+1);VTPortal.roApp.isChannelsEnabled()&&(t.push({ID:n,ActionIndex:23,Name:i18nextko.t("roHomeChannels"),Class:"icon iconChannels"}),n=n+1);try{VTPortal.roApp.empPermissions()!=null&&(VTPortal.roApp.empPermissions().Requests[3].Permission||VTPortal.roApp.empPermissions().Requests[14].Permission)&&(t.push({ID:n,ActionIndex:4,Name:i18nextko.t("roHomeWorkingTitle"),Class:"icon iconHW"}),n=n+1)}catch(r){}t.push({ID:n,ActionIndex:5,Name:i18nextko.t("roHomeDocumentsTitle"),Class:"icon iconDocuments"});n=n+1;t.push({ID:n,ActionIndex:6,Name:i18nextko.t("roHomeLeavesTitle"),Class:"icon iconLeaves"});n=n+1;t.push({ID:n,ActionIndex:7,Name:i18nextko.t("roHomeProfile"),Class:"icon iconProfile"});n=n+1}if(VTPortal.roApp.isTimeGate())i();else{let r=VTPortal.roApp.db.settings.getCacheDS("weblinks");if(r==null||window.VTPortalUtils.needToRefresh("weblinks"))new WebServiceRobotics(function(r){if(r.Status==window.VTPortalUtils.constants.OK.value){VTPortal.roApp.db.settings.updateCacheDS("weblinks",r.Value);let i=r.Value.filter(function(n){return n.ShowOnPortal===!0});i.length===1?(t.push({ID:n,ActionIndex:30,Name:i[0].Title,Class:"icon iconWeblink",URL:i[0].URL}),n=n+1):i.length>1&&(t.push({ID:n,ActionIndex:29,Name:i18nextko.t("roWebLinksTitle"),Class:"icon iconWeblink"}),n=n+1)}i()},function(){i()}).GetAllPortalWebLinks();else if(r!=null&&(r.length==0||r.length>0&&typeof r[0].ShowOnPortalDashboard!="undefined")){let u=r.filter(function(n){return n.ShowOnPortal===!0});u.length===1?(t.push({ID:n,ActionIndex:30,Name:u[0].Title,Class:"icon iconWeblink",URL:u[0].URL}),n=n+1):u.length>1&&(t.push({ID:n,ActionIndex:29,Name:i18nextko.t("roWebLinksTitle"),Class:"icon iconWeblink"}),n=n+1);i()}else VTPortal.roApp.db.settings.markForRefresh(["weblinks"]),i()}}var u=ko.observable(!1),f=function(n){var t=swfobject.getFlashPlayerVersion(),i,r,u;if(!t.major&&!t.minor&&!t.release){$("#"+n.htmlElementId).html("<div class='missing-flash'>Flash player isn't installed.<\/div>");i=$("<a />").text("Install Adobe Flash Player").attr("href","http://get.adobe.com/flashplayer/").attr("target","_blank");$(".missing-flash").append(i);return}r={allowScriptAccess:"always"};u={id:n.htmlElementId};swfobject.embedSWF("http://www.youtube.com/v/"+n.id+"?enablejsapi=1&playerapiid=ytplayer&version=3",n.htmlElementId,n.width,n.height,n.flashPlayerVersion,null,null,r,u)},e=function(n){var i=n.getTime(),r=(new Date).getTime(),t=Math.floor((r-i)/864e5),u=Math.floor((r-i)/36e5),f=Math.ceil((r-i)/6e4);return t===0?u>0?u+" hours ago":f>0?f+" minutes ago":"Now":t<7?t+" days ago":t<31?Math.floor(t/7)+" weeks ago":t<365?Math.floor(t/31)+" months ago":t>=365?t+" days ago":t},o=function(){alert("Not implemented for the demo")},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},h=function(n){for(i in window.VTPortalUtils.constants)if(window.VTPortalUtils.constants[i].value==n)return window.VTPortalUtils.constants[i].tag;return""},c=function(){VTPortal.roApp.adfsEnabled()&&VTPortal.roApp.userName("");VTPortal.roApp.loggedIn=!1;VTPortal.roApp.db.settings.adfsCredential="";VTPortal.roApp.db.settings.password="";VTPortal.roApp.db.settings.rememberLoginApp="";VTPortal.roApp.db.settings.rememberLogin=!1;VTPortal.roApp.db.settings.save();VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.supervisedEmployees=[];VTPortal.roApp.LastLogin(null);VTPortal.roApp.zonesDS(null);VTPortal.roApp.automaticLogin=!1;VTPortal.roApp.adfsLoginInprogress=!1;localStorage.setItem("adfsLoginInprogress","false");VTPortal.roApp.zonesDS(null);VTPortal.roApp.zonesDataSource=ko.observable(new DevExpress.data.DataSource({store:[],searchOperation:"contains",searchExpr:"Name"}));VTPortalUtils.causes=null;VTPortal.roApp.causesDataSource(new DevExpress.data.DataSource({store:[],searchOperation:"contains",searchExpr:"Name"}));VTPortal.roApp.refreshId!=-1&&(clearTimeout(VTPortal.roApp.refreshId),VTPortal.roApp.refreshId=-1)},l=function(n){if(n.Status==window.VTPortalUtils.constants.OK.value){if(VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()+1),VTPortalUtils.utils.onLogoutResetParameters(),typeof cordova!="undefined"&&typeof cordova.InAppBrowser!="undefined")inAppBrowserRef=cordova.InAppBrowser.open(window.location.href,"_blank","usewkwebview=yes,hidespinner=yes,hidden=yes,location=no,hideurlbar=yes,hidenavigationbuttons=yes,toolbar=no,clearcache=yes,clearsessioncache=yes"),inAppBrowserRef.addEventListener("loadstop",function(){inAppBrowserRef.close();inAppBrowserRef=null;VTPortal.roApp.db.settings.isTimeGate==!0?VTPortal.app.navigate("TimeGate",{root:!0}):VTPortal.app.navigate("login",{root:!0})}),VTPortal.roApp.db.settings.isTimeGate==!0?VTPortal.app.navigate("TimeGate",{root:!0}):VTPortal.app.navigate("login",{root:!0});else VTPortal.roApp.db.settings.isTimeGate==!0?VTPortal.app.navigate("TimeGate",{root:!0}):VTPortal.app.navigate("login",{root:!0});VTPortal.roApp.wsRequestCounter()>0&&VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()-1)}else VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorClosingSession"),"error",0)},a=function(){if(VTPortal.roApp.wsRequestCounter(VTPortal.roApp.wsRequestCounter()+1),VTPortal.roApp.adfsEnabled()&&VTPortal.roApp.userName(""),VTPortal.roApp.loggedIn=!1,VTPortal.roApp.db.settings.adfsCredential="",VTPortal.roApp.db.settings.password="",VTPortal.roApp.db.settings.save(),VTPortal.roApp.impersonatedIDEmployee=-1,VTPortal.roApp.supervisedEmployees=[],VTPortal.roApp.automaticLogin=!1,VTPortal.roApp.refreshId!=-1&&(clearTimeout(VTPortal.roApp.refreshId),VTPortal.roApp.refreshId=-1),typeof cordova!="undefined"&&typeof cordova.InAppBrowser!="undefined")inAppBrowserRef=cordova.InAppBrowser.open(window.location.href,"_blank","usewkwebview=yes,hidespinner=yes,hidden=yes,location=no,hideurlbar=yes,hidenavigationbuttons=yes,toolbar=no,clearcache=yes,clearsessioncache=yes"),inAppBrowserRef.addEventListener("loadstop",function(){inAppBrowserRef.close();inAppBrowserRef=null;VTPortal.app.navigate("login",{root:!0})}),VTPortal.app.navigate("login",{root:!0});else VTPortal.app.navigate("login",{root:!0})},v=function(){VTPortal.roApp.securityToken="";VTPortal.roApp.loggedIn=!1;VTPortal.roApp.userId=-1;VTPortal.roApp.db.settings.deleteRefreshTimestamps();VTPortal.roApp.AnywhereLicense=!1;VTPortal.roApp.RequiereFineLocation=!0;VTPortal.roApp.DailyRecordEnabled(!1);VTPortal.roApp.DailyRecordPatternEnabled(!1);VTPortal.roApp.failedLogins(VTPortal.roApp.failedLogins()+1);VTPortal.roApp.lastRequestFailed(!0);VTPortal.roApp.failedLogins()>3?(VTPortal.roApp.db.settings.adfsCredential="",VTPortal.roApp.db.settings.password="",VTPortal.roApp.db.settings.save(),VTPortal.roApp.failedLogins(0),VTPortal.app.navigate("login",{root:!0})):setTimeout(function(){VTPortal.roApp.loggedIn||VTPortalUtils.utils.loginIfNecessary()},3e4)},y=function(){return{showPane:!1,height:110,shading:!0,shadingColor:"rgba(255,255,255,0.5)",indicatorSrc:"Images/DoubleRing.gif",visible:VTPortal.roApp.loadPanelVisible}},p=function(n,t){var i=t;new WebServiceRobotics(function(n){n.Status==window.VTPortalUtils.constants.OK.value?n.Result?(VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestDeleted"),"success",3e3),i==17?VTPortal.app.navigate("myDailyRecord",{root:!0}):VTPortal.roApp.redirectAtHome()):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestNotExists"),"error",0):VTPortalUtils.utils.processErrorMessage(n)},function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingRequest"),"error",0)}).deleteRequest(n)},w=function(n){new WebServiceRobotics(function(n){n.Status==window.VTPortalUtils.constants.OK.value?n.Result?VTPortal.roApp.loadInitialData(!1,!1,!0,!1,!1):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestNotExists"),"error",0):VTPortalUtils.utils.processErrorMessage(n)},function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingRequest"),"error",0)}).setRequestReaded(n)},b=function(n,t,i,r,u,f,e){var l=i18nextko.i18n.t("roContinue"),a=i18nextko.i18n.t("roCancel"),o,h,s,v,c;if(typeof f!="undefined"&&f!=null&&f!=""&&(l=f),typeof e!="undefined"&&e!=null&&e!=""&&(a=e),i==0){if(VTPortalUtils.utils.isShowingPopup()==!1){VTPortalUtils.utils.isShowingPopup(!0);o="";h=t;switch(t){case"success":o=i18nextko.i18n.t("roSuccessTitle");break;case"error":o=i18nextko.i18n.t("roErrorTitle");break;case"warning":o=i18nextko.i18n.t("roWarningTitle");break;case"info":o=i18nextko.i18n.t("roInfoTitle");break;default:h=t.split("_")[0];o=i18nextko.i18n.t(t.split("_")[1])}s=$("<div>").attr("class","roPopupMsg");s.append($("<div>").attr("class","roPopupIcon ro-icon-"+h));s.append($("<div>").attr("class","roPopupText").text(n));v=$("<div>").attr("style","clear:both");c=DevExpress.ui.dialog.custom({title:o,message:$("<div>").append(s,v).html(),css:"roCustomDialog",buttons:[{text:l,onClick:function(){return"continue"}},{text:a,onClick:function(){return"exit"}}]});c.show().done(function(n){switch(n){case"continue":typeof r!="undefined"&&r();break;case"exit":typeof u!="undefined"&&u()}c.hide();VTPortalUtils.utils.isShowingPopup(!1)})}}else DevExpress.ui.notify(n,t,i)},k=function(n,t,i,r){var u,e,f,s,o;if(i==0){if(VTPortalUtils.utils.isShowingPopup()==!1){VTPortalUtils.utils.isShowingPopup(!0);u="";e=t;switch(t){case"success":u=i18nextko.i18n.t("roSuccessTitle");break;case"error":u=i18nextko.i18n.t("roErrorTitle");break;case"warning":u=i18nextko.i18n.t("roWarningTitle");break;case"info":u=i18nextko.i18n.t("roInfoTitle");break;default:e=t.split("_")[0];u=i18nextko.i18n.t(t.split("_")[1])}f=$("<div>").attr("class","roPopupMsg");f.append($("<div>").attr("class","roPopupIcon ro-icon-"+e));f.append($("<div>").attr("class","roPopupText").text(n));s=$("<div>").attr("style","clear:both");o=DevExpress.ui.dialog.custom({title:u,message:$("<div>").append(f,s).html(),css:"roCustomDialog",buttons:[{text:i18nextko.i18n.t("roClose"),onClick:function(){return"exit"}}]});o.show().done(function(n){switch(n){case"exit":typeof r!="undefined"&&r()}o.hide();VTPortalUtils.utils.isShowingPopup(!1)})}}else typeof r!="undefined"&&r(),DevExpress.ui.notify(n,t,i)},d=function(n,t){typeof n.CustomErrorText=="undefined"&&(n.CustomErrorText="");n.CustomErrorText!=""?VTPortalUtils.utils.notifyMesage(n.CustomErrorText,"error",0,t):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"error",0,t)},g=function(n,t,i){switch(n.Status){case window.VTPortalUtils.constants.REQUEST_ERROR_CustomError.value:VTPortalUtils.utils.notifyMesage(n.StatusErrorMsg,"error",0,i);break;case window.VTPortalUtils.constants.REQUEST_PENDING_VALIDATION.value:case window.VTPortalUtils.constants.REQUEST_WARNING_NeedConfirmation.value:VTPortalUtils.utils.questionMessage(n.StatusErrorMsg,"warning",0,t,i);break;case window.VTPortalUtils.constants.REQUEST_DENIED_DUE_REQUESTVALIDATION.value:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status))+" "+n.StatusErrorMsg,"warning",0,function(){VTPortal.roApp.redirectAtHome()});break;case window.VTPortalUtils.constants.REQUEST_DENIED_DUE_SERVERDATA.value:VTPortalUtils.utils.notifyMesage(n.StatusErrorMsg,"error",0,function(){VTPortal.roApp.redirectAtHome()});break;default:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"error",0,i)}},nt=function(n,t,i){switch(n.Status){case window.VTPortalUtils.constants.REQUEST_ERROR_CustomError.value:VTPortalUtils.utils.notifyMesage(n.StatusErrorMsg,"error",0,i);break;case window.VTPortalUtils.constants.REQUEST_WARNING_NeedConfirmation.value:VTPortalUtils.utils.questionMessage(n.StatusErrorMsg,"warning",0,t,i);break;case window.VTPortalUtils.constants.ERROR_CREATING_NOTIFICATION.value:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"warning",1500,function(){VTPortal.roApp.redirectAtHome()});break;case window.VTPortalUtils.constants.REQUEST_PENDING_VALIDATION.value:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status))+" "+n.StatusErrorMsg,"warning",0,function(){VTPortal.roApp.redirectAtHome()});break;case window.VTPortalUtils.constants.REQUEST_DENIED_DUE_REQUESTVALIDATION.value:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status))+" "+n.StatusErrorMsg,"warning",0,function(){VTPortal.roApp.redirectAtHome()});break;case window.VTPortalUtils.constants.REQUEST_DENIED_DUE_SERVERDATA.value:VTPortalUtils.utils.notifyMesage(n.StatusErrorMsg,"error",0,function(){VTPortal.roApp.redirectAtHome()});break;default:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"error",0,i)}},tt=function(n){switch(n.Status){case window.VTPortalUtils.constants.LOGIN_RESULT_LOW_STRENGHT_ERROR.value:case window.VTPortalUtils.constants.LOGIN_RESULT_MEDIUM_STRENGHT_ERROR.value:case window.VTPortalUtils.constants.LOGIN_RESULT_HIGH_STRENGHT_ERROR.value:case window.VTPortalUtils.constants.LOGIN_PASSWORD_EXPIRED.value:async function t(){VTPortal.app.navigate("home/1",{root:!0})}VTPortal.roApp.db.settings.save(async function(){await t();setTimeout(function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"warning",0)},200)});break;case window.VTPortalUtils.constants.LOGIN_NEED_TEMPORANY_KEY.value:case window.VTPortalUtils.constants.LOGIN_TEMPORANY_KEY_EXPIRED.value:case window.VTPortalUtils.constants.LOGIN_INVALID_VALIDATION_CODE.value:VTPortal.roApp.db.settings.save(function(){VTPortal.app.navigate("home/2",{root:!0})});break;default:VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(n.Status)),"error",0);VTPortal.roApp.securityToken="";VTPortal.roApp.loggedIn=!1;VTPortal.roApp.userId=-1;VTPortal.roApp.AnywhereLicense=!1;VTPortal.roApp.DailyRecordEnabled(!1);VTPortal.roApp.DailyRecordPatternEnabled(!1);VTPortal.roApp.RequiereFineLocation=!0;VTPortal.roApp.db.settings.save(function(){VTPortal.app.navigate("login",{root:!0})})}},it=async function(n,t){var u=window.VTPortal.roApp.db.settings,f=!1,i,r;if(VTPortal.roApp.db.settings.adfsCredential!=""&&(i=VTPortal.roApp.db.settings.adfsCredential.decodeBase64().split("#"),VTPortal.roApp.guidToken=i[0],VTPortal.roApp.securityToken=i[1],i.length>2&&(VTPortal.roApp.companyID=VTPortal.roApp.db.settings.companyID.indexOf(i[2])==0?VTPortal.roApp.db.settings.companyID:i[2]),f=!0),!VTPortal.roApp.serverURL.valid){let n=new Robotics.Client.ValidateURL;VTPortal.roApp.serverURL=await n.getURLforClient(VTPortal.roApp.db.settings.companyID,VTPortal.roApp.db.settings.wsURL,VTPortal.roApp.isModeApp())}if(window.VTPortal.roApp.loggedIn)typeof t=="function"&&t();else if(VTPortal.roApp.serverURL.valid)VTPortal.roApp.serverURL.isMT?VTPortal.roApp.isTimeGate()?new WebServiceRobotics(function(){window.VTPortalUtils.utils.clearTimegateData();VTPortal.app.navigate("TimeGate",{root:!0})},function(){window.VTPortalUtils.utils.clearTimegateData();VTPortal.app.navigate("TimeGate",{root:!0})},VTPortal.roApp.serverURL.url).logout(VTPortal.roApp.db.settings.UUID):!VTPortal.roApp.isModeApp()&&VTPortal.roApp.getNumericVersion()>=VTPortal.roApp.getNumericVersion("3.30.0")?f?new WebServiceRobotics(function(n){VTPortal.roApp.adfsLoginInprogress=!1;localStorage.setItem("adfsLoginInprogress","false");this.VTPortal.roApp.failedLogins(0);window.VTPortalUtils.utils.onCheckUserSession(n,t);window.VTPortalUtils.utils.setActiveTab("home")},function(n){window.VTPortalUtils.utils.onLoginErrorFunc(n)},VTPortal.roApp.serverURL.url).getLoggedInUserInfo():new WebServiceRobotics(function(n){this.VTPortal.roApp.failedLogins(0);VTPortal.roApp.adfsLoginInprogress=!1;window.VTPortalUtils.utils.onCheckUserSession(n,t);window.VTPortalUtils.utils.setActiveTab("home")},function(n){window.VTPortalUtils.utils.onLoginErrorFunc(n)},VTPortal.roApp.serverURL.url).authenticateSession():f?new WebServiceRobotics(function(n){VTPortal.roApp.adfsLoginInprogress=!1;localStorage.setItem("adfsLoginInprogress","false");this.VTPortal.roApp.failedLogins(0);window.VTPortalUtils.utils.onCheckUserSession(n,t);window.VTPortalUtils.utils.setActiveTab("home")},function(n){window.VTPortalUtils.utils.onLoginErrorFunc(n)},VTPortal.roApp.serverURL.url).getLoggedInUserInfo():(r=u.password,r==""&&(r=u.rememberLoginApp),new WebServiceRobotics(function(n){VTPortalUtils.utils.onLoginCommitFunc(n,!1,t)},function(n){window.VTPortalUtils.utils.onLoginErrorFunc(n)},VTPortal.roApp.serverURL.url).login(u.login,r,"",VTPortal.roApp.infoVersion,n,!1)):(VTPortal.roApp.db.settings.MT=!1,localStorage.setItem("IsMT",VTPortal.roApp.db.settings.MT),VTPortal.roApp.db.settings.saveParameter("wsURL",function(){VTPortal.roApp.db.settings.saveParameter("ssl",function(){var n=window.location.href.substr(0,window.location.href.indexOf("index.html"));n=n.replace("2/","index.html");document.location.href=n})}));else window.VTPortalUtils.utils.onLogoutSuccessFunc({Status:0})},rt=function(n){if(VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.PasswordEncrypt){var t=n,i=CryptoJS.enc.Hex.parse("152a3243b4157617c81f2a6b1c2d3e4f"),r=CryptoJS.enc.Hex.parse("101a12641415161713391a1c1c1d9e1f"),u=CryptoJS.AES.encrypt(t,i,{iv:r});return u.toLocaleString()}return n},ut=function(n,t,i){var r,e,u,f;if(n.Status==window.VTPortalUtils.constants.OK.value){if(VTPortal.roApp.automaticLogin=!0,VTPortal.roApp.securityToken=n.Token,VTPortal.roApp.loggedIn=!0,VTPortal.roApp.userId=n.UserId,r=VTPortal.roApp.db.settings.deleteRefreshTimestamps(),VTPortal.roApp.AnywhereLicense=n.AnywhereLicense,VTPortal.roApp.DailyRecordEnabled(typeof n.DailyRecordEnabled!="undefined"?n.DailyRecordEnabled:!1),VTPortal.roApp.DailyRecordPatternEnabled(typeof n.DailyRecordPatternEnabled!="undefined"?n.DailyRecordPatternEnabled:!1),VTPortal.roApp.ShowPermissionsIcon(typeof n.ShowPermissionsIcon!="undefined"?n.ShowPermissionsIcon:!0),VTPortal.roApp.isImpersonateEnabled(typeof n.IsImpersonateEnabled!="undefined"?n.IsImpersonateEnabled:!0),VTPortal.roApp.isLatamMex(typeof n.IsLatamMex!="undefined"?n.IsLatamMex:!1),e=!1,typeof i!="undefined"&&i!=""?new WebServiceRobotics(function(){},function(){}).updateServerLanguage(i):typeof n.Language!="undefined"&&VTPortal.roApp.db.settings.language!=n.Language&&(r=!0,e=!0,VTPortal.roApp.db.settings.language=n.Language),VTPortal.roApp.setLanguage(window.VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.clientTimeZone=moment.tz.guess(!0),VTPortal.roApp.isSaas(n.IsSaas),moment(n.LastLogin).year()!=2079&&VTPortal.roApp.LastLogin(n.LastLogin),typeof n.IsCegidHub!="undefined"&&VTPortal.roApp.isCegidHub(n.IsCegidHub),typeof n.IsCommuniquesEnabled!="undefined"&&VTPortal.roApp.isCommuniquesEnabled(n.IsCommuniquesEnabled),typeof n.IsChannelsEnabled!="undefined"&&VTPortal.roApp.isChannelsEnabled(n.IsChannelsEnabled),new WebServiceRobotics(function(){},function(){}).updateServerTimeZone(VTPortal.roApp.clientTimeZone),VTPortal.roApp.db.settings.ApiVersion!=n.ApiVersion&&(VTPortal.roApp.db.emptyViewsCatalogs(),VTPortal.roApp.db.settings.ApiVersion=n.ApiVersion,r=!0),typeof n.Consent!="undefined"&&VTPortal.roApp.licenseConsent(n.Consent),VTPortal.roApp.db.settings.licenseAccepted!=n.LicenseAccepted&&(VTPortal.roApp.db.settings.licenseAccepted=n.LicenseAccepted,VTPortal.roApp.licenseAccepted(n.LicenseAccepted),r=!0),VTPortal.roApp.employeeId=typeof n.EmployeeId!="undefined"?n.EmployeeId:-1,VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&VTPortal.roApp.employeeId==-1?(VTPortal.roApp.db.settings.onlySupervisor!=!0&&(r=!0),VTPortal.roApp.db.settings.onlySupervisor=!0):(VTPortal.roApp.db.settings.onlySupervisor!=!1&&(r=!0),VTPortal.roApp.db.settings.onlySupervisor=!1),VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&(VTPortal.roApp.db.settings.supervisorPortalEnabled!=n.SupervisorPortalEnabled&&(r=!0),VTPortal.roApp.db.settings.supervisorPortalEnabled=n.SupervisorPortalEnabled),typeof n.ShowForbiddenSections!="undefined"&&(VTPortal.roApp.ShowForbiddenSections=typeof n.ShowForbiddenSections!="undefined"?n.ShowForbiddenSections:!0,VTPortal.roApp.ShowForbiddenSections!=VTPortal.roApp.db.settings.showForbiddenSections&&(VTPortal.roApp.db.settings.showForbiddenSections=VTPortal.roApp.ShowForbiddenSections,r=!0)),typeof n.ShowLogoutHome!="undefined"&&(VTPortal.roApp.showLogoutHome(typeof n.ShowLogoutHome!="undefined"?n.ShowLogoutHome:!0),VTPortal.roApp.showLogoutHome()!=VTPortal.roApp.db.settings.showLogoutHome&&(VTPortal.roApp.db.settings.showLogoutHome=VTPortal.roApp.showLogoutHome(),r=!0)),typeof n.ServerTimezone!="undefined"&&(VTPortal.roApp.serverTimeZone=n.ServerTimezone,VTPortal.roApp.serverTimeZone!=VTPortal.roApp.db.settings.serverTimezone&&(VTPortal.roApp.db.settings.serverTimezone=VTPortal.roApp.serverTimeZone,r=!0)),typeof n.HeaderMD5!="undefined"&&(VTPortal.roApp.HeaderMD5=n.HeaderMD5,VTPortal.roApp.HeaderMD5!=VTPortal.roApp.db.settings.HeaderMD5?(VTPortal.roApp.db.settings.HeaderMD5=VTPortal.roApp.HeaderMD5,r=!0,VTPortal.roApp.HeaderChanged(!0)):VTPortal.roApp.HeaderChanged(!1)),(VTPortal.roApp.db.settings.rememberLogin==!1||VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.rememberLoginApp==""||!VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.password!="")&&(r=!0),VTPortal.roApp.db.settings.rememberLogin=!0,VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.rememberLoginApp==""&&(VTPortal.roApp.db.settings.rememberLoginApp=VTPortal.roApp.db.settings.password),VTPortal.roApp.isModeApp()||(VTPortal.roApp.db.settings.password=""),r&&VTPortal.roApp.db.settings.save(),typeof n.SSOServerEnabled!="undefined"&&n.SSOServerEnabled==!0&&n.SSOUserLoggedIn==!0?(VTPortal.roApp.ssoEnabled(!0),VTPortal.roApp.ssoUserName(n.SSOUserName)):(VTPortal.roApp.ssoEnabled(!1),VTPortal.roApp.ssoUserName("")),u="",f=localStorage.getItem("VersionEnabled"),typeof n.DefaultVersion!="undefined")if(n.DefaultVersion=="V1"){if(typeof f!="undefined"&&parseInt(f,10)==2){if(VTPortal.roApp.isModeApp()){setTimeout(function(){u=window.location.href.substr(0,window.location.href.indexOf("index.html"));localStorage.setItem("VersionEnabled","1");document.location.href=u+"../1/index.html"},1e3);return}setTimeout(function(){u=window.location.href.substr(0,window.location.href.indexOf("index.aspx"));localStorage.setItem("VersionEnabled","1");document.location.href=u+"../1/indexv1.aspx"},1e3);return}}else if(typeof f!="undefined"&&parseInt(f,10)==1){if(VTPortal.roApp.isModeApp()){setTimeout(function(){u=window.location.href.substr(0,window.location.href.indexOf("index.html"));localStorage.setItem("VersionEnabled","2");document.location.href=u+"../2/index.html"},1e3);return}setTimeout(function(){u=window.location.href.substr(0,window.location.href.indexOf("index.aspx"));localStorage.setItem("VersionEnabled","2");document.location.href=u+"../2/indexv2.aspx"},1e3);return}VTPortal.roApp.db.settings.onlySupervisor?(VTPortal.app.createNavigation(VTPortal.config.supervisorNavigation),VTPortal.app.renderNavigation()):VTPortal.roApp.db.settings.supervisorPortalEnabled?(VTPortal.app.createNavigation(VTPortal.config.navigation),VTPortal.app.renderNavigation()):(VTPortal.app.createNavigation(VTPortal.config.navigationEmployee),VTPortal.app.renderNavigation());e==!0?setTimeout(function(){VTPortal.app.navigate("loading",{root:!0})},200):VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,t)}else VTPortal.roApp.loggedIn=!1,VTPortal.roApp.db.settings.adfsCredential="",VTPortal.roApp.db.settings.save(),VTPortal.app.navigate("login",{root:!0})},ft=function(){VTPortal.roApp.db.settings.lastStatusRefresh.userId=-999;VTPortal.roApp.db.settings.deleteVTPortalUserData();VTPortal.roApp.licenseAccepted(!0);VTPortal.roApp.db.settings.deleteRefreshTimestamps();VTPortal.roApp.impersonatedIDEmployee=-1;VTPortal.roApp.supervisedEmployees=[];VTPortal.roApp.userId=-1;VTPortal.roApp.userStatus(null);VTPortal.roApp.userCommuniques(null);VTPortal.roApp.userSurveys(null);VTPortal.roApp.userTelecommute(null);VTPortal.roApp.userAlerts(null);VTPortal.roApp.timeGateMode(null)},et=function(n,t,i){let r=VTPortal.roApp.isTimeGate(),u=[0,-59,-60,-61,-62,-63,-64];if(r&&(u=[0]),u.includes(n.Status)&&n.Token!=null){let u=!1;r?(VTPortal.roApp.db.settings.lastStatusRefresh.userId=-999,VTPortal.roApp.db.settings.deleteVTPortalUserData(),VTPortal.roApp.licenseAccepted(!0)):(VTPortal.roApp.db.settings.rememberLogin=!0,VTPortal.roApp.automaticLogin=!0,t||typeof n.DefaultLanguage!="undefined"&&VTPortal.roApp.db.settings.language!=n.DefaultLanguage&&(u=!0,VTPortal.roApp.db.settings.language=n.DefaultLanguage));VTPortal.roApp.securityToken=n.Token;VTPortal.roApp.loggedIn=!0;VTPortal.roApp.userId=n.UserId;VTPortal.roApp.db.settings.deleteRefreshTimestamps();localStorage.setItem("ApiVersion",n.ApiVersion);typeof n.ServerTimezone!="undefined"&&(VTPortal.roApp.serverTimeZone=n.ServerTimezone,VTPortal.roApp.serverTimeZone!=VTPortal.roApp.db.settings.serverTimezone&&(VTPortal.roApp.db.settings.serverTimezone=VTPortal.roApp.serverTimeZone));VTPortal.roApp.db.settings.ApiVersion!=n.ApiVersion&&(VTPortal.roApp.db.emptyViewsCatalogs(),VTPortal.roApp.db.settings.ApiVersion=n.ApiVersion);typeof n.Consent!="undefined"&&VTPortal.roApp.licenseConsent(n.Consent);VTPortal.roApp.licenseAccepted()!=n.LicenseAccepted&&(VTPortal.roApp.db.settings.licenseAccepted=n.LicenseAccepted,VTPortal.roApp.licenseAccepted(n.LicenseAccepted));typeof n.IsSaas!="undefined"&&VTPortal.roApp.isSaas(n.IsSaas);moment(n.LastLogin).year()!=2079&&VTPortal.roApp.LastLogin(n.LastLogin);typeof n.IsCegidHub!="undefined"&&VTPortal.roApp.isCegidHub(n.IsCegidHub);typeof n.IsCommuniquesEnabled!="undefined"&&VTPortal.roApp.isCommuniquesEnabled(n.IsCommuniquesEnabled);typeof n.IsChannelsEnabled!="undefined"&&VTPortal.roApp.isChannelsEnabled(n.IsChannelsEnabled);typeof n.ShowLegalText!="undefined"&&n.ShowLegalText?(VTPortal.roApp.showLegalText(n.ShowLegalText),localStorage.setItem("ShowLegalText.VTPortal","1")):(VTPortal.roApp.showLegalText("0"),localStorage.setItem("ShowLegalText.VTPortal","0"));VTPortal.roApp.DailyRecordPatternEnabled(typeof n.DailyRecordPatternEnabled!="undefined"?n.DailyRecordPatternEnabled:!1);VTPortal.roApp.AnywhereLicense=n.AnywhereLicense;VTPortal.roApp.RequiereFineLocation=typeof n.RequiereFineLocation!="undefined"?n.RequiereFineLocation:!0;VTPortal.roApp.DailyRecordEnabled(typeof n.DailyRecordEnabled!="undefined"?n.DailyRecordEnabled:!1);VTPortal.roApp.ShowPermissionsIcon(typeof n.ShowPermissionsIcon!="undefined"?n.ShowPermissionsIcon:!0);VTPortal.roApp.ShowForbiddenSections=typeof n.ShowForbiddenSections!="undefined"?n.ShowForbiddenSections:!0;VTPortal.roApp.showLogoutHome(typeof n.ShowLogoutHome!="undefined"?n.ShowLogoutHome:!0);VTPortal.roApp.isAD=n.IsAD;VTPortal.roApp.db.settings.showForbiddenSections=VTPortal.roApp.ShowForbiddenSections;VTPortal.roApp.db.settings.showLogoutHome=n.ShowLogoutHome;VTPortal.roApp.db.settings.isAD=n.IsAD;VTPortal.roApp.db.settings.AnywhereLicense=n.AnywhereLicense;VTPortal.roApp.db.settings.RequiereFineLocation=typeof n.RequiereFineLocation!="undefined"?n.RequiereFineLocation:!0;VTPortal.roApp.isImpersonateEnabled(typeof n.IsImpersonateEnabled!="undefined"?n.IsImpersonateEnabled:!0);VTPortal.roApp.isLatamMex(typeof n.IsLatamMex!="undefined"?n.IsLatamMex:!1);VTPortal.roApp.employeeId=typeof n.EmployeeId!="undefined"?n.EmployeeId:-1;VTPortal.roApp.db.settings.onlySupervisor=VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&VTPortal.roApp.employeeId==-1?!0:!1;VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&(VTPortal.roApp.db.settings.supervisorPortalEnabled=n.SupervisorPortalEnabled);VTPortal.roApp.db.settings.save(function(){r?t?(VTPortal.roApp.userStatus(null),VTPortal.roApp.userCommuniques(null),VTPortal.roApp.userSurveys(null),VTPortal.roApp.userTelecommute(null),VTPortal.roApp.userAlerts(null),VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,function(){VTPortal.roApp.redirectAtHome()})):u?setTimeout(function(){VTPortal.app.navigate("loading",{root:!0})},200):VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,i):[-59,-60,-61,-62,-63,-64].includes(n.Status)&&n.Token!=""?VTPortalUtils.utils.processSecurityMessage(n):t?(VTPortal.roApp.userStatus(null),VTPortal.roApp.userCommuniques(null),VTPortal.roApp.userSurveys(null),VTPortal.roApp.userTelecommute(null),VTPortal.roApp.userAlerts(null),VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,function(){VTPortal.roApp.redirectAtHome()})):u?setTimeout(function(){VTPortal.app.navigate("loading",{root:!0})},200):VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,i)})}else r||VTPortalUtils.utils.processSecurityMessage(n)},ot=function(n,t){var i,r;VTPortal.roApp.lastRequestFailed(!1);VTPortal.roApp.offlineCounter(0);n.Status==window.VTPortalUtils.constants.OK.value?(VTPortal.roApp.automaticLogin=!0,VTPortal.roApp.securityToken=n.Token,VTPortal.roApp.loggedIn=!0,VTPortal.roApp.userId=n.UserId,i=VTPortal.roApp.db.settings.deleteRefreshTimestamps(),VTPortal.roApp.userStatus(null),VTPortal.roApp.userCommuniques(null),VTPortal.roApp.userSurveys(null),VTPortal.roApp.userTelecommute(null),VTPortal.roApp.userAlerts(null),VTPortal.roApp.AnywhereLicense=n.AnywhereLicense,VTPortal.roApp.RequiereFineLocation=typeof n.RequiereFineLocation!="undefined"?n.RequiereFineLocation:!0,VTPortal.roApp.DailyRecordEnabled(typeof n.DailyRecordEnabled!="undefined"?n.DailyRecordEnabled:!1),VTPortal.roApp.DailyRecordPatternEnabled(typeof n.DailyRecordPatternEnabled!="undefined"?n.DailyRecordPatternEnabled:!1),VTPortal.roApp.ShowPermissionsIcon(typeof n.ShowPermissionsIcon!="undefined"?n.ShowPermissionsIcon:!0),VTPortal.roApp.isImpersonateEnabled(typeof n.IsImpersonateEnabled!="undefined"?n.IsImpersonateEnabled:!0),VTPortal.roApp.isLatamMex(typeof n.IsLatamMex!="undefined"?n.IsLatamMex:!1),r=!1,typeof n.DefaultLanguage!="undefined"&&VTPortal.roApp.db.settings.language!=n.DefaultLanguage&&(i=!0,r=!0,VTPortal.roApp.db.settings.language=n.DefaultLanguage),VTPortal.roApp.setLanguage(window.VTPortal.roApp.getLanguageByID(VTPortal.roApp.db.settings.language).tag),VTPortal.roApp.db.settings.ApiVersion!=n.ApiVersion&&(VTPortal.roApp.db.emptyViewsCatalogs(),VTPortal.roApp.db.settings.ApiVersion=n.ApiVersion,i=!0),VTPortal.roApp.employeeId=typeof n.EmployeeId!="undefined"?n.EmployeeId:-1,VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&VTPortal.roApp.employeeId==-1?(VTPortal.roApp.db.settings.onlySupervisor!=!0&&(i=!0),VTPortal.roApp.db.settings.onlySupervisor=!0):(VTPortal.roApp.db.settings.onlySupervisor!=!1&&(i=!0),VTPortal.roApp.db.settings.onlySupervisor=!1),VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.SupervisorPortal&&(VTPortal.roApp.db.settings.supervisorPortalEnabled!=n.SupervisorPortalEnabled&&(i=!0),VTPortal.roApp.db.settings.supervisorPortalEnabled=n.SupervisorPortalEnabled),typeof n.ShowForbiddenSections!="undefined"&&(VTPortal.roApp.ShowForbiddenSections=typeof n.ShowForbiddenSections!="undefined"?n.ShowForbiddenSections:!0,VTPortal.roApp.ShowForbiddenSections!=VTPortal.roApp.db.settings.showForbiddenSections&&(VTPortal.roApp.db.settings.showForbiddenSections=VTPortal.roApp.ShowForbiddenSections,i=!0)),typeof n.ShowLogoutHome!="undefined"&&(VTPortal.roApp.showLogoutHome(typeof n.ShowLogoutHome!="undefined"?n.ShowLogoutHome:!0),VTPortal.roApp.showLogoutHome()!=VTPortal.roApp.db.settings.showLogoutHome&&(VTPortal.roApp.db.settings.showLogoutHome=VTPortal.roApp.showLogoutHome(),i=!0)),typeof n.ServerTimezone!="undefined"&&(VTPortal.roApp.serverTimeZone=n.ServerTimezone,VTPortal.roApp.serverTimeZone!=VTPortal.roApp.db.settings.serverTimezone&&(VTPortal.roApp.db.settings.serverTimezone=VTPortal.roApp.serverTimeZone,i=!0)),typeof n.Consent!="undefined"&&VTPortal.roApp.licenseConsent(n.Consent),VTPortal.roApp.licenseAccepted()!=n.LicenseAccepted&&(VTPortal.roApp.db.settings.licenseAccepted=n.LicenseAccepted,VTPortal.roApp.licenseAccepted(n.LicenseAccepted),i=!0),typeof n.HeaderMD5!="undefined"&&(VTPortal.roApp.HeaderMD5=n.HeaderMD5,VTPortal.roApp.HeaderMD5!=VTPortal.roApp.db.settings.HeaderMD5?(VTPortal.roApp.db.settings.HeaderMD5=VTPortal.roApp.HeaderMD5,i=!0,VTPortal.roApp.HeaderChanged(!0)):VTPortal.roApp.HeaderChanged(!1)),(VTPortal.roApp.db.settings.rememberLogin==!1||VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.rememberLoginApp==""||!VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.password!="")&&(i=!0),VTPortal.roApp.db.settings.rememberLogin=!0,VTPortal.roApp.isModeApp()&&VTPortal.roApp.db.settings.rememberLoginApp==""&&(VTPortal.roApp.db.settings.rememberLoginApp=VTPortal.roApp.db.settings.password),VTPortal.roApp.isModeApp()||(VTPortal.roApp.db.settings.password=""),i&&VTPortal.roApp.db.settings.save(),typeof n.IsSaas!="undefined"&&VTPortal.roApp.isSaas(n.IsSaas),moment(n.LastLogin).year()!=2079&&VTPortal.roApp.LastLogin(n.LastLogin),typeof n.IsCegidHub!="undefined"&&VTPortal.roApp.isCegidHub(n.IsCegidHub),typeof n.IsCommuniquesEnabled!="undefined"&&VTPortal.roApp.isCommuniquesEnabled(n.IsCommuniquesEnabled),typeof n.IsChannelsEnabled!="undefined"&&VTPortal.roApp.isChannelsEnabled(n.IsChannelsEnabled),typeof n.SSOServerEnabled!="undefined"&&n.SSOServerEnabled==!0&&n.SSOUserLoggedIn==!0?(VTPortal.roApp.ssoEnabled(!0),VTPortal.roApp.ssoUserName(n.SSOUserName)):(VTPortal.roApp.ssoEnabled(!1),VTPortal.roApp.ssoUserName("")),VTPortal.roApp.db.settings.onlySupervisor?(VTPortal.app.createNavigation(VTPortal.config.supervisorNavigation),VTPortal.app.renderNavigation()):VTPortal.roApp.db.settings.supervisorPortalEnabled?(VTPortal.app.createNavigation(VTPortal.config.navigation),VTPortal.app.renderNavigation()):(VTPortal.app.createNavigation(VTPortal.config.navigationEmployee),VTPortal.app.renderNavigation()),r==!0?setTimeout(function(){VTPortal.app.navigate("loading",{root:!0})},200):VTPortal.roApp.loadInitialData(!0,!0,!0,!0,!0,t)):VTPortalUtils.utils.processSecurityMessage(n)},st=function(n,t,i,r,u,f,e=true,o=-1){var v=function(){typeof f!="undefined"&&f()},s=new WebServiceRobotics(window.VTPortalUtils.utils.parsePunchResult(t,i,v)),h=u==!0?n.coords[0]:-1,c=u==!0?n.coords[1]:-1,l=u==!0?n.location:"",a=u==!0?n.fullAddress:"";switch(t){case"ta":s.setStatusWithPhoto(i.idCause,i.direction,h,c,"",l,a,u,r,i.nfcTag,i.tcType,e,o);break;case"task":s.setTaskPunchWithPhoto(i.idTask,i.idNewTask,i.complete,h,c,"",l,a,i.oldValues,i.newValues,u,r,i.tcType);break;case"cc":s.setCostCenterPunchWithPhoto(i.idCenter,h,c,"",l,a,u,r,i.tcType)}},t=function(n,t,i,r,u,f,e=true,o=-1){var a=r&&u,y=function(){typeof f!="undefined"&&f()},v=new WebServiceRobotics(window.VTPortalUtils.utils.parsePunchResult(t,i,y)),s=-1,h=-1,c="",l="";VTPortal.roApp.empPermissions().MustUseGPS&&r==!0&&(s=n.coords[0]);VTPortal.roApp.empPermissions().MustUseGPS&&r==!0&&(h=n.coords[1]);VTPortal.roApp.empPermissions().MustUseGPS&&r==!0&&(c=n.location);VTPortal.roApp.empPermissions().MustUseGPS&&r==!0&&(l=n.fullAddress);switch(t){case"ta":v.setStatus(i.idCause,i.direction,s,h,"",c,l,a,i.nfcTag,i.tcType,e,o);break;case"task":v.SetTaskPunch(i.idTask,i.idNewTask,i.complete,s,h,"",c,l,i.oldValues,i.newValues,a,i.tcType);break;case"cc":v.setCostCenterStatus(i.idCenter,s,h,"",c,l,a,i.tcType)}},r=function(n,i,r,u,f,e,o){VTPortal.roApp.empPermissions().MustUsePhoto&&Object.has(navigator,"camera")?navigator.camera.getPicture(function(t){st(n,i,r,t,u,f,e,o)},function(){VTPortalUtils.utils.isShowingPopup(!1);VTPortalUtils.utils.questionMessage(i18nextko.i18n.t("errorGettingPhoto"),"info",0,function(){t(n,i,r,u,!1,f,e,o)},function(){VTPortal.roApp.redirectAtHome()},i18nextko.i18n.t("roContinue"),i18nextko.i18n.t("roCancel"))},{quality:20,sourceType:Camera.PictureSourceType.CAMERA,destinationType:Camera.DestinationType.FILE_URI,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,saveToPhotoAlbum:!1,correctOrientation:!1,cameraDirection:1}):t(n,i,r,u,!0,f,e,o)},ht=function(n,i,u){if(VTPortal.roApp.punchInProgress(!0),VTPortal.roApp.AnywhereLicense){var f=Object.clone(VTPortal.roApp.currentLocationInfo(),!0);VTPortal.roApp.empPermissions().MustUseGPS&&!f.reliable?(VTPortalUtils.utils.isShowingPopup(!1),VTPortal.roApp.SelectedZone()==-1?VTPortalUtils.utils.questionMessage(i18nextko.i18n.t("errorGettingGPS"),"info",0,function(){r(f,n,i,!1,u,VTPortal.roApp.ReliableZone(),VTPortal.roApp.SelectedZone())},function(){VTPortal.roApp.redirectAtHome()},i18nextko.i18n.t("roContinue"),i18nextko.i18n.t("roCancel")):r(f,n,i,!1,u,VTPortal.roApp.ReliableZone(),VTPortal.roApp.SelectedZone())):r(f,n,i,!0,u,VTPortal.roApp.ReliableZone(),VTPortal.roApp.SelectedZone())}else t({coords:[0,0],location:"",fullAddress:"",reliable:!0},n,i,!0,!0,u)},ct=function(n){navigator.geolocation.getCurrentPosition(function(t){var r=VTPortal.roApp.currentLocationInfo();r.coords[0]!=t.coords.latitude||r.coords[1]!=t.coords.longitude||r.reliable==!1||r.location=="-"?(geocoder=new google.maps.Geocoder,geocoder.geocode({address:t.coords.latitude+","+t.coords.longitude,language:"es"},function(r,u){var f=VTPortal.roApp.currentLocationInfo();if(u==google.maps.GeocoderStatus.OK){for(i=0;i<r[0].address_components.length;i++)if(r[0].address_components[i].types[0]=="locality")try{f.location=r[0].address_components[i].long_name}catch(e){f.location="API Error parsing city"}try{f.fullAddress=r[0].formatted_address}catch(e){f.fullAddress="API Error parsing address"}f.coords=[t.coords.latitude,t.coords.longitude];f.reliable=!0;f.zone=VTPortal.roApp.getZoneOfCurrentLocation();VTPortal.roApp.currentLocationInfo(f)}else f=VTPortal.roApp.currentLocationInfo(),f.coords[0]=0,f.coords[1]=0,f.location="API Error parsing city",f.fullAddress="API Error parsing address",f.reliable=!1,f.zone=null,VTPortal.roApp.currentLocationInfo(f);typeof n!="undefined"&&n!=null&&n()})):typeof n!="undefined"&&n!=null&&n()},function(t){var i;t.code==1?(i=VTPortal.roApp.currentLocationInfo(),i.coords[0]=0,i.coords[1]=0,i.location="API Error parsing city",i.fullAddress="API Error parsing address",i.reliable=!1,i.zone=null,VTPortal.roApp.gpsEmployeePermission(!1)):t.message.indexOf("Only secure origins are allowed")==0?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("chromeGeolocationAccessForbidden"),"error",0):(i=VTPortal.roApp.currentLocationInfo(),i.coords[0]=0,i.coords[1]=0,i.location="API Error parsing city",i.fullAddress="API Error parsing address",i.zone=null,i.reliable=!1,VTPortal.roApp.currentLocationInfo(i),VTPortal.roApp.gpsEmployeePermission(!0));typeof n!="undefined"&&n!=null&&n()},{maximumAge:VTPortal.roApp.RequiereFineLocation?6e5:6e6,timeout:1e4,enableHighAccuracy:VTPortal.roApp.RequiereFineLocation})},lt=function(n,t,i,r){var u;if(r==null&&(r=VTPortal.roApp),n){if(r.userNotificationStatus()!=null&&r.userNotificationStatus().HasSupervisorAlerts)return 1;if(r.userAlerts()!=null&&typeof r.userAlerts()!="undefined")if(t)if(i){let n=r.userAlerts().SupervisorStatus.Alerts.length;return n+=r.userAlerts().SupervisorStatus.DocumentAlerts.DocumentsValidation.length>0?1:0,n+=r.userAlerts().SupervisorStatus.DocumentAlerts.MandatoryDocuments.length>0?1:0,n+=r.userAlerts().SupervisorStatus.DocumentAlerts.AbsenteeismDocuments.length>0?1:0,n+=r.userAlerts().SupervisorStatus.DocumentAlerts.GpaAlerts.length>0?1:0,n+=r.userAlerts().SupervisorStatus.DocumentAlerts.WorkForecastDocuments.length>0?1:0,n+(r.userAlerts().SupervisorStatus.DocumentAlerts.AccessAuthorizationDocuments.length>0?1:0)}else{let n=r.userAlerts().SupervisorStatus.Alerts.find(function(n){return n.AlertType==40});return typeof n!="undefined"&&n!=null?n.DetailCount:""}else if(i){let n=r.userAlerts().SupervisorStatus.Alerts.length>0?1:0;return n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.DocumentsValidation.length>0?1:0),n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.MandatoryDocuments.length>0?1:0),n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.AbsenteeismDocuments.length>0?1:0),n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.GpaAlerts.length>0?1:0),n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.WorkForecastDocuments.length>0?1:0),n==0&&(n+=r.userAlerts().SupervisorStatus.DocumentAlerts.AccessAuthorizationDocuments.length>0?1:0),u=r.userAlerts().SupervisorStatus.Alerts.find(function(n){return n.AlertType==40}),typeof u!="undefined"&&u!=null&&u.DetailCount>0&&(n+=1),n}else{let n=r.userAlerts().SupervisorStatus.Alerts.length;return i||(u=r.userAlerts().SupervisorStatus.Alerts.find(function(n){return n.AlertType==40}),typeof u!="undefined"&&u!=null&&(n+=u.DetailCount)),n}else return""}else{if(r.userNotificationStatus()!=null&&r.userNotificationStatus().HasStatusAlerts)return 1;if(r.userAlerts()!=null&&typeof r.userAlerts()!="undefined"){let n=0;return typeof r.userAlerts().ScheduleStatus.RequestAlerts!="undefined"&&(n=n+r.userAlerts().ScheduleStatus.RequestAlerts.length),typeof r.userAlerts().ScheduleStatus.IncompletePunches!="undefined"&&(n=n+r.userAlerts().ScheduleStatus.IncompletePunches.length),typeof r.userAlerts().ScheduleStatus.ForecastDocuments!="undefined"&&(n=n+r.userAlerts().ScheduleStatus.ForecastDocuments.length),r.userAlerts().ScheduleStatus.SignDocuments!=null&&typeof r.userAlerts().ScheduleStatus.SignDocuments!="undefined"&&(n=n+r.userAlerts().ScheduleStatus.SignDocuments.length),typeof r.userAlerts().ScheduleStatus.Notifications!="undefined"&&(n=n+r.userAlerts().ScheduleStatus.Notifications.length),r.userAlerts().ScheduleStatus.ExpiredDocAlert!=null&&(n=n+1),n}return""}},at=function(n,t,i){return function(r){if(typeof nfc!="undefined"&&(cordova.platformId==="ios"&&nfc.invalidateSession(),VTPortal.roApp.nfcEnabled(!1),VTPortal.roApp.nfcPunchInProgress(!1)),r.Status==window.VTPortalUtils.constants.OK.value){VTPortal.roApp.db.settings.markForRefresh(["status","punches"]);n=="ta"?(typeof r.StatusInfoMsg!="undefined"&&r.StatusInfoMsg!=null&&r.StatusInfoMsg!=""?VTPortalUtils.utils.notifyMesage(r.StatusInfoMsg,"success",2e3):t.direction=="S"?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roQuickPunchOutDone"),"success",2e3):t.direction=="X"?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roNFCPunchDone"),"success",2e3):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roQuickPunchInDone"),"success",2e3),VTPortal.roApp.redirectAtHome()):(VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("lblPunchDone"),"success",2e3),VTPortal.roApp.redirectAtHome());let u=function(n){return function(){typeof n=="function"&&n();VTPortal.roApp.homeView!=null&&VTPortalUtils.utils.isOnView("home")&&VTPortal.roApp.homeView.refreshModules()}};VTPortal.roApp.loadInitialData(!1,!1,!1,!1,!1,u(i))}else r.Status==window.VTPortalUtils.constants.PUNCH_ERROR_REPEAT_IN.value||r.Status==window.VTPortalUtils.constants.PUNCH_ERROR_REPEAT_OUT.value?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(r.Status)),"info",0):r.Status==window.VTPortalUtils.constants.PUNCH_NFC_TAG_NOT_FOUND.value?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(r.Status)),"warning",3e3):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t(window.VTPortalUtils.utils.languageTag(r.Status)),"error",0);VTPortal.roApp.ZoneSelected(!1);VTPortal.roApp.SelectedZone(-1);VTPortal.roApp.ReliableZone(!0)}},vt=function(n,t,i){var u="#dcdcdc",r,f;if(i=="month")typeof n[moment(t).format("YYYYMMDD")]!="undefined"&&n[moment(t).format("YYYYMMDD")]==!0&&(u="#0046FE");else if(i=="year")for(r=moment(t).startOf("month"),f=moment(t).endOf("month");r<f;){if(n[r.format("YYYYMMDD")],typeof n[r.format("YYYYMMDD")]!="undefined"&&n[r.format("YYYYMMDD")]==!0){u="#0046FE";break}r=r.add(1,"day")}return u},yt=function(n,t){var i,r;if(typeof t=="string"){if(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i.test(t)){var r=new Date(t),u=r.getTimezoneOffset()/60,f=r.getHours();return r.setHours(f+u),r}if(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}([+-])\d{2}:\d{2}/i.test(t))return i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})[+-](\d{2}):(\d{2})$/.exec(t),r=new Date(+i[1],+i[2]-1,+i[3],+i[4],i[5],+i[6]),r;if(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/i.test(t))return i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}?)$/.exec(t),r=new Date(+i[1],+i[2]-1,+i[3],+i[4],i[5],+i[6]),r}return t},pt=function(){return function(n){var t=moment().startOf("day").add(parseInt(n.value,10),"minutes");return t.format("HH:mm")}};const wt=function(n){const i=n<0,r=Math.abs(n),t=r*60,u=Math.floor(t/60),f=Math.floor(t%60),e=u.toString().padStart(2,"0"),o=f.toString().padStart(2,"0");return`${i?"-":""}${e}:${o}`};var bt=function(n,t){return function(i){var u,r,f,e;return n.Type=="O"?t==!1?i.valueText:parseInt(i.valueText,10):(u="0:00",i.value==0)?u:(r="",i.value<0&&(r="-"),typeof n.TotalFormat=="undefined"?(f=Math.abs(i.value)%1,e=new Date(f*36e5),r+Math.floor(Math.abs(i.value))+":"+("0"+e.getMinutes()).slice(-2)):n.TotalFormat)}},kt=function(n){return function(){var t=String(Math.trunc(n)).padStart(2,"0"),i=String(Math.abs(Math.round((n-t)*60))).padStart(2,"0");return t+":"+i}},dt=function(n){for(var f=[],t=0;t<n.length;t++){n[t].MaxValue=n[t].TaskValue;var i=0,r=0,u=0;n[t].TaskValue<=0?(i=n[t].TaskValue,r=1,u=i):(i=0,r=n[t].MaxValue,u=n[t].TaskValue);f.push({Name:n[t].TaskName,Gauge:{scale:{allowDecimals:!0,startValue:i,endValue:r,ttickInterval:r},value:u,subvalues:u,subvalueIndicator:{type:"textCloud",color:n[t].TaskValue>n[t].MaxValue?"#ff0000":"#0046FE",text:{customizeText:VTPortalUtils.utils.hoursToHHMM(n[t].TaskValue)}}}})}return f},gt=function(n){for(var f=[],t=0;t<n.length;t++){n[t].MaxValue==0&&(n[t].MaxValue=n[t].Total);var i=0,r=0,u=0;n[t].Total<=0?(i=n[t].Total,r=1,u=i):(i=0,r=n[t].MaxValue,u=n[t].Total);f.push({Name:n[t].Name,Gauge:{scale:{allowDecimals:!0,startValue:i,endValue:r,ttickInterval:r},value:u,subvalues:u,subvalueIndicator:{type:"textCloud",color:n[t].Total>n[t].MaxValue?"#ff0000":"#0046FE",text:{customizeText:VTPortalUtils.utils.convertHoursToTime(n[t],!1)}}},YearWorkPeriod:n[t].YearWorkPeriod})}return f},n=null,ni=function(t,i,r){var u=function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorOnRequestAction"),"error",0)},f=function(r){return function(u){if(u.Status==window.VTPortalUtils.constants.OK.value)VTPortal.roApp.impersonateOnlyRequest?(VTPortal.roApp.impersonatedIDEmployee=-1,VTPortal.roApp.db.settings.markForRefresh(["status","notifications"]),VTPortal.roApp.impersonateOnlyRequest=!1,VTPortal.roApp.redirectAtRequestList(i,!0)):VTPortal.roApp.redirectAtRequestList(i),r?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestApproved"),"success",2e3):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestDenied"),"success",2e3);else{var f=function(){n.approveRefuseRequest(t,r,!0)};VTPortalUtils.utils.processSupervisorRequestErrorMessage(u,f,function(){})}}};n=new WebServiceRobotics(f(r),u);n.approveRefuseRequest(t,r,!1)},ti=function(t,i,r){var u=function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorOnRequestAction"),"error",0)},f=function(r){return function(u){if(u.Status==window.VTPortalUtils.constants.OK.value)i==17?VTPortal.app.navigate("myTeamDailyRecords"):VTPortal.app.navigate("myTeamRequests"),r?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestApproved"),"success",2e3):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestDenied"),"success",2e3);else{var f=function(){n.approveRefuseRequestNew(t,r,!0)};VTPortalUtils.utils.processSupervisorRequestErrorMessage(u,f,function(){})}}};n=new WebServiceRobotics(f(r),u);n.approveRefuseRequestNew(t,r,!1)},ii=function(t,i,r){var u=function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorOnRequestAction"),"error",0)},f=function(r){return function(u){if(u.Status==window.VTPortalUtils.constants.OK.value)VTPortal.roApp.impersonateOnlyRequest?(VTPortal.roApp.impersonatedIDEmployee=-1,VTPortal.roApp.impersonateOnlyRequest=!1,VTPortal.roApp.redirectAtRequestList(i,!0)):VTPortal.roApp.redirectAtRequestList(i),r?VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestAccepted"),"success",2e3):VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roRequestRejected"),"success",2e3);else{var f=function(){n.approveRefuseRequestByEmployee(t,r,!0)};VTPortalUtils.utils.processSupervisorRequestErrorMessage(u,f,function(){})}}};n=new WebServiceRobotics(f(r),u);n.approveRefuseRequestByEmployee(t,r,!1)},ri=function(n,t){return $.grep(VTPortal.roApp.empPermissions().Requests,function(i){if(i.RequestType==n&&i.Permission==!0&&typeof i.HasRankings!="undefined"&&i.HasRankings==!0){var r=i.AutomaticReasons.find(function(n){return n==t});return r!=null?!0:!1}return!1}).length==1?!0:!1},ui=function(n){var t="#ffffff",i="#ffffff",r,u;return n!=null&&n.Alerts!=null&&(n.Alerts.OnAbsenceDays?(startChange="21%",changeToWhite="50%"):(n.Alerts.OnAbsenceHours||n.Alerts.OnHolidaysHours)&&(startChange="50%",changeToWhite="85%")),n!=null&&n.MainShift!=null&&(t=n.MainShift.Color),i=n!=null&&typeof n.RequestedShift!="undefined"&&n.RequestedShift!=""?n.RequestedShift:t,r="75",u="",u="background: "+t+";",u+="background: -moz-linear-gradient(top, "+t+" 0%, "+t+" "+r+"%, "+i+" "+r+"%, "+i+" 100%);",u+="background: -webkit-gradient(left top, left bottom, color-stop(0%, "+t+"), color-stop("+r+"%, "+t+"), color-stop("+r+"%, "+i+"), color-stop(100%, "+i+"));",u+="background: -webkit-linear-gradient(top, "+t+" 0%, "+t+" "+r+"%, "+i+" "+r+"%, "+i+" 100%);",u+="background: -o-linear-gradient(top, "+t+" 0%, "+t+" "+r+"%, "+i+" "+r+"%, "+i+" 100%);",u+="background: -ms-linear-gradient(top, "+t+" 0%, "+t+" "+r+"%, "+i+" "+r+"%, "+i+" 100%);",u+="background: linear-gradient(to bottom, "+t+" 0%, "+t+" "+r+"%, "+i+" "+r+"%, "+i+" 100%);",u+('filter: progid: DXImageTransform.Microsoft.gradient(startColorstr = "'+t+'", endColorstr = "'+i+'", GradientType = 0);')},fi=function(n){if(VTPortal.roApp.impersonatedIDEmployee!=-1||typeof VTPortal.roApp.db.settings.refreshConfiguration[n]=="undefined")return!0;var t=VTPortal.roApp.db.settings.refreshConfiguration[n],i=!0;if(t.refresh==1){let u=moment(VTPortal.roApp.db.settings.lastStatusRefresh[n].timestamp),r=moment();if(t.off!=""){let n=t.off.split("@");for(let t=0;t<n.length;t++){let u=n[t].split("-"),f=moment(r.format("YYYY-MM-DD")+" "+u[0],"YYYY-MM-DD hh:mm"),e=moment(r.format("YYYY-MM-DD")+" "+u[1],"YYYY-MM-DD hh:mm");if(r.isBetween(f,e)){i=!1;break}}}if(i){let n=t.interval;t.interval==-1&&(u=u.startOf("day"),r=r.startOf("day").add(1,"hour"),n=1440);let f=moment.duration(r.diff(u));f.asMinutes()<=n&&(i=!1)}}return i},ei=function(n){try{let t=VTPortal.app.navigationManager.currentStack.items[VTPortal.app.navigationManager.currentStack.currentIndex];if(t.uri==n)return!0}catch(t){return!1}return!1},oi=function(n){switch(n.IdRequestType){case 1:VTPortal.app.navigate("userFields/"+n.ID);break;case 2:VTPortal.app.navigate("forgottenPunch/"+n.ID);break;case 3:VTPortal.app.navigate("justifyPunch/"+n.ID);break;case 4:VTPortal.app.navigate("externalWork/"+n.ID);break;case 5:VTPortal.app.navigate("changeShift/"+n.ID);break;case 6:VTPortal.app.navigate("plannedHoliday/"+n.ID);break;case 7:VTPortal.app.navigate("plannedAbsence/"+n.ID);break;case 8:VTPortal.app.navigate("shiftExchange/"+n.ID);break;case 9:VTPortal.app.navigate("plannedCause/"+n.ID);break;case 10:VTPortal.app.navigate("forgottenPunch/"+n.ID);break;case 11:VTPortal.app.navigate("cancelHolidays/"+n.ID);break;case 12:VTPortal.app.navigate("forgottenPunch/"+n.ID);break;case 13:VTPortal.app.navigate("plannedHoliday/"+n.ID);break;case 14:VTPortal.app.navigate("plannedOvertime/"+n.ID);break;case 15:VTPortal.app.navigate("externalWorkWeekResume/"+n.ID)}},si=function(n){if(!VTPortal.roApp.loggedIn){clearInterval(VTPortal.roApp.refreshClockId);return}var t=VTPortal.roApp.userStatus();t!=null&&(t.ServerDate=moment(t.ServerDate).add(n,"seconds").toDate(),VTPortal.roApp.userStatus(t))},hi=function(){VTPortal.roApp.refreshId!=-1&&clearTimeout(VTPortal.roApp.refreshId);VTPortal.roApp.timegateLoggedIn=!1;VTPortal.roApp.logoutTimmer>0&&(clearTimeout(VTPortal.roApp.logoutTimmer),VTPortal.roApp.logoutTimmer=-1);new WebServiceRobotics(function(){window.VTPortalUtils.utils.clearTimegateData()},function(){window.VTPortalUtils.utils.clearTimegateData()}).logout(VTPortal.roApp.db.settings.UUID)},ci=function(){VTPortal.roApp.loggedIn?VTPortal.roApp.db.settings.onlySupervisor&&VTPortal.roApp.impersonatedIDEmployee==-1?VTPortal.app.navigate("myteam",{root:!0}):VTPortal.roApp.loadInitialData(!1,!1,!1,!1,!1):VTPortalUtils.utils.loginIfNecessary()},li=function(t,i){var r=function(){VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorDeleteProgrammedAbsence"),"error",0)},u=function(n){if(n.Status==window.VTPortalUtils.constants.OK.value)VTPortal.roApp.redirectAtHome(),VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roDeleteProgrammedAbsenceSaved"),"success",2e3);else{var t=function(){};VTPortalUtils.utils.processRequestErrorMessage(n,t,function(){})}};n==null&&(n=new WebServiceRobotics(u,r));n.deleteProgrammedAbsence(t,i)},ai=function(n,t){try{n=n.split("?")[0];var i=/(?:\.([^.]+))?$/.exec(n)[1];cordova.platformId==="ios"?window.resolveLocalFileSystemURL(cordova.file.documentsDirectory,function(r){r.getFile(n,{create:!0},function(r){r.createWriter(function(r){r.onwriteend=function(){cordova.plugins.fileOpener2.showOpenWithDialog(cordova.file.documentsDirectory+n,checkMimeTypes(i),{error:function(n){console.log("Error status: "+n.status+" - Error message: "+n.message)},success:function(){console.log("file opened successfully")}})};r.onerror=function(n){alert(n.message)};var u=new Blob([t],{type:checkMimeTypes(i)});r.write(u)},function(n){alert(n.message)})},function(n){alert(n.message)})},function(n){alert(n.message)}):window.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(r){r.getFile(n,{create:!0},function(r){r.createWriter(function(r){r.onwriteend=function(){cordova.plugins.fileOpener2.showOpenWithDialog(cordova.file.dataDirectory+n,checkMimeTypes(i),{error:function(n){console.log("Error status: "+n.status+" - Error message: "+n.message)},success:function(){console.log("file opened successfully")}})};r.onerror=function(n){alert(n.message)};var u=new Blob([t],{type:checkMimeTypes(i)});r.write(u)},function(n){alert(n.message)})},function(n){alert(n.message)})},function(n){alert(n.message)})}catch(r){alert(r.message)}},vi=function(n){var r=new Uint8Array(n.DocumentContent),i,t;if(VTPortal.roApp.isModeApp())ai(n.DocumentName,r);else{var t=n.DocumentName.split("?")[0],f=/(?:\.([^.]+))?$/.exec(t)[1],u=new Blob([r],{type:checkMimeTypes(f)});navigator.appVersion.toString().indexOf(".NET")>0?window.navigator.msSaveBlob(u,t):(i=document.createElement("a"),i.href=window.URL.createObjectURL(u),t=t,i.download=t,i.click())}},yi=function(n){var t=-1;switch(n){case"home":t=1;break;case"status":case"alerts":t=2;break;case"myTeam":t=3;break;case"accruals":t=VTPortal.roApp.db.settings.supervisorPortalEnabled?4:3;break;case"dailyRecord":t=VTPortal.roApp.db.settings.supervisorPortalEnabled?5:4;break;case"punches":t=VTPortal.roApp.db.settings.supervisorPortalEnabled?6:5;VTPortal.roApp.DailyRecordEnabled()||(t-=1);break;case"surveys":t=-1;break;case"communiques":t=VTPortal.roApp.db.settings.supervisorPortalEnabled?VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.OnBoardings&&VTPortal.roApp.isSaas()==!0?8:7:6;VTPortal.roApp.DailyRecordEnabled()||(t-=1);break;case"channels":t=VTPortal.roApp.db.settings.supervisorPortalEnabled?VTPortal.roApp.db.settings.ApiVersion>=VTPortalUtils.apiVersion.OnBoardings&&VTPortal.roApp.isSaas()==!0?9:8:7;VTPortal.roApp.DailyRecordEnabled()||(t-=1);VTPortal.roApp.isCegidHub()==!1&&VTPortal.roApp.isCommuniquesEnabled()==!0||(t-=1)}t>=0&&VTPortal.roApp.selectedTab(t)};window.VTPortalUtils={dateReviver:yt,needToRefresh:fi,causes:null,nullDate:moment(new Date(1970,0,1,0,0,0,0)),apiVersion:{InitialVersion:1,Holidays:2,LicenseAgreement:3,CauseNote:4,LogoutHome:5,SupervisorPortal:6,Adfs:7,CausesPermissions:8,PasswordEncrypt:9,PortalNext:10,Communiques:11,SendDocuments:12,OnBoardings:13,DocumentSign:14,Surveys:15,Telecommuting:16,CustomHeader:17,Firebase:18,NewRequests:19,RecoverSession:20,SharedPortal:21},taskAction:{begin:1,change:2,complete:3},calendar:{getCellColor:vt},utils:{downloadBytes:vi,deleteProgrammedAbsence:li,refreshData:ci,logoutTimegate:hi,isOnView:ei,navigateToRequest:oi,generateGradientFromColor:ui,checkIfRequestHasRanquings:ri,approveRefuseRequest:ni,approveRefuseRequestNew:ti,approveRefuseRequestByEmp:ii,convertShiftHourToTime:pt,hoursToDuration:wt,hoursToHHMM:kt,convertHoursToTime:bt,generateAccrualsArray:gt,generateAccrualsArrayProductiv:dt,badgeCount:lt,insertYoutubeVideo:f,formatTimeSpan:e,notImplemented:o,generateGuid:s,languageTag:h,reloadLocation:ct,doPunch:ht,parsePunchResult:at,clearTimegateData:ft,loginIfNecessary:it,onLoginCommitFunc:et,onLoginSuccessFunc:ot,onLogoutSuccessFunc:l,onLogoutResetParameters:c,onLogoutErrorFunc:a,onCheckUserSession:ut,onLoginErrorFunc:v,processSecurityMessage:tt,processErrorMessage:d,processRequestErrorMessage:nt,processSupervisorRequestErrorMessage:g,notifyMesage:k,questionMessage:b,loadingPanelConf:y,markRequestAsRead:w,deleteRequest:p,setActiveTab:yi,datetimeTypeSelect:function(){return VTPortal.roApp.isModeApp()?"rollers":"rollers"},dailyRecordDatetimeTypeSelect:function(){return VTPortal.roApp.isModeApp()?"rollers":"native"},updateClientTime:si,encryptString:rt,isShowingPopup:u,buildHamburgerMenu:pi},constants:{OK:{value:0,tag:"OK"},NO_SESSION:{value:-1,tag:"NO_SESSION"},BAD_CREDENTIALS:{value:-2,tag:"BAD_CREDENTIALS"},NOT_FOUND:{value:-3,tag:"NOT_FOUND"},GENERAL_ERROR:{value:-4,tag:"GENERAL_ERROR"},WRONG_MEDIA_TYPE:{value:-5,tag:"WRONG_MEDIA_TYPE"},NOT_LICENSED:{value:-6,tag:"NOT_LICENSED"},SERVER_NOT_RUNNING:{value:-7,tag:"SERVER_NOT_RUNNING"},NO_LIVE_PORTAL:{value:-8,tag:"NO_LIVE_PORTAL"},PUNCH_ERROR_DO_SEQUENCE:{value:-9,tag:"PUNCH_ERROR_DO_SEQUENCE"},PUNCH_ERROR_SEQ_STATUS_OK:{value:-10,tag:"PUNCH_ERROR_SEQ_STATUS_OK"},PUNCH_ERROR_REPEAT_IN:{value:-11,tag:"PUNCH_ERROR_REPEAT_IN"},PUNCH_ERROR_REPEAT_OUT:{value:-12,tag:"PUNCH_ERROR_REPEAT_OUT"},PUNCH_ERROR_MAX_SEQ_OK:{value:-13,tag:"PUNCH_ERROR_MAX_SEQ_OK"},PUNCH_ERROR_MAX_SEQ_ERR:{value:-14,tag:"PUNCH_ERROR_MAX_SEQ_ERR"},PUNCH_ERROR_NO_SEQUENCE:{value:-15,tag:"PUNCH_ERROR_NO_SEQUENCE"},PUNCH_ERROR_DELETING:{value:-16,tag:"PUNCH_ERROR_DELETING"},PUNCH_ERROR_SAVING:{value:-17,tag:"PUNCH_ERROR_SAVING"},PUNCH_ERROR_FORBIDDEN:{value:-18,tag:"PUNCH_ERROR_FORBIDDEN"},REQUEST_PUNCH_ERROR:{value:-19,tag:"REQUEST_PUNCH_ERROR"},FORBID_INCORRECT_DATE_BEFORE_PUNCH:{value:-20,tag:"FORBID_INCORRECT_DATE_BEFORE_PUNCH"},FORBID_INCORRECT_DATE_FUTURE:{value:-21,tag:"FORBID_INCORRECT_DATE_FUTURE"},FORBID_ERROR_SAVE_PUNCH:{value:-22,tag:"FORBID_ERROR_SAVE_PUNCH"},FORBID_ERROR_DO_SEQUENCE:{value:-23,tag:"FORBID_ERROR_DO_SEQUENCE"},USER_FIELDS_ACCESS_DENIED:{value:-24,tag:"USER_FIELDS_ACCESS_DENIED"},REQUEST_ERROR_ConnectionError:{value:-25,tag:"REQUEST_ERROR_ConnectionError"},REQUEST_ERROR_SqlError:{value:-26,tag:"REQUEST_ERROR_SqlError"},REQUEST_ERROR_NoDeleteBecauseNotPending:{value:-27,tag:"REQUEST_ERROR_NoDeleteBecauseNotPending"},REQUEST_ERROR_IncorrectDates:{value:-28,tag:"REQUEST_ERROR_IncorrectDates"},REQUEST_ERROR_NoApprovePermissions:{value:-29,tag:"REQUEST_ERROR_NoApprovePermissions"},REQUEST_ERROR_UserFieldNoRequestVisible:{value:-30,tag:"REQUEST_ERROR_UserFieldNoRequestVisible"},REQUEST_ERROR_NoApproveRefuseLevelOfAuthorityRequired:{value:-31,tag:"REQUEST_ERROR_NoApproveRefuseLevelOfAuthorityRequired"},REQUEST_ERROR_UserFieldValueSaveError:{value:-32,tag:"REQUEST_ERROR_UserFieldValueSaveError"},REQUEST_ERROR_InvalidPassport:{value:-33,tag:"REQUEST_ERROR_InvalidPassport"},REQUEST_ERROR_ChangeShiftError:{value:-34,tag:"REQUEST_ERROR_ChangeShiftError"},REQUEST_ERROR_VacationsOrPermissionsError:{value:-35,tag:"REQUEST_ERROR_VacationsOrPermissionsError"},REQUEST_ERROR_ExistsLockedDaysInPeriod:{value:-36,tag:"REQUEST_ERROR_ExistsLockedDaysInPeriod"},REQUEST_ERROR_ForbiddenPunchError:{value:-37,tag:"REQUEST_ERROR_ForbiddenPunchError"},REQUEST_ERROR_JustifyPunchError:{value:-38,tag:"REQUEST_ERROR_JustifyPunchError"},REQUEST_ERROR_RequestMoveNotExist:{value:-39,tag:"REQUEST_ERROR_RequestMoveNotExist"},REQUEST_ERROR_RequestMoveTooMany:{value:-40,tag:"REQUEST_ERROR_RequestMoveTooMany"},REQUEST_ERROR_PlannedAbsencesError:{value:-41,tag:"REQUEST_ERROR_PlannedAbsencesError"},REQUEST_ERROR_PlannedCausesError:{value:-42,tag:"REQUEST_ERROR_PlannedCausesError"},REQUEST_ERROR_ExternalWorkResumePartError:{value:-43,tag:"REQUEST_ERROR_ExternalWorkResumePartError"},REQUEST_ERROR_UserFieldRequired:{value:-44,tag:"REQUEST_ERROR_UserFieldRequired"},REQUEST_ERROR_PunchDateTimeRequired:{value:-45,tag:"REQUEST_ERROR_PunchDateTimeRequired"},REQUEST_ERROR_CauseRequired:{value:-46,tag:"REQUEST_ERROR_CauseRequired"},REQUEST_ERROR_DateRequired:{value:-47,tag:"REQUEST_ERROR_DateRequired"},REQUEST_ERROR_HoursRequired:{value:-48,tag:"REQUEST_ERROR_HoursRequired"},REQUEST_ERROR_ShiftRequired:{value:-49,tag:"REQUEST_ERROR_ShiftRequired"},REQUEST_ERROR_RequestRepited:{value:-50,tag:"REQUEST_ERROR_RequestRepited"},REQUEST_ERROR_PunchExist:{value:-51,tag:"REQUEST_ERROR_PunchExist"},REQUEST_ERROR_StartShiftRequired:{value:-52,tag:"REQUEST_ERROR_StartShiftRequired"},REQUEST_ERROR_PlannedCausesOverlapped:{value:-53,tag:"REQUEST_ERROR_PlannedCausesOverlapped"},REQUEST_ERROR_PlannedAbsencesOverlapped:{value:-54,tag:"REQUEST_ERROR_PlannedAbsencesOverlapped"},REQUEST_ERROR_TaskRequiered:{value:-55,tag:"REQUEST_ERROR_TaskRequiered"},REQUEST_ERROR_TIME_BETWEEN_PUNCHES:{value:-56,tag:"REQUEST_ERROR_TIME_BETWEEN_PUNCHES"},REQUEST_ERROR_TIME_BETWEEN_PUNCHES_OVER:{value:-57,tag:"REQUEST_ERROR_TIME_BETWEEN_PUNCHES_OVER"},TASK_ALERT_SAVE_ERROR:{value:-58,tag:"TASK_ALERT_SAVE_ERROR"},LOGIN_RESULT_LOW_STRENGHT_ERROR:{value:-59,tag:"LOGIN_RESULT_LOW_STRENGHT_ERROR"},LOGIN_RESULT_MEDIUM_STRENGHT_ERROR:{value:-60,tag:"LOGIN_RESULT_MEDIUM_STRENGHT_ERROR"},LOGIN_RESULT_HIGH_STRENGHT_ERROR:{value:-61,tag:"LOGIN_RESULT_HIGH_STRENGHT_ERROR"},LOGIN_PASSWORD_EXPIRED:{value:-62,tag:"LOGIN_PASSWORD_EXPIRED"},LOGIN_NEED_TEMPORANY_KEY:{value:-63,tag:"LOGIN_NEED_TEMPORANY_KEY"},LOGIN_TEMPORANY_KEY_EXPIRED:{value:-64,tag:"LOGIN_TEMPORANY_KEY_EXPIRED"},LOGIN_INVALID_VALIDATION_CODE:{value:-65,tag:"LOGIN_INVALID_VALIDATION_CODE"},LOGIN_BLOCKED_ACCESS_APP:{value:-66,tag:"LOGIN_BLOCKED_ACCESS_APP"},LOGIN_TEMPORANY_BLOQUED:{value:-67,tag:"LOGIN_TEMPORANY_BLOQUED"},LOGIN_GENERAL_BLOCK_ACCESS:{value:-68,tag:"LOGIN_GENERAL_BLOCK_ACCESS"},LOGIN_INVALID_CLIENT_LOCATION:{value:-69,tag:"LOGIN_INVALID_CLIENT_LOCATION"},LOGIN_INVALID_VERSION_APP:{value:-70,tag:"LOGIN_INVALID_VERSION_APP"},LOGIN_INVALID_APP:{value:-71,tag:"LOGIN_INVALID_APP"},REQUEST_ERROR_CostCenterRequiered:{value:-72,tag:"REQUEST_ERROR_CostCenterRequiered"},GENERAL_ERROR_NoPermissions:{value:-73,tag:"GENERAL_ERROR_NoPermissions"},GENERAL_ERROR_InvalidSecurityToken:{value:-74,tag:"GENERAL_ERROR_InvalidSecurityToken"},REQUEST_ERROR_PlannedHolidaysError:{value:-75,tag:"REQUEST_ERROR_PlannedHolidaysError"},REQUEST_ERROR_PlannedHolidaysOverlapped:{value:-76,tag:"REQUEST_ERROR_PlannedHolidaysOverlapped"},REQUEST_ERROR_AnotherHolidayExistInDate:{value:-77,tag:"REQUEST_ERROR_AnotherHolidayExistInDate"},REQUEST_ERROR_AnotherAbsenceExistInDate:{value:-78,tag:"REQUEST_ERROR_AnotherAbsenceExistInDate"},REQUEST_ERROR_InHolidayPlanification:{value:-79,tag:"REQUEST_ERROR_InHolidayPlanification"},REQUEST_ERROR_VacationsOrPermissionsOverlapped:{value:-80,tag:"REQUEST_ERROR_VacationsOrPermissionsOverlapped"},REQUEST_ERROR_CustomError:{value:-81,tag:"REQUEST_ERROR_CustomError"},REQUEST_WARNING_NeedConfirmation:{value:-82,tag:"REQUEST_WARNING_NeedConfirmation"},LOGIN_INVALID_APP_ADFS:{value:-83,tag:"LOGIN_INVALID_APP_ADFS"},NO_DOCUMENT_TEMPLATE_SELECTED:{value:-84,tag:"NO_DOCUMENT_TEMPLATE_SELECTED"},NO_DOCUMENT_ATTACHED:{value:-85,tag:"NO_DOCUMENT_ATTACHED"},USER_OR_EMAIL_NOTFOUND:{value:-86,tag:"USER_OR_EMAIL_NOTFOUND"},RECOVERKEY_NOTFOUND:{value:-87,tag:"RECOVERKEY_NOTFOUND"},ERROR_CREATING_NOTIFICATION:{value:-88,tag:"ERROR_CREATING_NOTIFICATION"},REQUEST_PENDING_VALIDATION:{value:-89,tag:"REQUEST_PENDING_VALIDATION"},REQUEST_DENIED_DUE_REQUESTVALIDATION:{value:-90,tag:"REQUEST_DENIED_DUE_REQUESTVALIDATION"},REQUEST_DENIED_DUE_SERVERDATA:{value:-91,tag:"REQUEST_DENIED_DUE_SERVERDATA"},GENERAL_ERROR_MaxCurrentSessionsExceeded:{value:-92,tag:"GENERAL_ERROR_MaxCurrentSessionsExceeded"},PUNCH_NFC_TAG_NOT_FOUND:{value:-94,tag:"PUNCH_NFC_TAG_NOT_FOUND"},DAILYRECORD_INCORRECT_DATE_FUTURE:{value:-101,tag:"DAILYRECORD_INCORRECT_DATE_FUTURE"},DAILYRECORD_INCORRECT_DATE_FROZEN:{value:-102,tag:"DAILYRECORD_INCORRECT_DATE_FROZEN"},DAILYRECORD_INCORRECT_DATE_ALREADY_EXISTS:{value:-103,tag:"DAILYRECORD_INCORRECT_DATE_ALREADY_EXISTS"},DAILYRECORD_WRONG_PUNCHES_SEQUENCE:{value:-104,tag:"DAILYRECORD_WRONG_PUNCHES_SEQUENCE"},DAILYRECORD_ERROR_SAVING_REQUEST:{value:-106,tag:"DAILYRECORD_ERROR_SAVING_REQUEST"},DAILYRECORD_ERROR_LOADING:{value:-107,tag:"DAILYRECORD_ERROR_LOADING"},DAILYRECORD_ERROR_LOADING_CALENDAR:{value:-108,tag:"DAILYRECORD_ERROR_LOADING_CALENDAR"},DAILYRECORD_ERROR_APPROVING_WHEN_MADE_BY_SUPERVISOR:{value:-109,tag:"DAILYRECORD_ERROR_APPROVING_WHEN_MADE_BY_SUPERVISOR"},DAILYRECORD_ERROR_DOES_NOT_EXISTS:{value:-110,tag:"DAILYRECORD_ERROR_DOES_NOT_EXISTS"},DAILYRECORD_ERROR_NO_PUNCHES:{value:-111,tag:"DAILYRECORD_ERROR_NO_PUNCHES"},DAILYRECORD_PUNCHES_OVERLAPED:{value:-112,tag:"DAILYRECORD_PUNCHES_OVERLAPED"},DAILYRECORD_HAS_REPEATED_PUNCHES:{value:-113,tag:"DAILYRECORD_HAS_REPEATED_PUNCHES"},ERROR_UPLOADING_DOCUMENT_TO_SIGN:{value:-114,tag:"ERROR_UPLOADING_DOCUMENT_TO_SIGN"},REQUEST_ERROR_OutOfContract:{value:-115,tag:"REQUEST_ERROR_OutOfContract"}}}}(),function(){var n=function(n){for(var r=n.split("."),i=window,t=0;t<r.length;t+=1)i=i[r[t]]=i[r[t]]||{};return i};n("Robotics.Client.Data")}();Robotics.Client.Data.roCatalog=function(){this.channelsLoaded=!1;this.channelsDS=ko.observable([]);this.conversationsLoaded={};this.conversationsDS=[];this.messagesLoaded={};this.messagesDS=[];this.workingObservable=null};Robotics.Client.Data.roCatalog.prototype.getChannelsDS=function(n){if(VTPortal.roApp.loggedIn){if(this.channelsLoaded&&(typeof n=="undefined"||typeof n!="undefined"&&n==!1))return this.channelsDS;var t=this;this.channelsLoaded=!0;new WebServiceRobotics(function(n){var i,r;if(n.Status==window.VTPortalUtils.constants.OK.value){for(i=n.Value,r=0;r<i.length;r++)i[r].hasAction=!0,i[r].MessagesInfo=i[r].NewMessages==0?i18nextko.i18n.t("nomessages"):i18nextko.i18n.t("newmessages")+i[r].NewMessages+" "+i18nextko.i18n.t("newmessages2"),i[r].cssClass=i[r].IsComplaintChannel?"dx-channelComplaint":"dx-channelCommunications";t.channelsDS(i)}else t.channelsDS([]),VTPortalUtils.utils.processErrorMessage(n,function(){})},function(){t.channelsDS([]);VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingChannels"),"error",0,function(){})}).getMyChannels()}return this.channelsDS};Robotics.Client.Data.roCatalog.prototype.loadConversationsDS=function(n,t){if(this.workingObservable=t,VTPortal.roApp.loggedIn){var i=this;new WebServiceRobotics(function(n){var t,r;if(n.Status==window.VTPortalUtils.constants.OK.value){for(t=n.Value,r=0;r<t.length;r++)t[r].hasAction=!0,t[r].MessagesInfo=t[r].NewMessages==0?i18nextko.i18n.t("nomessages"):i18nextko.i18n.t("newmessages")+t[r].NewMessages+" "+i18nextko.i18n.t("newmessages2"),t[r].cssClass="dx-channelMessage";i.workingObservable(t)}else i.workingObservable([]),VTPortalUtils.utils.processErrorMessage(n,function(){})},function(){for(var t=0;t<i.conversationsDS.length;t++)i.conversationsDS[t].id==n&&(i.conversationsDS[t].data=[]);i.workingObservable([]);VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingConversations"),"error",0,function(){})}).getMyConversationsByIDChannel(n)}};Robotics.Client.Data.roCatalog.prototype.loadMessagesDS=function(n,t){if(this.workingObservable=t,VTPortal.roApp.loggedIn){var i=this;new WebServiceRobotics(function(n){var t,r;if(n.Status==window.VTPortalUtils.constants.OK.value){for(t=n.Value,r=0;r<t.length;r++)t[r].hasAction=!0,t[r].MessagesInfo=t[r].NewMessages==0?i18nextko.i18n.t("nomessages"):i18nextko.i18n.t("newmessages")+t[r].NewMessages+" "+i18nextko.i18n.t("newmessages2"),t[r].cssClass="dx-channelMessage";i.workingObservable(t)}else i.workingObservable([]),VTPortalUtils.utils.processErrorMessage(n,function(){})},function(){for(var t=0;t<i.messagesDS.length;t++)i.messagesDS[t].id==n&&(i.messagesDS[t].data=[]);i.workingObservable([]);VTPortalUtils.utils.notifyMesage(i18nextko.i18n.t("roErrorLoadingConversations"),"error",0,function(){})}).getMyMessagesByIDConversation(n)}};Robotics.Client.Data.roCatalog.prototype.destroyDS=function(){this.channelsLoaded=!1;this.channelsDS([]);this.conversationsLoaded={};this.conversationsDS=[];this.messagesLoaded={};this.messagesDS=[]};