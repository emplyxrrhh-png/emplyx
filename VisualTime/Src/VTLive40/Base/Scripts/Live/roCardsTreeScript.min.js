(function(){function u(){n=document.querySelectorAll(h);$(n).off("click",f);$(n).on("click",f)}function f(n){[...document.querySelectorAll(".CardsTree-card")].map(n=>{n.classList.remove("CardsTree-cardClicked")});let t=n.currentTarget.querySelector(".CardsTree-card");t!=null&&t.classList.add("CardsTree-cardClicked")}function c(){[...document.querySelectorAll(".CardsTree-card")].map(n=>{n.classList.remove("CardsTree-cardClicked")})}function r(){const t=document.querySelector(".dxcvCSD");s(t);const n=[...document.querySelectorAll(".CardsTree-card")],i=v(t);n.length>0&&i.observe(n[n.length-1]);u();window.cardViewRefreshCallback!=null&&(window.cardViewRefreshCallback(),window.cardViewRefreshCallback=null)}function e(n="",u){typeof u!="undefined"&&(i=u);$originSearch=document.querySelector("#CardView_DXSE_I");$originSearch.value=$originSearch.value===`${t.value}${n}`?`${i} ${t.value}`:`${i} ${t.value}${n}`;$originSearch.onchange();r()}async function l(t=undefined){typeof t!="undefined"&&(t==-2&&(t=n.length>0?n[0].querySelector(".cardsTree-CardInfo").getAttribute("data-card-id"):-1),window.cardViewRefreshCallback=()=>o(t));try{CardView.Refresh();setTimeout(function(){window.completeRefreshCallback!=null&&window.completeRefreshCallback()},300)}catch(i){}}function o(t){if(parseInt(t,10)!=-1){const i=[...n].map(n=>{const t=n.querySelector(".cardsTree-CardInfo");return t&&t.getAttribute("data-card-id")});if(t!==undefined&&t&&i.indexOf(""+t)>-1)document.querySelector(`.CardsTree-card .cardsTree-CardInfo[data-card-id='${t}']`).parentElement.click();else{let t=n[0].querySelector(`.CardsTree-card .cardsTree-CardInfo`);t&&t.parentElement.click()}}}function a(){let n=!$("#divTree").is(":visible");$("#divTree").animate({width:"toggle",duration:100});n?$("#unhideTreeBtnWrapper").fadeOut():$("#unhideTreeBtnWrapper").fadeIn()}function s(n){n.parentNode.style.height=`${window.innerHeight-250}px`}function v(n){const t=document.createElement("div"),i=n.parentNode;return t.classList.add("scrollPanelLayer"),i.appendChild(t),i.style.verticalAlign="top",i.style.position="relative",new IntersectionObserver(n=>{t.style.opacity=n[0].isIntersecting&&n[0].intersectionRatio>=.5?0:1},{root:n,threshold:[0,.5,1]})}const h="#CardView_DXMainTable > tbody > tr";let n,t,i;$(document).ready(async function(){t=document.querySelector("#customSearchBar");i="";window.reloadCardsPanel=r;window.unselectCards=c;window.selectCardById=o;window.refreshCardTree=l;window.hideTree=a;window.handleCardTreeCustomSearch=e;window.cardViewRefreshCallback=null;window.completeRefreshCallback=null;u();$(t).on("keyup",()=>e(""));r()});window.onresize=()=>{s(document.querySelector(".dxcvCSD"))}})();