function getTextFromCatalog(n,t,i){let r=!0;t&&t.length!=0||(r=!1);let u=t;if(typeof n!="undefined"?(typeof i!="undefined"&&i.length>0&&(u=`${i}#${t}`),typeof n[u]=="undefined"&&(r=!1)):r=!1,r)return n[u];try{return Globalize.formatMessage(t)}catch{console.error(`Key ${u} not found on catalog and key ${t} not found on json resources.`)}return t}function getDateLocalizationFormats(){let n={aspLang:"",language:"",format:"",separator:"",moment:""},t=readCookie("VTLive_Language","es");switch(t){case"es":n.aspLang="ESP";n.language="es";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" hasta ";break;case"ca":n.aspLang="CAT";n.language="ca";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" fins ";break;case"pt":n.aspLang="POR";n.language="pt";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" atÃ© ";break;case"gl":n.aspLang="GAL";n.language="gl";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" ata ";break;case"it":n.aspLang="ITA";n.language="it";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" fino a ";break;case"fr":n.aspLang="FRA";n.language="fr";n.format="dd/MM/yyyy";n.moment="DD/MM/YYYY";n.separator=" au ";break;case"en":default:n.language="ENG";n.language="en";n.format="M-dd-yyyy";n.moment="MM-DD-YYYY";n.separator=" to "}return n}function dateToMsJson(n){n instanceof Date||(n=new Date(n));const t=n.getTime();return`/Date(${t.toString()})/`}function dateToJsonIsoString(n){const i=n.getTimezoneOffset();let t=moment(n);t.add(i,"minutes");n=t.toDate();const r=n.getFullYear(),u=n.getMonth(),f=n.getDate(),e=n.getHours(),o=n.getMinutes(),s=n.getSeconds(),h=new Date(Date.UTC(r,u,f,e,o,s));return h.toISOString()}function generateDefaultFilter(n){let t={Employees:[],Groups:[],Collectives:[],LabAgrees:[],Operation:"or",Filter:"",UserFields:"",ComposeMode:"Custom",ComposeFilter:"",Advanced:!1};return n=="All"||n=="None"?t.ComposeMode=n:(t.ComposeMode="Custom",t.ComposeFilter=n,n.split(",").forEach(function(n){n.charAt(0)=="A"?t.Groups.push({IdGroup:parseInt(n.substring(1),10),Name:""}):n.charAt(0)=="B"?t.Employees.push({IdEmployee:parseInt(n.substring(1),10),EmployeeName:""}):n.charAt(0)=="C"?t.Collectives.push({FieldValue:parseInt(n.substring(1),10),FieldName:""}):n.charAt(0)=="L"&&t.LabAgrees.push({FieldValue:parseInt(n.substring(1),10),FieldName:""})})),t}function fillComponentsData(n){let t=n;return typeof t.Employees=="undefined"&&(t.Employees=[]),typeof t.Groups=="undefined"&&(t.Groups=[]),typeof t.Collectives=="undefined"&&(t.Collectives=[]),typeof t.LabAgrees=="undefined"&&(t.LabAgrees=[]),typeof t.ComposeMode=="undefined"&&(t.ComposeMode="Custom"),typeof t.ComposeFilter=="undefined"&&(t.ComposeFilter="Custom"),typeof t.Filters!="undefined"&&delete t.Filters,t.Groups=[],t.Employees=[],t.Collectives=[],t.LabAgrees=[],t.ComposeMode!="All"&&t.ComposeMode!="None"&&t.ComposeFilter.split(",").forEach(function(n){n.charAt(0)=="A"?t.Groups.push({IdGroup:parseInt(n.substring(1),10),Name:""}):n.charAt(0)=="B"?t.Employees.push({IdEmployee:parseInt(n.substring(1),10),EmployeeName:""}):n.charAt(0)=="C"?t.Collectives.push({FieldValue:parseInt(n.substring(1),10),FieldName:""}):n.charAt(0)=="L"&&t.LabAgrees.push({FieldValue:parseInt(n.substring(1),10),FieldName:""})}),t}function buildSelectedEmployeesString(n){let t=null;t=typeof n=="object"?n:generateDefaultFilter(n);t=fillComponentsData(t);let i="";try{if(typeof t.ComposeMode!="undefined"&&(t.ComposeMode=="All"||t.ComposeMode=="None"))i=Globalize.formatMessage(`roSelectorEmployees_Mode_${t.ComposeMode}`);else{if(t.Employees.length+t.Groups.length+t.Collectives.length+t.LabAgrees.length==1)t.Employees.length>0&&(i=typeof t.Employees[0].EmployeeName=="undefined"||t.Employees[0].EmployeeName==""?`1 ${Globalize.formatMessage("roSelectorEmployee")}`:`${t.Employees[0].EmployeeName}`),t.Groups.length>0&&(i=typeof t.Groups[0].Name=="undefined"||t.Groups[0].Name==""?`1 ${Globalize.formatMessage("roSelectorGroup")}`:`${t.Groups[0].Name}`),t.Collectives.length>0&&(i=typeof t.Collectives[0].FieldName=="undefined"||t.Collectives[0].FieldName==""?`1 ${Globalize.formatMessage("roSelectorCollective")}`:`${t.Collectives[0].FieldName}`),t.LabAgrees.length>0&&(i=typeof t.LabAgrees[0].FieldName=="undefined"||t.LabAgrees[0].FieldName==""?`1 ${Globalize.formatMessage("roSelectorLabAgree")}`:`${t.LabAgrees[0].FieldName}`);else{let n=" "+Globalize.formatMessage("roSelectorAND")+" ",r=t.Collectives.length+t.LabAgrees.length>0?", ":n,u=t.LabAgrees.length>0?", ":n;t.Employees.length>0&&(i+=`${t.Employees.length} ${t.Employees.length>1?Globalize.formatMessage("roSelectorEmployees"):Globalize.formatMessage("roSelectorEmployee")}`);t.Groups.length>0&&(i+=`${i.length>0?r:""}${t.Groups.length} ${t.Groups.length>1?Globalize.formatMessage("roSelectorGroups"):Globalize.formatMessage("roSelectorGroup")}`);t.Collectives.length>0&&(i+=`${i.length>0?u:""}${t.Collectives.length} ${t.Collectives.length>1?Globalize.formatMessage("roSelectorCollectives"):Globalize.formatMessage("roSelectorCollective")}`);t.LabAgrees.length>0&&(i+=`${i.length>0?n:""}${t.LabAgrees.length} ${t.LabAgrees.length>1?Globalize.formatMessage("roSelectorLabAgrees"):Globalize.formatMessage("roSelectorLabAgree")}`)}i==""&&(i=Globalize.formatMessage("roSelectorEmpty"))}}catch(r){i=r}return i}async function loadSelectorViewFromServer(n,t,i){let r=null,u=await fetch(n+"/GetUniversalSelector",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sSelectorName:t})});if(u.ok){let n=await u.json();if(n!=null&&n!=""){r=JSON.parse(n);let t=Date.now();localStorage.setItem(i,JSON.stringify({view:r,timestamp:t}))}}else r=generateDefaultFilter(undefined);return r}async function deleteEntity(n){let t=n.element.attr("section");DevExpress.ui.dialog.confirm(viewUtilsManager.DXTranslate(`roDeleteConfirmQuestion_${t}`).length>0?viewUtilsManager.DXTranslate(`roDeleteConfirmQuestion_${t}`):viewUtilsManager.DXTranslate(`roDeleteConfirmQuestion_`),viewUtilsManager.DXTranslate(`roDeleteConfirmOk_${t}`).length>0?viewUtilsManager.DXTranslate(`roDeleteConfirmOk_${t}`):viewUtilsManager.DXTranslate(`roDeleteConfirmOk_`)).done(async function(i){if(i){const i=`${t}_delete`;if(typeof window[i]=="function"){let r=await window[i](n);processResult(r,t)}else console.error(`Function ${i} not found.`)}})}async function visualizeEntity(n){let i=n.element.attr("section");const t=`${i}_visualize`;if(typeof window[t]=="function"){let i=await window[t](n)}else console.error(`Function ${t} not found.`)}async function undoEntity(n){let i=n.element.attr("section");const t=`${i}_undo`;if(typeof window[t]=="function"){let r=await window[t](n);processResult(r,i)}else console.error(`Function ${t} not found.`)}async function saveEntity(n){let i=n.element.attr("section");const t=`${i}_save`;if(typeof window[t]=="function"){let r=await window[t](n);processResult(r,i)}else console.error(`Function ${t} not found.`)}async function closeEntity(n){let i=n.element.attr("section");const t=`${i}_close`;if(typeof window[t]=="function"){let r=await window[t](n);processResult(r,i)}else console.error(`Function ${t} not found.`)}function processResult(n,t){typeof n=="object"&&n!=null?n.Success&&(setEntityChanges(t,!1),sb_hasChanges(t,!1)):DevExpress.ui.notify(viewUtilsManager.DXTranslate("roConvertedError"),"error",2e3)}function sb_hasChanges(n,t){let i=null;i=typeof trackedEntityChanges!="undefined"&&typeof trackedEntityChanges[n]!="undefined"?trackedEntityChanges[n]:!1;t&&(i=!0);typeof $(`#${n}_btnUndoEntity`).dxButton("instance")!="undefined"&&$(`#${n}_btnUndoEntity`).dxButton("instance").option("disabled",!i);typeof $(`#${n}_btnSaveEntity`).dxButton("instance")!="undefined"&&$(`#${n}_btnSaveEntity`).dxButton("instance").option("disabled",!i);typeof $(`#${n}_btnCloseEntity`).dxButton("instance")!="undefined"&&$(`#${n}_btnCloseEntity`).dxButton("instance").option("disabled",!1);setEntityChanges(n,i)}function setDeleteStatus(n,t){typeof $(`#${n}_btnDeleteEntity`).dxButton("instance")!="undefined"&&$(`#${n}_btnDeleteEntity`).dxButton("instance").option("disabled",!t)}function sectionHasChanges(n){return(typeof trackedEntityChanges=="undefined"&&(trackedEntityChanges={}),typeof trackedEntityChanges[n]=="undefined")?!1:trackedEntityChanges[n]}function setEntityChanges(n,t){typeof trackedEntityChanges=="undefined"&&(trackedEntityChanges={});trackedEntityChanges[n]=t}function setChangesBarTitle(n,t){$(`#${n}_spanTitle`).text(t)}function registerFunction(n){window.functionWaitQueue[n]=window.functionWaitQueue[n]||[];window.functionWaitQueue[n].length>0&&(window.functionWaitQueue[n].forEach(n=>n()),window.functionWaitQueue[n]=[])}function waitForFunction(n,t){typeof window[n]=="function"?t():(window.functionWaitQueue[n]=window.functionWaitQueue[n]||[],window.functionWaitQueue[n].push(t))}function removeAccents(n){return typeof n!="string"?"":n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function generateShortName(n,t=[],i=3,r={}){const e={...{timeFormat:!0,singleWordMode:"prefix",fillMode:"letters"},...r};n=removeAccents(n||"").trim();let f="";if(!n)return"".padEnd(i,"1");const u=n.split(" ").filter(n=>n.length>0);if(u.length===0)return"".padEnd(i,"1");const o=/\d{2}:\d{2}/,s=e.timeFormat&&u.length>=3&&o.test(u[0])&&u[1]==="-"&&o.test(u[2]);if(s)for(let n=3;n<u.length;n++)u[n].length>0&&(f+=u[n][0].toUpperCase());else if(e.timeFormat&&o.test(u[0])&&u.length===1)f=u[0].replace(":","");else if(u.length>1)f+=u[0][0].toUpperCase(),u.length>1&&f.length<i&&(f+=u[1][0].toUpperCase()),u.length>2&&f.length<i&&(f+=u[u.length-1][0].toUpperCase());else if(e.singleWordMode==="prefix")f=u[0].substring(0,i).toUpperCase();else{const n=u[0];f=n[0].toUpperCase();n.length>=3&&f.length<i&&(f+=n[Math.floor(n.length/2)].toUpperCase());n.length>=2&&f.length<i&&(f+=n[n.length-1].toUpperCase())}if(f.length>i&&(f=f.substring(0,i)),f.length<i){if(e.fillMode==="letters")for(let n=0;n<u.length&&f.length<i;n++)for(let t=n===0&&u.length>1&&u[0].length>0&&f.includes(u[0][0].toUpperCase())?1:0;t<u[n].length&&f.length<i;t++)f.length!==0&&n===0&&t===0&&u.length>1&&f.startsWith(u[0][0].toUpperCase())||(t>0||n>0&&u[n].length>0?u[n][t]&&(f+=u[n][t].toUpperCase()):n===0&&u.length===1&&t>0&&u[n][t]&&(f+=u[n][t].toUpperCase()));let n=1;while(f.length<i)f+=n,n++}if(t&&t.length>0){let r=1;const u=f.substring(0,i);let n=u;while(t.includes(n)){const t=Math.max(1,i-String(r).length);if(n=u.substring(0,t)+r,n.length>i&&(n=n.substring(0,i)),r++,r>1e3)break}f=n}return f.substring(0,i)}let trackedEntityChanges={};window.functionWaitQueue=window.functionWaitQueue||{};