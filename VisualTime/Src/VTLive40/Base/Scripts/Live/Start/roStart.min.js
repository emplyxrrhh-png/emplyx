function showPopover(){setTimeout(function(){$("#news1").dxPopover("show")},500);setTimeout(function(){$("#news2").dxPopover("show")},1e3);setTimeout(function(){$("#news3").dxPopover("show")},1500)}function hasData(){var n=localStorage.getItem("refreshPressed");return localStorage.removeItem("refreshPressed"),n}function closePopupWarning(){var n=$("#warningGroups").dxPopup("instance");n.hide()}function selectedAllGroups(n){if(n.value==!0){var t=$("#warningGroups").dxPopup("instance");t.show()}}function refreshGrid(n){var i=document.getElementById("employeesResumeWithData"),r=document.getElementById("employeesResumeWithoutData"),t=localStorage.getItem("groupSelected"),f=[],u;if(t!="ninguno"&&t!=null&&typeof t!="undefined"&&(f=JSON.parse(t)),$("#GroupsList").dxTagBox("instance").option("selectedItems").length==0&&f.length==n.removedItems.length)i.style.display="none",r.style.display="",localStorage.setItem("groupSelected","ninguno");else if(n.addedItems.length>0||n.removedItems.length>0||t!=null&&typeof t!="undefined"&&t!="null"&&t!="ninguno"&&t!=""&&t!="[]"){i.style.display="";r.style.display="none";u=null;u=n.addedItems.length==0&&n.removedItems.length==0?JSON.parse(t):jQuery.map($("#GroupsList").dxTagBox("instance").option("selectedItems"),function(n){return n.IdGroup});localStorage.setItem("groupSelected",JSON.stringify(u));try{$("#gridStatusEmployees").dxDataGrid("instance").refresh()}catch(e){}}else i.style.display="none",r.style.display="",localStorage.setItem("groupSelected","ninguno")}function restoreFiltersTelecommute(n){selectedTC=[];$("#listResumeEmployeesTC").dxList("instance").unselectItem(n.itemIndex)}function filterGridTelecommute(n){selectedStatus=[];selectedAbsence=[];n.addedItems.length>0?($("#listResumeEmployees").dxList("instance").option("selectedItemKeys",selectedStatus),$("#listResumeAbsence").dxList("instance").option("selectedItemKeys",selectedAbsence),selectedTCItems.length>0&&n.addedItems[0].ImageSrc==selectedTCItems[0].ImageSrc||(n.addedItems[0].ImageSrc=="Base/Images/PortalRequests/icons8-office-48.png"?$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["InRealTimeTC","=","0"]):$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["InRealTimeTC","=","1"]))):($("#listResumeEmployeesTC").dxList("instance").option("selectedItemKeys",selectedTC),selectedTC.length==0&&$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",[]))}function restoreFiltersAbsences(n){selectedAbsence=[];$("#listResumeAbsence").dxList("instance").unselectItem(n.itemIndex)}function filterGridAbsences(n){selectedStatus=[];selectedTC=[];n.addedItems.length>0?(typeof $("#listResumeEmployeesTC").dxList("instance")!="undefined"&&$("#listResumeEmployeesTC").dxList("instance").option("selectedItemKeys",selectedTC),$("#listResumeEmployees").dxList("instance").option("selectedItemKeys",selectedStatus),selectedAbsenceItems.length>0&&n.addedItems[0].ImageSrc==selectedAbsenceItems[0].ImageSrc||(n.addedItems[0].ImageSrc=="Base/Images/PortalRequests/ico_Holidays.png"?$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["InAnyHoliday","=","1"]):$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["InAnyAbsence","=","1"]))):($("#listResumeAbsence").dxList("instance").option("selectedItemKeys",selectedAbsence),selectedAbsence.length==0&&$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",[]))}function restoreFiltersStatus(n){selectedStatus=[];$("#listResumeEmployees").dxList("instance").unselectItem(n.itemIndex)}function filterGridStatus(n){selectedTC=[];selectedAbsence=[];n.addedItems.length>0?(typeof $("#listResumeEmployeesTC").dxList("instance")!="undefined"&&$("#listResumeEmployeesTC").dxList("instance").option("selectedItemKeys",selectedTC),$("#listResumeAbsence").dxList("instance").option("selectedItemKeys",selectedAbsence),selectedStatusItems.length>0&&n.addedItems[0].ImageSrc==selectedStatusItems[0].ImageSrc||(n.addedItems[0].ImageSrc=="Base/Images/PortalRequests/WX_circle_green.png"?$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["PresenceStatus","=","In"]):$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",["PresenceStatus","<>","In"]))):($("#listResumeEmployees").dxList("instance").option("selectedItemKeys",selectedStatus),selectedStatus.length==0&&$("#gridStatusEmployees").dxDataGrid("instance").option("filterValue",[]))}function onContentReady(n){var i=document.getElementById("employeesResumeWithData"),r=document.getElementById("employeesResumeWithoutData"),t=localStorage.getItem("groupSelected");firstRender&&n.component.getDataSource().load().done(function(u){if(t!=null&&t!="undefined"&&t!="null"&&t!="ninguno"&&t!="")i.style.display="",r.style.display="none",t=JSON.parse(t),$("#GroupsList").dxTagBox("instance").option("value",jQuery.map(t,function(n){return{IdGroup:n}}));else{if(t==null||t==""){i.style.display="";r.style.display="none";n.component.option("value",u[0]);return}i.style.display="none";r.style.display=""}});firstRender=!1}function beforeSend(n,t){var i=localStorage.getItem("refreshPressed");localStorage.removeItem("refreshPressed");$("#GroupsList").dxTagBox("instance").option("value").length>0&&(t.method="POST",t.data.idGroup=localStorage.getItem("groupSelected"))}function hideThePopover(){$("#newsOk")&&$("#newsOk").dxPopover("hide");$("#news1")&&$("#news1").dxPopover("hide");$("#news2")&&$("#news2").dxPopover("hide");$("#news3")&&$("#news3").dxPopover("hide");$.ajax({url:"Start/UpdateHelpVersion",type:"POST",success:function(){}})}function exportDashboard(n){var t=new ExcelJS.Workbook,i=t.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:i,component:n.component,customizeCell:function(n){n.excelCell.font={name:"Arial",size:12};n.excelCell.alignment={horizontal:"left"}}}).then(function(){t.xlsx.writeBuffer().then(function(n){saveAs(new Blob([n],{type:"application/octet-stream"}),"estado.xlsx")})})}function selection_changed(n){if(n.columnIndex==0){let t=n.row.data.IdEmployee;$.ajax({url:`/Employee/GetEmployeeTreeSelectionPath/${t}`,data:{},type:"GET",dataType:"json",success:async n=>{if(typeof n!="string"){let i=await getroTreeState("ctl00_contentMainBody_roTrees1",!0);return await i.setRedirectData(n.EmployeePath,n.GroupSelectionPath),window.open(RootUrl+"/Employees/Employees?IDEmployee="+t,"_blank"),!1}DevExpress.ui.notify(n,"error",2e3)},error:n=>console.error(n)})}}function cell_prepared(n){var i,t;if(n.columnIndex==0&&typeof n.row!="undefined")if(n.row.data.PresenceStatus=="In")n.cellElement.addClass("employeeListPhoto");else if(n.row.data.LastPunchFormattedDateTime!="")n.cellElement.addClass("employeeListPhotoOut");else for(n.cellElement.addClass("employeeListNA"),i=n.row.cells.length,t=0;t<i;t++)typeof n.row.cells[t].cellElement!="undefined"&&n.row.cells[t].cellElement.addClass("naUser")}function reenviaRequests(){return window.open(RootUrl+"/Requests/Requests","_blank"),!1}function navigateCompany(){return window.open(RootUrl+"/Employees/Company","_blank"),!1}function navigateEmployees(){return window.open(RootUrl+"/Employees/Employees","_blank"),!1}function navigateAnalytic(){return Genius.toUpperCase()=="TRUE"?(window.open(RootUrl+"//Genius","_blank"),!1):(window.open(RootUrl+"/Scheduler/AnalyticsScheduler","_blank"),!1)}function navigateCalendar(){return window.open(RootUrl+"/Scheduler/Calendar","_blank"),!1}function reenviaAlerts(){return window.open(RootUrl+"/Alerts/Alerts","_blank"),!1}function refreshPartial(){typeof $("#listResumeEmployeesTC").dxList("instance")!="undefined"&&(selectedTC=$("#listResumeEmployeesTC").dxList("instance").option("selectedItemKeys"),selectedTCItems=$("#listResumeEmployeesTC").dxList("instance").option("selectedItems"),$("#listResumeEmployeesTC").dxList("instance").reload());typeof $("#listResumeAbsence").dxList("instance")!="undefined"&&(selectedAbsence=$("#listResumeAbsence").dxList("instance").option("selectedItemKeys"),selectedAbsenceItems=$("#listResumeAbsence").dxList("instance").option("selectedItems"),$("#listResumeAbsence").dxList("instance").reload());typeof $("#listResumeEmployees").dxList("instance")!="undefined"&&(selectedStatus=$("#listResumeEmployees").dxList("instance").option("selectedItemKeys"),selectedStatusItems=$("#listResumeEmployees").dxList("instance").option("selectedItems"),$("#listResumeEmployees").dxList("instance").reload())}function toolbar_preparing(n){var t=n.component;n.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:function(){localStorage.setItem("refreshPressed",!0);t.refresh()}}},{location:"after",widget:"dxButton",options:{icon:"fullscreen",onClick:function(){hideTree()}}})}function hideTree(){let n=!$("#section2").is(":visible");document.getElementById("section1").style.width=n?"100%":"100%";$("#section2").animate({width:"toggle",duration:100})}function showUpdateNotification(){}function acceptUpdateNotification(){$("#updateNotificationPopup")&&$("#updateNotificationPopup").dxPopup("hide");$("#dontShowUpdateAgainCheckbox").prop("checked")&&$.ajax({url:"Start/UpdateVersionNotification",type:"POST",success:function(){}})}var selectedTC=[],selectedTCItems=[],selectedAbsence=[],selectedAbsenceItems=[],selectedStatus=[],selectedStatusItems=[],firstRender=!0,headerFilter={load:function(){return[{text:viewUtilsManager.DXTranslate("roPresent"),value:[["PresenceStatus","=","In"]]},{text:viewUtilsManager.DXTranslate("roAbsent"),value:[["PresenceStatus","<>","In"]]}]}},headerFilterTelecommute={load:function(){return[{text:viewUtilsManager.DXTranslate("roHome"),value:[["InTelecommute","=",!0]]},{text:viewUtilsManager.DXTranslate("roOffice"),value:[["InTelecommute","=",!1]]}]}},headerFilterAbsence={load:function(){return[{text:viewUtilsManager.DXTranslate("roDaysAbsence"),value:[["InAbsence","=","1"]]},{text:viewUtilsManager.DXTranslate("roHolidaysAbsence"),value:[["InHolidays","=","1"]]},{text:viewUtilsManager.DXTranslate("roHoursAbsence"),value:[["InHoursAbsence","=","1"]]},{text:viewUtilsManager.DXTranslate("roDaysRequest"),value:[["DaysAbsenceRequested","=","1"]]},{text:viewUtilsManager.DXTranslate("roHoursRequest"),value:[["HoursAbsenceRequested","=","1"]]}]}};